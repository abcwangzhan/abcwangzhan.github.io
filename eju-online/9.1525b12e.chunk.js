(this.webpackJsonp=this.webpackJsonp||[]).push([[9],{1244:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return I}));n(127);var a=n(66),c=n.n(a),l=(n(1196),n(1197)),u=n.n(l),r=(n(67),n(46)),i=n.n(r),o=(n(260),n(101)),s=n.n(o),m=n(262),d=n(17),f=n(39),E=n(0),v=n.n(E),p=n(1239),b=n(1236),j=n(166),g=n(128),h=n(97),k=n(1192),O=n(100),y=n(1191),w=n(50),C=n(98),T=n(447),q=function(e){var t=Object(T.a)(j.l,{onCompleted:function(e){return b(e)}}),n=Object(f.a)(t,2),a=n[0],l=n[1].loading,u=Object(E.useContext)(O.a).state,r=e.hide,o=e.tag,m=e.answerNum,d=e.answer,p=e.timeCounter,b=function(e){r(),C.a.replace("/quick-result?tag=".concat(o))};return Object(E.useEffect)((function(){l?s.a.loading("\u63d0\u4ea4\u4e2d",0):s.a.hide()}),[l]),v.a.createElement(w.h,null,v.a.createElement(w.b,null,v.a.createElement(w.i,null,"\u7b54\u9898\u5361",v.a.createElement(w.j,null,v.a.createElement(i.a,{type:"cross",onClick:function(){return r()}}))),v.a.createElement(w.f,null,v.a.createElement(w.d,null,o),v.a.createElement(w.e,null,function(){for(var e=[],t=0;t<m;t+=1)d[t]?e.push(v.a.createElement(w.g,{className:"true",key:t+1},t+1)):e.push(v.a.createElement(w.g,{key:t+1},t+1));return e}())),v.a.createElement(y.i,null,v.a.createElement(c.a,{type:"primary",onClick:function(){for(var e=u.quick,t=u.quickTrueAnswer,n=[],c=[],l=[],r=0,i=0;i<m;i+=1){var o;n.push((null===e||void 0===e||null===(o=e[i])||void 0===o?void 0:o._id)||"");var s=d[i];c.push([s||""]);var f=null===t||void 0===t?void 0:t[i];(null===f||void 0===f?void 0:f.answer)===s?(r+=1,l.push(null===f||void 0===f?void 0:f.point)):l.push(0)}var E=Object(g.a)(),v=E.subject,b=E.tagId,j=E.sourceType;a({variables:{ids:n,userAnswers:c,points:l,accuracy:r/m,timeCounter:p,subject:v,tagId:b,sourceType:j,moduleType:"0"}})}},"\u786e\u5b9a\u63d0\u4ea4"))))},A=n(1198),I=function(){var e=Object(E.useState)({}),t=Object(f.a)(e,2),n=t[0],a=t[1],l=Object(E.useState)(0),r=Object(f.a)(l,2),o=r[0],C=r[1],T=Object(b.a)(j.j),I=Object(f.a)(T,2),N=I[0],S=I[1],_=S.data,x=S.loading,Q=Object(E.useState)(!1),J=Object(f.a)(Q,2),B=J[0],F=J[1],z=Object(E.useContext)(O.a).dispatch,D=(_||{}).smartQuestions,G=Object(p.e)(),H=Object(g.a)(),K=H.subject,L=H.tagId,M=H.tag,P=(null===D||void 0===D?void 0:D.length)||0,R=function(){C((function(e){return e+1}))};return Object(E.useEffect)((function(){N({variables:{subject:K,tagId:L}})}),[N,K,L]),Object(E.useEffect)((function(){var e=[];null===D||void 0===D||D.forEach((function(t){return e.push(t.checkAnswer)})),null===z||void 0===z||z({type:"setQuickTrueAnswer",quickTrueAnswer:e}),null===z||void 0===z||z({type:"setQuick",quick:D})}),[z,D]),Object(E.useEffect)((function(){x?s.a.loading("\u52a0\u8f7d\u4e2d",0):s.a.hide()}),[x]),Object(E.useEffect)((function(){var e;null===(e=document.getElementById("quick_page"))||void 0===e||e.scrollTo(0,0)}),[o]),v.a.createElement(v.a.Fragment,null,P>0&&v.a.createElement(y.w,{id:"quick_page"},v.a.createElement(y.u,null,v.a.createElement(y.t,null),v.a.createElement(y.v,null,v.a.createElement(i.a,{type:"cross",color:"#262626",onClick:function(){return G.go(-1)}}),v.a.createElement(y.s,null,"00:18"))),v.a.createElement(y.m,null,v.a.createElement(u.a,{dots:!1,style:{height:"100%"},afterChange:function(e){setTimeout((function(){C(e)}),500)},selectedIndex:o},null===D||void 0===D?void 0:D.map((function(e,t){var c=e.question,l=e.questionId,u=e.options,r=e._id;return v.a.createElement(y.n,{key:r},v.a.createElement(y.u,{className:"lr-pd"},v.a.createElement(y.s,null,l," ",M),v.a.createElement(y.s,null,t+1,"/",null===D||void 0===D?void 0:D.length)),v.a.createElement(y.r,null,Object(A.a)(c)),v.a.createElement(w.a,null,null===u||void 0===u?void 0:u.map((function(e,c){return v.a.createElement(w.c,{onClick:function(){return e=t,n=c,a((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(m.a)({},e,k.k[n]))})),void setTimeout((function(){o+1<P&&R()}),300);var e,n},key:e,className:n[t]===k.k[c]?"active":""},e)}))))})))),v.a.createElement(y.i,null,v.a.createElement(y.h,null),v.a.createElement(y.j,null,o+1===P?v.a.createElement(c.a,{type:"primary",onClick:function(){null===z||void 0===z||z({type:"setSelectAnswer",selectAnswer:n}),F(!0)}},"\u63d0\u4ea4"):v.a.createElement(c.a,{type:"primary",onClick:R},"\u4e0b\u4e00\u9898")))),v.a.createElement(h.a,{effect:"bottom",needCloseTag:!0,visible:B},v.a.createElement(q,{hide:function(){return F(!1)},answer:n,tag:M,answerNum:P,timeCounter:18})))}}}]);