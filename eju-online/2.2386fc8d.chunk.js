(this.webpackJsonp=this.webpackJsonp||[]).push([[2],{1203:function(e,t,n){var a;(function(){var n=!1,i=function e(t){return t instanceof e?t:this instanceof e?void(this.EXIFwrapped=t):new e(t)};e.exports&&(t=e.exports=i),t.EXIF=i;var r=i.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},c=i.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},o=i.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},l=i.IFD1Tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",296:"ResolutionUnit",513:"JpegIFOffset",514:"JpegIFByteCount",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite"},u=i.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function s(e){return!!e.exifdata}function d(e,t){function a(a){var r=f(a);e.exifdata=r||{};var c=function(e){var t=new DataView(e);n;if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;var a=2,i=e.byteLength,r=function(e,t){return 56===e.getUint8(t)&&66===e.getUint8(t+1)&&73===e.getUint8(t+2)&&77===e.getUint8(t+3)&&4===e.getUint8(t+4)&&4===e.getUint8(t+5)};for(;a<i;){if(r(t,a)){var c=t.getUint8(a+7);return c%2!==0&&(c+=1),0===c&&(c=4),p(e,a+8+c,t.getUint16(a+6+c))}a++}}(a);if(e.iptcdata=c||{},i.isXmpEnabled){var o=function(e){if(!("DOMParser"in self))return;var t=new DataView(e);n;if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;var a=2,i=e.byteLength,r=new DOMParser;for(;a<i-4;){if("http"==h(t,a,4)){var c=a-1,o=t.getUint16(a-2)-1,l=h(t,c,o),u=l.indexOf("xmpmeta>")+8,s=(l=l.substring(l.indexOf("<x:xmpmeta"),u)).indexOf("x:xmpmeta")+10;return l=l.slice(0,s)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+l.slice(s),E(r.parseFromString(l,"text/xml"))}a++}}(a);e.xmpdata=o||{}}t&&t.call(e)}if(e.src)if(/^data\:/i.test(e.src))a(function(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/im)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(e),a=n.length,i=new ArrayBuffer(a),r=new Uint8Array(i),c=0;c<a;c++)r[c]=n.charCodeAt(c);return i}(e.src));else if(/^blob\:/i.test(e.src)){(c=new FileReader).onload=function(e){a(e.target.result)},function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(e){200!=this.status&&0!==this.status||t(this.response)},n.send()}(e.src,(function(e){c.readAsArrayBuffer(e)}))}else{var r=new XMLHttpRequest;r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";a(r.response),r=null},r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(null)}else if(self.FileReader&&(e instanceof self.Blob||e instanceof self.File)){var c;(c=new FileReader).onload=function(e){a(e.target.result)},c.readAsArrayBuffer(e)}}function f(e){var t=new DataView(e);if(255!=t.getUint8(0)||216!=t.getUint8(1))return!1;for(var n=2,a=e.byteLength;n<a;){if(255!=t.getUint8(n))return!1;if(225==t.getUint8(n+1))return j(t,n+4,t.getUint16(n+2));n+=2+t.getUint16(n+2)}}var m={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function p(e,t,n){for(var a,i,r,c,o=new DataView(e),l={},u=t;u<t+n;)28===o.getUint8(u)&&2===o.getUint8(u+1)&&(c=o.getUint8(u+2))in m&&((r=o.getInt16(u+3))+5,i=m[c],a=h(o,u+5,r),l.hasOwnProperty(i)?l[i]instanceof Array?l[i].push(a):l[i]=[l[i],a]:l[i]=a),u++;return l}function g(e,t,n,a,i){var r,c,o=e.getUint16(n,!i),l={};for(c=0;c<o;c++)r=n+12*c+2,l[a[e.getUint16(r,!i)]]=b(e,r,t,n,i);return l}function b(e,t,n,a,i){var r,c,o,l,u,s,d=e.getUint16(t+2,!i),f=e.getUint32(t+4,!i),m=e.getUint32(t+8,!i)+n;switch(d){case 1:case 7:if(1==f)return e.getUint8(t+8,!i);for(r=f>4?m:t+8,c=[],l=0;l<f;l++)c[l]=e.getUint8(r+l);return c;case 2:return h(e,r=f>4?m:t+8,f-1);case 3:if(1==f)return e.getUint16(t+8,!i);for(r=f>2?m:t+8,c=[],l=0;l<f;l++)c[l]=e.getUint16(r+2*l,!i);return c;case 4:if(1==f)return e.getUint32(t+8,!i);for(c=[],l=0;l<f;l++)c[l]=e.getUint32(m+4*l,!i);return c;case 5:if(1==f)return u=e.getUint32(m,!i),s=e.getUint32(m+4,!i),(o=new Number(u/s)).numerator=u,o.denominator=s,o;for(c=[],l=0;l<f;l++)u=e.getUint32(m+8*l,!i),s=e.getUint32(m+4+8*l,!i),c[l]=new Number(u/s),c[l].numerator=u,c[l].denominator=s;return c;case 9:if(1==f)return e.getInt32(t+8,!i);for(c=[],l=0;l<f;l++)c[l]=e.getInt32(m+4*l,!i);return c;case 10:if(1==f)return e.getInt32(m,!i)/e.getInt32(m+4,!i);for(c=[],l=0;l<f;l++)c[l]=e.getInt32(m+8*l,!i)/e.getInt32(m+4+8*l,!i);return c}}function h(e,t,n){for(var a="",i=t;i<t+n;i++)a+=String.fromCharCode(e.getUint8(i));return a}function j(e,t){if("Exif"!=h(e,t,4))return!1;var n,a,i,s,d,f=t+6;if(18761==e.getUint16(f))n=!1;else{if(19789!=e.getUint16(f))return!1;n=!0}if(42!=e.getUint16(f+2,!n))return!1;var m=e.getUint32(f+4,!n);if(m<8)return!1;if((a=g(e,f,f+m,c,n)).ExifIFDPointer)for(i in s=g(e,f,f+a.ExifIFDPointer,r,n)){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":s[i]=u[i][s[i]];break;case"ExifVersion":case"FlashpixVersion":s[i]=String.fromCharCode(s[i][0],s[i][1],s[i][2],s[i][3]);break;case"ComponentsConfiguration":s[i]=u.Components[s[i][0]]+u.Components[s[i][1]]+u.Components[s[i][2]]+u.Components[s[i][3]]}a[i]=s[i]}if(a.GPSInfoIFDPointer)for(i in d=g(e,f,f+a.GPSInfoIFDPointer,o,n)){switch(i){case"GPSVersionID":d[i]=d[i][0]+"."+d[i][1]+"."+d[i][2]+"."+d[i][3]}a[i]=d[i]}return a.thumbnail=function(e,t,n,a){var i=function(e,t,n){var a=e.getUint16(t,!n);return e.getUint32(t+2+12*a,!n)}(e,t+n,a);if(!i)return{};if(i>e.byteLength)return{};var r=g(e,t,t+i,l,a);if(r.Compression)switch(r.Compression){case 6:if(r.JpegIFOffset&&r.JpegIFByteCount){var c=t+r.JpegIFOffset,o=r.JpegIFByteCount;r.blob=new Blob([new Uint8Array(e.buffer,c,o)],{type:"image/jpeg"})}}else r.PhotometricInterpretation;return r}(e,f,m,n),a}function x(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var a=e.attributes.item(n);t["@attributes"][a.nodeName]=a.nodeValue}}}else if(3==e.nodeType)return e.nodeValue;if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var r=e.childNodes.item(i),c=r.nodeName;if(null==t[c])t[c]=x(r);else{if(null==t[c].push){var o=t[c];t[c]=[],t[c].push(o)}t[c].push(x(r))}}return t}function E(e){try{var t={};if(e.children.length>0)for(var n=0;n<e.children.length;n++){var a=e.children.item(n),i=a.attributes;for(var r in i){var c=i[r],o=c.nodeName,l=c.nodeValue;void 0!==o&&(t[o]=l)}var u=a.nodeName;if("undefined"==typeof t[u])t[u]=x(a);else{if("undefined"==typeof t[u].push){var s=t[u];t[u]=[],t[u].push(s)}t[u].push(x(a))}}else t=e.textContent;return t}catch(d){}}i.enableXmp=function(){i.isXmpEnabled=!0},i.disableXmp=function(){i.isXmpEnabled=!1},i.getData=function(e,t){return!((self.Image&&e instanceof self.Image||self.HTMLImageElement&&e instanceof self.HTMLImageElement)&&!e.complete)&&(s(e)?t&&t.call(e):d(e,t),!0)},i.getTag=function(e,t){if(s(e))return e.exifdata[t]},i.getIptcTag=function(e,t){if(s(e))return e.iptcdata[t]},i.getAllTags=function(e){if(!s(e))return{};var t,n=e.exifdata,a={};for(t in n)n.hasOwnProperty(t)&&(a[t]=n[t]);return a},i.getAllIptcTags=function(e){if(!s(e))return{};var t,n=e.iptcdata,a={};for(t in n)n.hasOwnProperty(t)&&(a[t]=n[t]);return a},i.pretty=function(e){if(!s(e))return"";var t,n=e.exifdata,a="";for(t in n)n.hasOwnProperty(t)&&("object"==typeof n[t]?n[t]instanceof Number?a+=t+" : "+n[t]+" ["+n[t].numerator+"/"+n[t].denominator+"]\r\n":a+=t+" : ["+n[t].length+" values]\r\n":a+=t+" : "+n[t]+"\r\n");return a},i.readFromBinaryFile=function(e){return f(e)},void 0===(a=function(){return i}.apply(t,[]))||(e.exports=a)}).call(this)},1207:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return vn}));var a,i,r,c,o,l,u=n(13),s=n(0),d=n.n(s),f=n(1190),m=n(4),p=n(6),g=n(68),b=g.theme["brand-primary"],h=p.b.div(a||(a=Object(m.a)(["\n  background-color: #fafafa;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding-bottom: constant(safe-area-inset-bottom);\n  padding-bottom: env(safe-area-inset-bottom);\n"]))),j=p.b.div(i||(i=Object(m.a)(["\n  width: 100%;\n  height: 110px;\n  padding-bottom: constant(safe-area-inset-bottom);\n  padding-bottom: env(safe-area-inset-bottom);\n"]))),x=p.b.div(r||(r=Object(m.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 28px 96px 0;\n"]))),E=p.b.div(c||(c=Object(m.a)(["\n  color: #bfbfbf;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow: hidden;\n  &.active {\n    color: ",";\n  }\n"])),b),v=p.b.span(o||(o=Object(m.a)(["\n  display: inline-block;\n  width: 48px;\n  height: 48px;\n  font-size: 40px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n"]))),y=p.b.div(l||(l=Object(m.a)(["\n  font-size: 22px;\n  height: 40px;\n  line-height: 40px;\n"]))),O=function(e){var t=e.handelClick,n=e.type;return d.a.createElement(d.a.Fragment,null,d.a.createElement(h,null,d.a.createElement(x,null,d.a.createElement(E,{onClick:function(){return t("library")},className:"library"===n?"active":""},d.a.createElement(v,{className:"iconfont icon-library"}),d.a.createElement(y,null,"\u9898\u5e93")),d.a.createElement(E,{onClick:function(){return t("find")},className:"find"===n?"active":""},d.a.createElement(v,{className:"iconfont icon-find"}),d.a.createElement(y,null,"\u53d1\u73b0")),d.a.createElement(E,{onClick:function(){return t("user-center")},className:"user-center"===n?"active":""},d.a.createElement(v,{className:"iconfont icon-my"}),d.a.createElement(y,null,"\u6211\u7684")))))},M=(n(404),n(1150)),D=n.n(M),N=(n(241),n(87)),w=n.n(N),I=(n(403),n(243)),S=n.n(I),k=(n(1176),n(1177)),C=n.n(k),T=(n(125),n(74)),A=n.n(T),P=(n(1155),n(1156)),z=n.n(P),L=n(1151),U=n(105),F=n(1197),R=n(1198),G=n(161),B=n(1148),Q=n(242),Y=n(1157),H=n(19);var W,V,J,X,Z,_,q,K,$,ee,te,ne,ae,ie,re,ce,oe,le,ue,se,de,fe,me,pe,ge,be,he,je,xe,Ee,ve,ye,Oe,Me,De,Ne,we,Ie,Se,ke,Ce,Te,Ae,Pe,ze,Le,Ue,Fe,Re,Ge,Be,Qe,Ye,He,We=n(1154),Ve=function(){var e=Object(s.useState)([{value:"",label:""}]),t=Object(u.a)(e,2),n=t[0],a=t[1],i=Object(F.a)(G.x).data,r=Object(R.a)(G.m),c=Object(u.a)(r,2),o=c[0],l=c[1],m=l.data,p=l.loading,g=Object(R.a)(G.o),b=Object(u.a)(g,2),h=b[0],x=b[1],E=x.data,v=x.loading,y=E||{},O=y.subjectTags,M=y.getUserTagAbilities,N=y.subjectExams,I=void 0===N?[]:N,k=y.getExamHistoryBySubject,T=void 0===k?[]:k,P=Object(s.useMemo)((function(){return function(e){var t={},n=[];return null===e||void 0===e||e.forEach((function(e){var n=e.sourceType;t[n]?t[n].push(e):t[n]=[Object(H.a)({},e)]})),Object.keys(t).forEach((function(e){n.push({sourceType:e,children:t[e]})})),n}(I)}),[I]),W=Object(s.useMemo)((function(){return function(e){var t={};return null===e||void 0===e||e.forEach((function(e){var n=(e||{}).examId;t[n]=e})),t}(T)}),[T]),V=Object(s.useContext)(U.a),J=V.state,X=V.dispatch,Z=J.tabType,_=J.ejuSubjectValue,q=Object(f.e)(),K=function(e){null===X||void 0===X||X({type:"setTabType",tabType:e})},$=Object(s.useMemo)((function(){switch(Z){case"quick":return"gaokao";case"topic":case"exam":return"center";default:return""}}),[Z]),ee=Object(s.useCallback)((function(e){var t=0,n=[];null===M||void 0===M||M.forEach((function(n){var a=n.tagId,i=n.abilityValue;e===a&&(t=Math.round(Number(i)/20))}));for(var a=1;a<=5;a+=1)5===t?n.push(d.a.createElement(Q.H,{key:a,className:"all iconfont icon-star1"})):a<=t?n.push(d.a.createElement(Q.H,{key:a,className:"active iconfont icon-star1"})):n.push(d.a.createElement(Q.H,{key:a}));return d.a.createElement(d.a.Fragment,null,n)}),[M]),te=Object(s.useCallback)((function(){var e;return null===O||void 0===O||null===(e=O.tags)||void 0===e?void 0:e.map((function(e){var t=e._id,n=e.name,a=e.children,i=void 0===a?[]:a;return d.a.createElement("div",{key:t},d.a.createElement(z.a,null,d.a.createElement(z.a.Header,{title:n}),d.a.createElement(z.a.Body,null,d.a.createElement(C.a,null,i.map((function(e){var t=e.name,n=e._id,a=e.children,i=void 0===a?[]:a;return d.a.createElement(C.a.Panel,{header:t,key:n,style:{marginBottom:"10px"}},d.a.createElement(Q.b,null,i.map((function(e){var t=e.name,n=e._id,a=ee(n);return d.a.createElement(Q.c,{key:n},d.a.createElement(Q.f,null,t),d.a.createElement(Q.a,null,d.a.createElement(Q.d,null,d.a.createElement(Q.e,null,d.a.createElement(Q.J,null,"\u83d3\u661f\u503c"),d.a.createElement(Q.I,null,a))),d.a.createElement(Q.g,null,d.a.createElement(A.a,{type:"primary",size:"small",inline:!0,onClick:function(){return q.push("/quick?subject=".concat((null===O||void 0===O?void 0:O.subject)||"","&tagId=").concat(n||"","&tag=").concat(t,"&sourceType=").concat($))}},"\u5f00\u59cb\u7ec3\u4e60"))))}))))}))))),d.a.createElement(S.a,{size:"lg"}))}))}),[q,ee,null===O||void 0===O?void 0:O.subject,null===O||void 0===O?void 0:O.tags,$]),ne=Object(s.useCallback)((function(e){null===X||void 0===X||X({type:"setExam",exam:e}),q.push("/exam-info")}),[X,q]),ae=Object(s.useCallback)((function(){return d.a.createElement(C.a,null,P.map((function(e){return d.a.createElement(C.a.Panel,{header:B.e[e.sourceType],style:{marginBottom:"20px"},key:e.sourceType},d.a.createElement(Q.b,null,e.children.map((function(e){var t,n=e.date;return d.a.createElement(Q.c,{key:e._id},d.a.createElement(Q.f,null,Object(We.a)(n)),d.a.createElement(Q.a,null,d.a.createElement(Q.d,null,d.a.createElement(Q.e,null,d.a.createElement(Q.J,null,"\u4e2a\u4eba\u5386\u53f2\u6700\u9ad8\u5206\uff1a",null===(t=W[e._id])||void 0===t?void 0:t.bestPoints))),d.a.createElement(Q.g,null,d.a.createElement(A.a,{type:"primary",size:"small",inline:!0,onClick:function(){return ne({exam:e,examHis:W[e._id]})}},"\u5f00\u59cb\u7ec3\u4e60"))))}))))})))}),[P,W,ne]),ie=Object(s.useCallback)((function(){var e;return null===O||void 0===O||null===(e=O.tags)||void 0===e?void 0:e.map((function(e){var t=e._id,n=e.name,a=ee(t);return d.a.createElement(Q.c,{key:t},d.a.createElement(Q.f,null,n),d.a.createElement(Q.a,null,d.a.createElement(Q.d,null,d.a.createElement(Q.e,null,d.a.createElement(Q.J,null,"\u83d3\u661f\u503c"),d.a.createElement(Q.I,null,a))),d.a.createElement(Q.g,null,d.a.createElement(A.a,{type:"primary",size:"small",inline:!0,onClick:function(){return q.push("/topic?subject=".concat((null===O||void 0===O?void 0:O.subject)||"","&tagId=").concat(t||"","&tag=").concat(n))}},"\u5f00\u59cb\u7ec3\u4e60"))))}))}),[q,ee,null===O||void 0===O?void 0:O.subject,null===O||void 0===O?void 0:O.tags]);return Object(s.useEffect)((function(){o({variables:{sourceType:$}})}),[o,$]),Object(s.useEffect)((function(){var e=null===_||void 0===_?void 0:_[0];e&&h({variables:{sourceType:$,subject:e}})}),[_,h,$]),Object(s.useEffect)((function(){var e=(m||{}).typeSubjects;e&&a(Object(Y.a)(e,B.m))}),[m]),Object(s.useEffect)((function(){(p||v)&&w.a.loading("\u52a0\u8f7d\u4e2d",0),!p&&!v&&w.a.hide()}),[p,v]),Object(s.useEffect)((function(){var e=null===i||void 0===i?void 0:i.getUserInfo;e&&(null===X||void 0===X||X({type:"setUserInfo",userInfo:e}),e.avatar&&((new Image).src=e.avatar))}),[X,null===i||void 0===i?void 0:i.getUserInfo]),d.a.createElement(Q.o,null,d.a.createElement(Q.K,null,d.a.createElement(Q.L,{className:"quick"===Z?"active":"",onClick:function(){return K("quick")}},"\u667a\u80fd\u901f\u7b54"),d.a.createElement(Q.L,{className:"topic"===Z?"active":"",onClick:function(){return K("topic")}},"\u4e13\u9898\u6a21\u62df"),d.a.createElement(Q.L,{className:"exam"===Z?"active":"",onClick:function(){return K("exam")}},"\u5957\u5377\u6a21\u62df")),d.a.createElement(S.a,{size:"xl"}),d.a.createElement(D.a,{data:n,cols:1,value:_,onOk:function(e){return function(e){null===X||void 0===X||X({type:"setEjuSubjectValue",ejuSubjectValue:e})}(e)}},d.a.createElement(L.a,{placeholder:"\u8bf7\u9009\u62e9\u8003\u5b66\u79d1\u76ee"})),"quick"===Z&&te(),"topic"===Z&&ie(),"exam"===Z&&ae(),d.a.createElement(j,null))},Je=n(42),Xe=n.p+"assets/images/avatar-defaulta4605a43.jpg",Ze=g.theme["brand-primary"],_e=p.b.div(W||(W=Object(m.a)([""]))),qe=p.b.div(V||(V=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n  height: 128px;\n"]))),Ke=p.b.div(J||(J=Object(m.a)(["\n  width: 190px;\n  height: 50px;\n  border-radius: 60px;\n  font-size: 32px;\n  letter-spacing: 0.4px;\n  font-weight: bold;\n  color: #7f7f7f;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  &.active {\n    color: #fff;\n    background-color: ",";\n  }\n"])),Ze),$e=p.b.div(X||(X=Object(m.a)(["\n  background: ",";\n  border-radius: 0px 0px 30px 30px;\n  padding: 20px 74px;\n  position: relative;\n  z-index: 1;\n"])),Ze),et=p.b.div(Z||(Z=Object(m.a)(["\n  height: 70px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),tt=p.b.div(_||(_=Object(m.a)(["\n  min-width: 124px;\n  color: #fff;\n  flex: 1;\n"]))),nt=p.b.span(q||(q=Object(m.a)(["\n  display: inline-flex;\n  width: 36px;\n  height: 34px;\n  background: url(",") no-repeat center;\n  margin-right: 16px;\n  background-size: contain;\n  align-items: center;\n  justify-content: center;\n  &:last-child {\n    margin-right: 0;\n  }\n  &.icon-star1 {\n    background-image: none;\n    color: #ffcc00;\n  }\n"])),"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik03LjMwNzI1IDQuMjE5ODZDNy45NDkzMiAyLjYxOTE4IDguMjcwMzYgMS44MTg4MyA4Ljc5MTkzIDEuNzA3OTFDOC45MjkwOCAxLjY3ODc0IDkuMDcwODMgMS42Nzg3NCA5LjIwNzk3IDEuNzA3OTFDOS43Mjk1NSAxLjgxODgzIDEwLjA1MDYgMi42MTkxOCAxMC42OTI3IDQuMjE5ODZDMTEuMDU3OCA1LjEzMDE0IDExLjI0MDQgNS41ODUyOCAxMS41ODIgNS44OTQ4NUMxMS42Nzc4IDUuOTgxNjggMTEuNzgxOCA2LjA1OTAxIDExLjg5MjYgNi4xMjU3NkMxMi4yODc0IDYuMzYzNzQgMTIuNzgwMyA2LjQwNzg4IDEzLjc2NjEgNi40OTYxN0MxNS40MzQ4IDYuNjQ1NjIgMTYuMjY5MiA2LjcyMDM0IDE2LjUyNCA3LjE5NjA5QzE2LjU3NjggNy4yOTQ2MiAxNi42MTI3IDcuNDAxMyAxNi42MzAyIDcuNTExNjlDMTYuNzE0NiA4LjA0NDcyIDE2LjEwMTIgOC42MDI3OCAxNC44NzQ0IDkuNzE4OUwxNC41MzM4IDEwLjAyODhDMTMuOTYwMiAxMC41NTA2IDEzLjY3MzUgMTAuODExNSAxMy41MDc2IDExLjEzNzJDMTMuNDA4MSAxMS4zMzI1IDEzLjM0MTQgMTEuNTQyOCAxMy4zMTAxIDExLjc1OThDMTMuMjU4IDEyLjEyMTUgMTMuMzQyIDEyLjUgMTMuNTA5OSAxMy4yNTY5TDEzLjU2OTkgMTMuNTI3NEMxMy44NzExIDE0Ljg4NDkgMTQuMDIxNyAxNS41NjM3IDEzLjgzMzcgMTUuODk3M0MxMy42NjQ5IDE2LjE5NyAxMy4zNTM4IDE2LjM4ODkgMTMuMDEwMiAxNi40MDUzQzEyLjYyNzcgMTYuNDIzNiAxMi4wODg3IDE1Ljk4NDQgMTEuMDEwNyAxNS4xMDZDMTAuMzAwNSAxNC41MjczIDkuOTQ1NDIgMTQuMjM3OSA5LjU1MTIxIDE0LjEyNDlDOS4xOTA5NyAxNC4wMjE2IDguODA4OTQgMTQuMDIxNiA4LjQ0ODY5IDE0LjEyNDlDOC4wNTQ0OCAxNC4yMzc5IDcuNjk5MzggMTQuNTI3MyA2Ljk4OTE3IDE1LjEwNkM1LjkxMTE5IDE1Ljk4NDQgNS4zNzIyMSAxNi40MjM2IDQuOTg5NjggMTYuNDA1M0M0LjY0NjA5IDE2LjM4ODkgNC4zMzUwNCAxNi4xOTcgNC4xNjYxNyAxNS44OTczQzMuOTc4MTggMTUuNTYzNyA0LjEyODc4IDE0Ljg4NDkgNC40Mjk5NyAxMy41Mjc0TDQuNDg5OTggMTMuMjU2OUM0LjY1Nzk0IDEyLjUgNC43NDE5MSAxMi4xMjE1IDQuNjg5OCAxMS43NTk4QzQuNjU4NTQgMTEuNTQyOCA0LjU5MTgyIDExLjMzMjUgNC40OTIzMiAxMS4xMzcyQzQuMzI2NDUgMTAuODExNSA0LjAzOTY4IDEwLjU1MDYgMy40NjYxMyAxMC4wMjg4TDMuMTI1NDYgOS43MTg5QzEuODk4NjcgOC42MDI3OCAxLjI4NTI3IDguMDQ0NzIgMS4zNjk3NSA3LjUxMTY5QzEuMzg3MjQgNy40MDEzIDEuNDIzMTIgNy4yOTQ2MiAxLjQ3NTg5IDcuMTk2MDhDMS43MzA2OSA2LjcyMDM0IDIuNTY1MDcgNi42NDU2MiA0LjIzMzg0IDYuNDk2MTdDNS4yMTk2MiA2LjQwNzg4IDUuNzEyNTEgNi4zNjM3NCA2LjEwNzM1IDYuMTI1NzZDNi4yMTgxIDYuMDU5MDEgNi4zMjIxMSA1Ljk4MTY4IDYuNDE3OTMgNS44OTQ4NUM2Ljc1OTU0IDUuNTg1MjggNi45NDIxMSA1LjEzMDE0IDcuMzA3MjUgNC4yMTk4NloiIGZpbGw9IiM3M0MwOEEiIHN0cm9rZT0iI0ZGQ0MwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQo8L3N2Zz4NCg=="),at=(p.b.div(K||(K=Object(m.a)(["\n  padding: 20px 40px;\n"]))),p.b.div($||($=Object(m.a)(["\n  padding-top: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: space-around;\n"])))),it=p.b.div(ee||(ee=Object(m.a)(["\n  width: 50%;\n  flex-shrink: 0;\n"]))),rt=p.b.table(te||(te=Object(m.a)(["\n  width: 100%;\n"]))),ct=p.b.tr(ne||(ne=Object(m.a)(["\n  height: 50px;\n"]))),ot=p.b.td(ae||(ae=Object(m.a)(["\n  vertical-align: middle;\n  font-size: 28px;\n  text-align: center;\n"]))),lt=p.b.th(ie||(ie=Object(m.a)(["\n  font-size: 32px;\n  color: ",";\n"])),Ze),ut=p.b.div(re||(re=Object(m.a)(["\n  height: calc(100vh - 395px);\n  overflow-y: auto;\n"]))),st=p.b.div(ce||(ce=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px 30px;\n"]))),dt=p.b.button(oe||(oe=Object(m.a)(["\n  background: #f8fffc;\n  border: 1px solid ",";\n  box-sizing: border-box;\n  border-radius: 16px;\n  flex-shrink: 0;\n  width: 166px;\n  height: 74px;\n  color: ",";\n  font-size: 32px;\n"])),Ze,Ze),ft=p.b.div(le||(le=Object(m.a)(["\n  font-weight: bold;\n  font-size: 40px;\n  letter-spacing: 0.3px;\n  color: ",";\n"])),Ze),mt=p.b.div(ue||(ue=Object(m.a)(["\n  padding-right: 30px;\n"]))),pt=p.b.div(se||(se=Object(m.a)(["\n  height: calc(100vh - 308px);\n  overflow-y: auto;\n"]))),gt=p.b.div(de||(de=Object(m.a)(["\n  background-color: #f5f5f5;\n  position: absolute;\n  top: 128px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]))),bt=p.b.div(fe||(fe=Object(m.a)(["\n  position: absolute;\n  top: 180px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]))),ht=p.b.div(me||(me=Object(m.a)(["\n  height: 126px;\n  padding: 34px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),jt=p.b.div(pe||(pe=Object(m.a)(["\n  width: 64px;\n  flex-shrink: 0;\n  color: #bdbdbd;\n  font-size: 32px;\n  text-align: center;\n"]))),xt=p.b.div(ge||(ge=Object(m.a)(["\n  width: 450px;\n  padding-left: ",";\n  color: #bdbdbd;\n  font-size: 32px;\n"])),(function(e){return e.pl||"0px"})),Et=p.b.div(be||(be=Object(m.a)(["\n  display: inline-flex;\n  width: 160px;\n  flex-shrink: 0;\n  font-size: 32px;\n  justify-content: flex-end;\n"]))),vt=p.b.div(he||(he=Object(m.a)(["\n  position: absolute;\n  top: 126px;\n  bottom: 0px;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n  background-color: #fff;\n"]))),yt=p.b.div(je||(je=Object(m.a)(["\n  height: 144px;\n  display: flex;\n  align-items: center;\n  padding: 0 34px;\n  &.my {\n    background-color: #d7efe0;\n  }\n"]))),Ot=p.b.div(xe||(xe=Object(m.a)(["\n  display: inline-flex;\n  align-items: center;\n  color: #000;\n  width: 100%;\n"]))),Mt=Object(p.b)(Ot)(Ee||(Ee=Object(m.a)([""]))),Dt=p.b.div(ve||(ve=Object(m.a)(["\n  display: inline-block;\n  width: 84px;\n  height: 84px;\n  border-radius: 50%;\n  background-image: url(",");\n  background-size: cover;\n  background-position: center;\n  margin-right: 24px;\n"])),(function(e){return e.img||""})),Nt=p.b.div(ye||(ye=Object(m.a)(["\n  width: 340px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  height: 84px;\n  line-height: 84px;\n"]))),wt=p.b.div(Oe||(Oe=Object(m.a)(["\n  display: inline-flex;\n  align-items: center;\n  color: #bfbfbf;\n"]))),It=p.b.span(Me||(Me=Object(m.a)(["\n  display: inline-flex;\n  width: 46px;\n  height: 45px;\n  font-size: 46px;\n  margin-left: 46px;\n  align-items: center;\n  justify-content: center;\n  &.icon-up {\n    color: ",";\n  }\n  &.icon-down {\n    color: #f5222d;\n  }\n  &.icon-no-change:before {\n    display: inline-block;\n    width: 40px;\n    height: 6px;\n    background-color: #bcbcbc;\n  }\n"])),Ze),St=p.b.div(De||(De=Object(m.a)(["\n  width: 248px;\n  height: 74px;\n  display: inline-flex;\n  align-items: center;\n  padding: 0 48px 0 28px;\n  justify-content: space-between;\n  border-radius: 16px;\n  border: 1px solid #e8e8e8;\n  background: #fff;\n"]))),kt=p.b.span(Ne||(Ne=Object(m.a)(["\n  width: 40px;\n  height: 25px;\n  display: inline-block;\n  font-size: 25px;\n  color: ",";\n"])),Ze),Ct=function(e){var t=e.subjectArr,n=e.rankNum,a=e.subjectPointsArr,i=Object(R.a)(G.e,{fetchPolicy:"cache-and-network"}),r=Object(u.a)(i,2),c=r[0],o=r[1].data,l=Object(s.useMemo)((function(){return(null===o||void 0===o?void 0:o.findRank)||[]}),[null===o||void 0===o?void 0:o.findRank]),f=Object(s.useState)([""]),m=Object(u.a)(f,2),p=m[0],g=m[1],b=Object(s.useState)([]),h=Object(u.a)(b,2),x=h[0],E=h[1],v=Object(s.useState)(0),y=Object(u.a)(v,2),O=y[0],M=y[1],N=Object(s.useCallback)((function(e){e?a.forEach((function(t){t.subject===e&&M(t.subjectRankThisWeek)})):M(n)}),[n,a]);return Object(s.useEffect)((function(){if((null===t||void 0===t?void 0:t.length)>0){var e=[{value:"",label:"\u603b\u5206"}].concat(Object(Je.a)(t));E(e)}}),[t]),Object(s.useEffect)((function(){var e={};p[0]&&(e={subject:p[0]}),N(p[0]),c({variables:e})}),[c,N,p]),d.a.createElement(gt,null,d.a.createElement(bt,null,d.a.createElement(ht,null,d.a.createElement(jt,null,"\u6392\u540d"),d.a.createElement(xt,{pl:"100px"},"\u6635\u79f0"),d.a.createElement(Et,null,d.a.createElement(D.a,{data:x,cols:1,value:p,onOk:function(e){return g(e)}},d.a.createElement(St,null,d.a.createElement("span",null,function(){var e="";return x.forEach((function(t){t.value===p[0]&&(e=t.label)})),e}()),d.a.createElement(kt,{className:"iconfont icon-down-arrow"}))))),d.a.createElement(vt,null,function(){var e;return null===l||void 0===l||null===(e=l.rankSet)||void 0===e?void 0:e.map((function(e,t){var n=e.avatar,a=e.rank,i=e.userName,r=e.point,c=e.isHigher;return d.a.createElement(yt,{className:t+1===O?"my":"",key:a},d.a.createElement(jt,null,d.a.createElement(Mt,null,a)),d.a.createElement(xt,{pl:"12px"},d.a.createElement(Ot,null,d.a.createElement(Dt,{img:n||Xe}),d.a.createElement(Nt,null,i))),d.a.createElement(Et,null,d.a.createElement(wt,null,r,c>0&&d.a.createElement(It,{className:"iconfont icon-up"}),0===c&&d.a.createElement(It,{className:"iconfont icon-no-change"}),c<0&&d.a.createElement(It,{className:"iconfont icon-down"}))))}))}(),d.a.createElement(j,null))))},Tt=(n(1178),n(1179)),At=n.n(Tt),Pt=(n(1165),n(1166)),zt=n.n(Pt),Lt=n(1158),Ut=n.n(Lt),Ft=function(e,t){var n="";if("math"===t||"maths1"===t||"maths2"===t)switch(!0){case e<100:n="D";break;case e>=100&&e<120:n="C";break;case e>=120&&e<150:n="B";break;case e>=150&&e<180:n="A";break;case e>=180:n="S"}if("physics"===t||"chemistry"===t)switch(!0){case e<55:n="D";break;case e>=55&&e<65:n="C";break;case e>=65&&e<75:n="B";break;case e>=75&&e<85:n="A";break;case e>=85:n="S"}return n},Rt=g.theme["brand-primary"],Gt=function(e){var t=e.subjectPointsArr;Object(s.useEffect)((function(){if(t){var e=t.map((function(e){var t=e.subject,n=e.subjectPoint;return{item:t,score:Ft(n,t)}})),n=window.screen.width,a=new Ut.a.Chart({id:"radarChart",pixelRatio:window.devicePixelRatio,padding:"auto",width:n,height:.8*n});a.coord("polar"),a.source(e,{score:{type:"cat",values:["D","C","B","A","S"]}}),a.axis("score",{label:function(e,t,n){return{top:!0,text:e}},grid:function(e){return{top:!0,text:e}},line:{top:!1}}),a.axis("item",{label:function(e,t,n){return{top:!0,text:B.m[e]}}}),a.area().position("item*score").color("".concat(Rt)).animate({appear:{animation:"groupWaveIn"}}),a.line().position("item*score").color("".concat(Rt)).animate({appear:{animation:"groupWaveIn"}}),a.point().position("item*score").color("".concat(Rt)).style({stroke:"#fff",lineWidth:1}).animate({appear:{delay:300}}),a.legend({custom:!0,items:[{name:"\u80fd\u529b\u73b0\u72b6",marker:"circle",fill:Rt}]}),a.render()}}),[t]);return d.a.createElement(ut,null,d.a.createElement("canvas",{id:"radarChart",width:"300",height:"300"}),d.a.createElement(zt.a,{size:"lg"},d.a.createElement(S.a,{size:"lg"}),d.a.createElement(z.a,null,d.a.createElement(z.a.Header,{title:"\u6570\u636e\u660e\u7ec6"}),d.a.createElement(z.a.Body,null,function(){var e=[];return null===t||void 0===t||t.forEach((function(t){var n=t.subject,a=t.subjectPoint;e.push(d.a.createElement(ct,{key:n},d.a.createElement(ot,null,B.m[n]),d.a.createElement(ot,null,a),d.a.createElement(ot,null,Ft(a,n))))})),d.a.createElement(rt,null,d.a.createElement("tbody",null,d.a.createElement(ct,null,d.a.createElement(lt,null,"\u79d1\u76ee"),d.a.createElement(lt,null,"\u9884\u6d4b\u5206\u6570"),d.a.createElement(lt,null,"\u8bc4\u7ea7")),e))}())),d.a.createElement(S.a,{size:"lg"})),d.a.createElement(j,null))},Bt=n(1167),Qt=function(e){var t,n=Object(s.useState)([]),a=Object(u.a)(n,2),i=a[0],r=a[1],c=Object(s.useState)([""]),o=Object(u.a)(c,2),l=o[0],f=o[1],m=Object(s.useState)(["maths1"]),p=Object(u.a)(m,2),g=p[0],b=p[1],h=Object(R.a)(G.p),j=Object(u.a)(h,2),x=j[0],E=j[1],v=E.data,y=E.loading,O=Object(R.a)(G.g,{fetchPolicy:"cache-and-network",onCompleted:function(e){return k(e)}}),M=Object(u.a)(O,1)[0],N=Object(s.useRef)([]),I=Object(s.useRef)(),S=e.subjectArr,k=function(e){var t=(e||{}).findAbilityTag,n=[];null===t||void 0===t||t.forEach((function(e){for(var t=e.abilityValues,a=e.tagName,i=1;i<=6;i+=1)n.push({type:a,date:i,value:(null===t||void 0===t?void 0:t[i])?Math.round(t[i]/20):0})})),C(n)};Object(s.useEffect)((function(){x({variables:{subject:g[0],sourceType:"center"}})}),[x,g]),Object(s.useEffect)((function(){var e,t,n=(null===v||void 0===v||null===(e=v.subjectTags)||void 0===e?void 0:e.tags)||[],a=n.map((function(e){return{label:e.name,value:e._id}}))||[];f([(null===a||void 0===a||null===(t=a[0])||void 0===t?void 0:t.value)||""]),r(a),N.current=n}),[null===v||void 0===v||null===(t=v.subjectTags)||void 0===t?void 0:t.tags]),Object(s.useEffect)((function(){y?w.a.loading("\u52a0\u8f7d\u4e2d",0):w.a.hide()}),[y]),Object(s.useEffect)((function(){var e=null===l||void 0===l?void 0:l[0];e&&M({variables:{tagId:e}})}),[M,l]);var C=function(e){var t=window.screen.width,n=new Ut.a.Chart({id:"columnarChart",pixelRatio:window.devicePixelRatio,padding:"auto",width:t,height:.8*t,appendPadding:[15,15,15,20]});I.current=n,n.source(e),n.scale("date",{ticks:["1","2","3","4","5","6"]}),n.scale("value",{ticks:["0","1","2","3","4","5"]}),n.axis("date",{label:function(e,t,n){return{text:"\u7b2c".concat(e,"\u6708")}}}),n.axis("value",{label:function(e,t,n){return{text:"".concat(e,"\u661f")}}}),n.line().position("date*value").color("type"),n.point().position("date*value").color("type"),n.render()};return d.a.createElement(d.a.Fragment,null,d.a.createElement(at,null,d.a.createElement(it,null,d.a.createElement(D.a,{data:S,cols:1,onOk:function(e){b(e)},value:g},d.a.createElement(L.a,{placeholder:"\u8bf7\u9009\u62e9\u79d1\u76ee",value:B.m[g[0]]}))),d.a.createElement(it,null,d.a.createElement(D.a,{data:i,cols:1,onOk:function(e){f(e)},value:l},d.a.createElement(L.a,{placeholder:"\u8bf7\u9009\u62e9\u77e5\u8bc6\u70b9",value:Object(Bt.a)(i,l[0]||"")})))),d.a.createElement("canvas",{id:"columnarChart"}))},Yt=function(e){var t=e.subjectArr,n=e.subjectPointsArr,a=e.handleStrengthTabChang,i=e.strengthTab;return d.a.createElement(At.a,{tabs:[{title:"\u7efc\u5408\u96f7\u8fbe\u56fe",sub:"1"},{title:"\u5b66\u79d1/\u77e5\u8bc6\u70b9\u80fd\u529b\u5206\u6790",sub:"2"}],page:i,onChange:function(e,t){return function(e){a(e)}(t)}},d.a.createElement(Gt,{subjectPointsArr:n}),d.a.createElement(Qt,{subjectArr:t}))},Ht=n(1159),Wt=g.theme["brand-primary"],Vt=function(e){var t,n=Object(s.useState)([]),a=Object(u.a)(n,2),i=a[0],r=a[1],c=Object(s.useState)({}),o=Object(u.a)(c,2),l=o[0],f=o[1],m=Object(s.useState)([]),p=Object(u.a)(m,2),g=p[0],b=p[1],h=Object(s.useState)([]),x=Object(u.a)(h,2),E=x[0],v=x[1],y=Object(s.useState)([]),O=Object(u.a)(y,2),M=O[0],N=O[1],w=Object(s.useState)(0),I=Object(u.a)(w,2),k=I[0],C=I[1],T=Object(s.useState)({english:"",jap:0,jap_writing:0,math:0,physics:0,chemistry:0}),A=Object(u.a)(T,2),P=A[0],U=A[1],F=e.subjectPointsArr;Object(s.useEffect)((function(){if(F||P){var e=Object(H.a)({},P),t=[];null===F||void 0===F||F.forEach((function(e){var n=e.subject,a=e.subjectPoint;t.push({item:n,type:"my",score:Ft(a,n)})})),Object.keys(e).forEach((function(n){t.push({item:n,type:"you",score:"english"===n?e[n]:Ft(e[n],n)})}));var n=window.screen.width,a=new Ut.a.Chart({id:"predictChart",pixelRatio:window.devicePixelRatio,padding:30,width:n,height:.8*n,appendPadding:[15,15,15,20]});a.coord("polar"),a.source(t,{score:{type:"cat",values:["D","C","B","A","S"]}}),a.axis("score",{label:function(e,t,n){return{top:!0,text:e}},grid:function(e){return{top:!0,text:e}},line:{top:!1}}),a.axis("item",{label:function(e,t,n){return{top:!0,text:B.m[e]}}}),a.area().position("item*score").color("type",(function(e){return"my"===e?Wt:"#BFBFBF"})).animate({appear:{animation:"groupWaveIn"}}),a.line().position("item*score").color("type",(function(e){return"my"===e?Wt:"#BFBFBF"})).animate({appear:{animation:"groupWaveIn"}}),a.point().position("item*score").color("type",(function(e){return"my"===e?Wt:"#BFBFBF"})).style({stroke:"#fff",lineWidth:1}).animate({appear:{delay:300}}),a.legend({custom:!0,verticalAlign:"top",position:"left",items:[{name:"\u80fd\u529b\u73b0\u72b6",marker:"circle",fill:Wt},{name:"\u80fd\u529b\u76ee\u6807",marker:"circle",fill:"#BFBFBF"}]}),a.render()}}),[P,F]);return Object(s.useEffect)((function(){G.y.getSchool().then((function(e){f(e.data);var t=Object(Ht.a)(e.data);b(t)}))}),[]),d.a.createElement(pt,null,d.a.createElement(mt,null,d.a.createElement(S.a,{size:"lg"}),d.a.createElement(D.a,{data:g,cols:1,onOk:function(e){return function(e){var t=Object(Ht.b)(l[Number(e[0])].departments);v(t),r(e),N([])}(e)}},d.a.createElement(L.a,{placeholder:"\u9662\u6821",value:null===(t=l[Number(i[0])])||void 0===t?void 0:t.schoolName})),d.a.createElement(D.a,{data:E,cols:1,onOk:function(e){return N(e)}},d.a.createElement(L.a,{placeholder:"\u4e13\u4e1a",value:M[0]}))),d.a.createElement(st,null,d.a.createElement(ft,null,"\u5408\u683c\u6982\u7387:\uff08",(100*k).toFixed(2),"%\uff09"),d.a.createElement(dt,{onClick:function(){return function(){var e={school_id:Number(i[0]),math:200,ja:400,phy:90,che:100,jaw:50,department:M[0]};G.y.predict(e).then((function(e){204===e.code&&(C(e.data.probability),U(e.data.recommendPoint.ability))}))}()}},"\u70b9\u51fb\u9884\u6d4b")),d.a.createElement("canvas",{id:"predictChart",width:"300",height:"300"}),d.a.createElement(zt.a,{size:"lg"},d.a.createElement(S.a,{size:"lg"}),d.a.createElement(z.a,null,d.a.createElement(z.a.Header,{title:"\u6570\u636e\u660e\u7ec6"}),d.a.createElement(z.a.Body,null,function(){var e=Object(H.a)({},P),t=[],n={};return null===F||void 0===F||F.forEach((function(e){var t=e.subject,a=e.subjectPoint;n[t]||(n[t]={}),n[t].point=a,n[t].level=Ft(a,t)})),Object.keys(e).forEach((function(t){n[t]||(n[t]={});var a=0;a="english"===t?0:Number(e[t]),n[t].goalPoint=a,n[t].goalLevel=Ft(a,t)})),Object.keys(n).forEach((function(e){var a=n[e],i=a.point,r=a.level,c=a.goalPoint,o=a.goalLevel;t.push(d.a.createElement(ct,{key:e},d.a.createElement(ot,null,B.m[e]),d.a.createElement(ot,null,i),d.a.createElement(ot,null,c),d.a.createElement(ot,null,r),d.a.createElement(ot,null,o)))})),d.a.createElement(rt,null,d.a.createElement("tbody",null,d.a.createElement(ct,null,d.a.createElement(lt,null,"\u79d1\u76ee"),d.a.createElement(lt,null,"\u9884\u6d4b\u5206\u6570"),d.a.createElement(lt,null,"\u76ee\u6807\u5206\u6570"),d.a.createElement(lt,null,"\u8bc4\u7ea7"),d.a.createElement(lt,null,"\u76ee\u6807\u8bc4\u7ea7")),t))}())),d.a.createElement(S.a,{size:"lg"})),d.a.createElement(j,null))},Jt=function(){var e=Object(F.a)(G.x).data,t=void 0===e?{}:e,n=Object(F.a)(G.d).data,a=void 0===n?0:n,i=Object(F.a)(G.m,{variables:{sourceType:"center"}}).data,r=Object(F.a)(G.f).data,c=Object(F.a)(G.i).data,o=(null===c||void 0===c?void 0:c.findPredictedPoints)||{},l=o.totalRankThisWeek,f=o.findPointsSubject,m=o.totalPoint,p=Object(s.useMemo)((function(){return(null===i||void 0===i?void 0:i.typeSubjects)||[]}),[null===i||void 0===i?void 0:i.typeSubjects]),g=Object(s.useMemo)((function(){return(null===r||void 0===r?void 0:r.findSubjects)||[]}),[null===r||void 0===r?void 0:r.findSubjects]),b=Math.round((null===a||void 0===a?void 0:a.findGeneralAbility)/20),h=Object(s.useState)("strength"),j=Object(u.a)(h,2),x=j[0],E=j[1],v=Object(s.useState)(0),y=Object(u.a)(v,2),O=y[0],M=y[1],D=Object(s.useState)([]),N=Object(u.a)(D,2),w=N[0],I=N[1],S=Object(s.useState)([]),k=Object(u.a)(S,2),C=k[0],T=k[1],A=Object(s.useState)(0),P=Object(u.a)(A,2),z=P[0],L=P[1],U=function(e){E(e)},R=Object(s.useCallback)((function(){var e=null;switch(x){case"strength":e=d.a.createElement(Yt,{subjectArr:w,subjectPointsArr:f,handleStrengthTabChang:V,strengthTab:z});break;case"ladder":e=d.a.createElement(Ct,{subjectArr:C,rankNum:O,subjectPointsArr:f});break;case"predict":e=d.a.createElement(Vt,{subjectPointsArr:f})}return e}),[f,C,O,z,w,x]),Q=((null===t||void 0===t?void 0:t.getUserInfo)||{}).nickName,H=Object(s.useCallback)((function(){for(var e=[],t=1;t<=5;t+=1)e.push(d.a.createElement(nt,{className:t<=b?"iconfont icon-star1":"",key:t}));return e}),[b]),W=Object(s.useCallback)((function(){var e=d.a.createElement(tt,null,"\u6635\u79f0\uff1a",Q),t=null,n=null,a=null;switch(x){case"strength":0===z&&(t=d.a.createElement(tt,null,"\u9884\u6d4b\u5206\u6570(\u4e0d\u542b\u65e5\u8bed)"),a=d.a.createElement(tt,null,m)),1===z&&(t=d.a.createElement(tt,null,"\u5e73\u5747\u83d3\u661f\u503c"),a=d.a.createElement(tt,null,H())),n=d.a.createElement(tt,null,"\u8bc4\u7ea7\uff1a",B.j[b]);break;case"ladder":t=d.a.createElement(tt,null,"\u672c\u5b63\u7efc\u5408\u6392\u540d"),n=d.a.createElement(tt,null,"\u603b\u5206\uff1a",m),a=d.a.createElement(tt,null,O);break;case"predict":t=d.a.createElement(tt,null,"\u9884\u6d4b\u5206\u6570(\u4e0d\u542b\u65e5\u8bed)"),n=d.a.createElement(tt,null,"\u8bc4\u7ea7\uff1a",B.j[b]),a=d.a.createElement(tt,null,m)}return d.a.createElement($e,null,d.a.createElement(et,null,e,t),d.a.createElement(et,null,n,a))}),[b,H,Q,O,z,x,m]),V=function(e){L(e)};return Object(s.useEffect)((function(){(null===p||void 0===p?void 0:p.length)>0&&I(Object(Y.a)(p,B.m))}),[p]),Object(s.useEffect)((function(){(null===g||void 0===g?void 0:g.length)>0&&T(Object(Y.a)(g,B.m))}),[g]),Object(s.useEffect)((function(){M(l)}),[l]),d.a.createElement(_e,null,d.a.createElement(qe,null,d.a.createElement(Ke,{className:"strength"===x?"active":"",onClick:function(){return U("strength")}},"\u5b9e\u529b\u8bc4\u4f30"),d.a.createElement(Ke,{className:"ladder"===x?"active":"",onClick:function(){return U("ladder")}},"\u6392\u884c\u5929\u68af"),d.a.createElement(Ke,{className:"predict"===x?"active":"",onClick:function(){return U("predict")}},"\u667a\u80fd\u9884\u6d4b")),d.a.createElement(d.a.Fragment,null,W()),d.a.createElement(d.a.Fragment,null,R()))},Xt=n(402),Zt=n.p+"assets/images/bg677958d2.jpg",_t=g.theme["brand-primary"],qt=p.b.div(we||(we=Object(m.a)(["\n  height: 312px;\n  position: relative;\n"]))),Kt=p.b.div(Ie||(Ie=Object(m.a)(["\n  position: absolute;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n"]))),$t=Object(p.b)(Kt)(Se||(Se=Object(m.a)(["\n  z-index: 1;\n  overflow: hidden;\n  &::before {\n    content: '';\n    position: absolute;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-image: url(",");\n    filter: blur(10px);\n    background-size: cover;\n    width: 115%;\n    height: 115%;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n"])),(function(e){return e.bg})),en=p.b.div(ke||(ke=Object(m.a)(["\n  width: 220px;\n  height: 220px;\n  border-radius: 50%;\n  background-color: #fff;\n  padding: 12px;\n  position: absolute;\n  left: 42px;\n  bottom: -14px;\n  box-shadow: 0px 4px 20px rgba(101, 101, 101, 0.15);\n"]))),tn=p.b.img(Ce||(Ce=Object(m.a)(["\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  object-fit: cover;\n  object-position: center;\n"]))),nn=p.b.input(Te||(Te=Object(m.a)(["\n  width: 100%;\n  height: 100%;\n  opacity: 0;\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  left: 0;\n"]))),an=p.b.div(Ae||(Ae=Object(m.a)(["\n  width: 375px;\n  height: 206px;\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  color: #fff;\n"]))),rn=p.b.div(Pe||(Pe=Object(m.a)(["\n  font-weight: bold;\n  font-size: 38px;\n"]))),cn=p.b.div(ze||(ze=Object(m.a)(["\n  font-size: 22px;\n  margin-top: 70px;\n"]))),on=p.b.div(Le||(Le=Object(m.a)(["\n  height: 366px;\n  background: #f5f5f5;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  overflow: auto;\n"]))),ln=p.b.div(Ue||(Ue=Object(m.a)(["\n  width: 284px;\n  height: 234px;\n  background: #fff;\n  filter: drop-shadow(4px 5px 10px rgba(0, 0, 0, 0.05));\n  border-radius: 20px;\n  margin-left: 32px;\n  flex-shrink: 0;\n  &:last-child {\n    margin-right: 32px;\n  }\n"]))),un=p.b.div(Fe||(Fe=Object(m.a)(["\n  height: 134px;\n  background: url(",") no-repeat center;\n  background-size: cover;\n  border-top-left-radius: 20px;\n  border-top-right-radius: 20px;\n"])),Zt),sn=p.b.div(Re||(Re=Object(m.a)(["\n  height: 100px;\n  font-size: 32px;\n  font-weight: bold;\n  text-align: center;\n  line-height: 100px;\n"]))),dn=p.b.div(Ge||(Ge=Object(m.a)(["\n  padding-top: 60px;\n"]))),fn=p.b.div(Be||(Be=Object(m.a)(["\n  padding: 0 46px;\n  display: flex;\n  align-items: center;\n  height: 96px;\n  margin-bottom: 36px;\n  justify-content: space-between;\n"]))),mn=p.b.div(Qe||(Qe=Object(m.a)(["\n  display: inline-flex;\n  font-weight: bold;\n  font-size: 32px;\n  align-items: center;\n"]))),pn=p.b.span(Ye||(Ye=Object(m.a)(["\n  width: 40px;\n  height: 40px;\n  margin-right: 90px;\n  font-size: 40px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  color: #bfbfbf;\n"]))),gn=p.b.div(He||(He=Object(m.a)(["\n  width: 48px;\n  height: 48px;\n  border-radius: 6px;\n  background: ",";\n  font-weight: 500;\n  font-size: 14px;\n  font-size: 28px;\n  line-height: 48px;\n  text-align: center;\n  color: #fff;\n"])),_t),bn=n(1203),hn=n.n(bn);function jn(e,t){return new Promise((function(n,a){var i=document.createElement("canvas"),r=i.getContext("2d"),c=new Image;c.src=e,c.onerror=function(){a(new Error("\u4e0a\u4f20\u5931\u8d25\uff01"))},c.onload=function(){var e=c.width/c.height,a=0,o=0;e<1?(a=t,o=t/e):(o=t,a=e*t);var l=function(e){var t=0;try{hn.a.getData(e,(function(){t=hn.a.getTag(e,"Orientation")}))}catch(n){}return t}(c);if(r)switch(l){case 6:i.width=o,i.height=a,r.save(),r.translate(o/2,a/2),r.rotate(90*Math.PI/180),r.drawImage(c,-a/2,-o/2,a,o),r.restore();break;case 3:i.width=a,i.height=o,r.save(),r.translate(a/2,o/2),r.rotate(180*Math.PI/180),r.drawImage(c,-a/2,-o/2,a,o),r.restore();break;case 8:i.width=o,i.height=a,r.save(),r.translate(o/2,a/2),r.rotate(-90*Math.PI/180),r.drawImage(c,-a/2,-o/2,a,o),r.restore();break;default:i.width=a,i.height=o,r.drawImage(c,0,0,a,o)}var u=i.toDataURL("image/jpeg",.92);n(u)}}))}var xn=function(e,t){return new Promise((function(n,a){(function(e){return/\.(png|jpg|jpeg|PNG|JPG|JPEG)$/.test(e.name)})(e)||a(new Error("\u8bf7\u4e0a\u4f20\u6b63\u786e\u683c\u5f0f\u56fe\u7247\uff08jpeg\u3001jpg\u3001png\uff09"));var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){var i=e&&e.target&&e.target.result?e.target.result:"";jn("string"===typeof i?i:"",t).then((function(e){return n(e)})).catch((function(e){return a(e)}))},i.onerror=function(){a(new Error("\u4e0a\u4f20\u5931\u8d25\uff01"))}}))},En=function(){var e=Object(F.a)(G.x,{fetchPolicy:"cache-and-network"}).data,t=void 0===e?{}:e,n=Object(F.a)(G.l,{fetchPolicy:"cache-and-network"}).data,a=Object(s.useContext)(U.a).state.userInfo,i=(null===t||void 0===t?void 0:t.getUserInfo)||a||{},r=i.nickName,c=i.signature,o=i.avatar,l=Object(s.useState)(o||""),m=Object(u.a)(l,2),p=m[0],g=m[1],b=Object(Xt.a)(G.u,{onCompleted:function(){},onError:function(){}}),h=Object(u.a)(b,1)[0],j=Object(f.e)(),x=p||Xe,E=function(e){switch(e){case"msg":j.push("/msg");break;case"personal":j.push("/complete-all?completeType=update");break;case"setting":j.push("/setting")}};return Object(s.useEffect)((function(){if(o){var e=new Image;e.src=o,e.onload=function(){g(o)}}}),[o]),d.a.createElement(d.a.Fragment,null,d.a.createElement(qt,null,d.a.createElement($t,{bg:x}),d.a.createElement(Kt,null,d.a.createElement(en,{id:"avatar_box"},d.a.createElement(tn,{src:x}),d.a.createElement(nn,{type:"file",accept:"image/*",onChange:function(e){return function(e){var t=e.target.files;if(t&&t[0]){var n,a=((null===(n=document.getElementById("avatar_box"))||void 0===n?void 0:n.offsetWidth)||0)*window.devicePixelRatio;xn(t[0],a).then((function(e){h({variables:{userInfoInput:{avatar:e}}}),g(e)}))}}(e)}})),d.a.createElement(an,null,d.a.createElement(rn,null,r),d.a.createElement(cn,null,c)))),d.a.createElement(on,null,d.a.createElement(ln,{onClick:function(){return j.push("/record")}},d.a.createElement(un,null),d.a.createElement(sn,null,"\u7ec3\u4e60\u8bb0\u5f55"))),d.a.createElement(dn,null,d.a.createElement(fn,{onClick:function(){return E("personal")}},d.a.createElement(mn,null,d.a.createElement(pn,{className:"iconfont icon-personal"}),"\u4e2a\u4eba\u4fe1\u606f")),d.a.createElement(fn,{onClick:function(){return E("msg")}},d.a.createElement(mn,null,d.a.createElement(pn,{className:"iconfont icon-msg"}),"\u6d88\u606f\u4e2d\u5fc3"),d.a.createElement(gn,null,(null===n||void 0===n?void 0:n.getUnreadMessageCount)||0)),d.a.createElement(fn,{onClick:function(){return E("setting")}},d.a.createElement(mn,null,d.a.createElement(pn,{className:"iconfont icon-setting"}),"\u901a\u7528\u8bbe\u5b9a"))))},vn=function(e){var t=Object(s.useState)(""),n=Object(u.a)(t,2),a=n[0],i=n[1],r=Object(f.e)(),c=Object(f.f)();Object(s.useEffect)((function(){switch(c.pathname){case"/library":i("library");break;case"/find":i("find");break;case"/user-center":i("user-center")}}),[c]);var o=Object(s.useCallback)((function(e){r.push("/".concat(e))}),[r]);return d.a.createElement("div",null,"library"===a&&d.a.createElement(Ve,null),"find"===a&&d.a.createElement(Jt,null),"user-center"===a&&d.a.createElement(En,null),d.a.createElement(O,{handelClick:o,type:a}))}}}]);