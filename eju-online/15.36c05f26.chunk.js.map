{"version":3,"sources":["pages/Login/Complete/Complete.tsx"],"names":["Step","Complete","useState","artScienceValue","setArtScienceValue","ejuSubjectValue","setEjuSubjectValue","nickName","setNickName","useMutation","UPDATE_USER_INFO","onCompleted","history","push","onError","show","updateUserInfo","useHistory","handleSelectPick","value","type","size","direction","current","placeholder","onChange","val","data","artScience","cols","onOk","PickItem","ejuSubject","onClick","info","length","checkValues","variables","userInfoInput"],"mappings":"qWASQA,EAAR,IAAQA,KAkGOC,EAjGY,WACzB,MAA8CC,mBAAmB,IAAjE,mBAAOC,EAAP,KAAwBC,EAAxB,KACA,EAA8CF,mBAAmB,IAAjE,mBAAOG,EAAP,KAAwBC,EAAxB,KACA,EAAgCJ,mBAAS,IAAzC,mBAAOK,EAAP,KAAiBC,EAAjB,KACA,EAAyBC,YAAYC,IAAkB,CACrDC,YAAa,kBAAMC,EAAQC,KAAK,kBAChCC,QAAS,kBAAM,IAAMC,KAAK,+BAFrBC,EAAP,oBAIMJ,EAAUK,cAEVC,EAAmB,SAACC,EAAiBC,GAEzC,OAAQA,GACN,IAAK,aACHhB,EAAmBe,GACnB,MACF,IAAK,aACHb,EAAmBa,KAuCzB,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,mDACA,uBAAYE,KAAK,OACjB,uBAAOC,UAAU,aAAaC,QAAS,GACrC,kBAACvB,EAAD,MACA,kBAACA,EAAD,MACA,kBAACA,EAAD,OAEF,uBAAYqB,KAAK,OACjB,kBAAC,IAAD,iCACA,uBAAYA,KAAK,OACjB,uBACEG,YAAY,iCACZC,SAAU,SAACC,GAAD,OAAuBlB,EAAYkB,MAE/C,uBAAYL,KAAK,OACjB,uBACEM,KAAMC,IACNC,KAAM,EACNV,MAAOhB,EACP2B,KAAM,SAACX,GAAD,OAA2BD,EAAiBC,EAAO,gBAEzD,kBAACY,EAAA,EAAD,CAAUP,YAAY,0CAExB,uBACEG,KAAMK,IACNH,KAAM,EACNV,MAAOd,EACPyB,KAAM,SAACX,GAAD,OAA2BD,EAAiBC,EAAO,gBAEzD,kBAACY,EAAA,EAAD,CAAUP,YAAY,gDAExB,uBAAYH,KAAK,OACjB,kBAAC,IAAD,CAAeD,KAAK,UAAUa,QAhDb,YAlBD,WAClB,QAAQ,GACN,MAAO1B,EACL,IAAM2B,KAAK,kCACX,MACF,KAAK/B,EAAgBgC,OAAS,EAC5B,IAAMD,KAAK,kCACX,MACF,KAAK7B,EAAgB8B,OAAS,EAC5B,IAAMD,KAAK,kCACX,MACF,QACE,OAAO,EAEX,OAAO,GAKHE,IACFpB,EAAe,CACbqB,UAAW,CACTC,cAAe,CACb/B,WACAqB,WAAYzB,EAAgB,GAC5B6B,WAAY3B,EAAgB,SAyClC","file":"15.36c05f26.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\nimport { WhiteSpace, Picker, InputItem, Steps, Toast } from 'antd-mobile';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useMutation } from '@apollo/client';\r\nimport { ejuSubject, artScience } from '@/constants/globalDatas';\r\nimport PickItem from '@/components/PickItem';\r\nimport { UPDATE_USER_INFO } from '@/helpers/APIHelper';\r\nimport { Page, PageTitle, OthersItem, PrimaryButton } from '../styles';\r\n\r\nconst { Step } = Steps;\r\nconst Complete: React.FC = () => {\r\n  const [artScienceValue, setArtScienceValue] = useState<number[]>([]); // 学科的值\r\n  const [ejuSubjectValue, setEjuSubjectValue] = useState<number[]>([]); // 科目\r\n  const [nickName, setNickName] = useState(''); // 科目\r\n  const [updateUserInfo] = useMutation(UPDATE_USER_INFO, {\r\n    onCompleted: () => history.push('/complete-all'),\r\n    onError: () => Toast.show('保存失败'),\r\n  });\r\n  const history = useHistory();\r\n  // 设置下拉选中的值\r\n  const handleSelectPick = (value: number[], type: string): void => {\r\n    console.log(value);\r\n    switch (type) {\r\n      case 'artScience':\r\n        setArtScienceValue(value);\r\n        break;\r\n      case 'ejuSubject':\r\n        setEjuSubjectValue(value);\r\n        break;\r\n      default:\r\n    }\r\n  };\r\n\r\n  // 校验值\r\n  const checkValues = (): boolean => {\r\n    switch (false) {\r\n      case !!nickName:\r\n        Toast.info('请输入昵称');\r\n        break;\r\n      case artScienceValue.length > 0:\r\n        Toast.info('请选择学科');\r\n        break;\r\n      case ejuSubjectValue.length > 0:\r\n        Toast.info('请选择科目');\r\n        break;\r\n      default:\r\n        return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // 点击提交\r\n  const handleSubmit = (): void => {\r\n    if (checkValues()) {\r\n      updateUserInfo({\r\n        variables: {\r\n          userInfoInput: {\r\n            nickName,\r\n            artScience: artScienceValue[0],\r\n            ejuSubject: ejuSubjectValue[0],\r\n          },\r\n        },\r\n      });\r\n      // history.push('/complete-all');\r\n    }\r\n  };\r\n  return (\r\n    <Page>\r\n      <PageTitle>请完善您的信息</PageTitle>\r\n      <WhiteSpace size=\"xl\" />\r\n      <Steps direction=\"horizontal\" current={0}>\r\n        <Step />\r\n        <Step />\r\n        <Step />\r\n      </Steps>\r\n      <WhiteSpace size=\"xl\" />\r\n      <OthersItem>必填信息</OthersItem>\r\n      <WhiteSpace size=\"xl\" />\r\n      <InputItem\r\n        placeholder=\"请输入昵称\"\r\n        onChange={(val: string): void => setNickName(val)}\r\n      />\r\n      <WhiteSpace size=\"lg\" />\r\n      <Picker\r\n        data={artScience}\r\n        cols={1}\r\n        value={artScienceValue}\r\n        onOk={(value: number[]): void => handleSelectPick(value, 'artScience')}\r\n      >\r\n        <PickItem placeholder=\"请选择文理科\" />\r\n      </Picker>\r\n      <Picker\r\n        data={ejuSubject}\r\n        cols={1}\r\n        value={ejuSubjectValue}\r\n        onOk={(value: number[]): void => handleSelectPick(value, 'ejuSubject')}\r\n      >\r\n        <PickItem placeholder=\"请选择考学科目\" />\r\n      </Picker>\r\n      <WhiteSpace size=\"xl\" />\r\n      <PrimaryButton type=\"primary\" onClick={handleSubmit}>\r\n        下一步\r\n      </PrimaryButton>\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default Complete;\r\n"],"sourceRoot":""}