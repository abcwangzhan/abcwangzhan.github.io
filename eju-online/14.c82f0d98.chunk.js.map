{"version":3,"sources":["utils/getLabelFromValue.ts","pages/Login/CompleteShow/CompleteShow.tsx"],"names":["getLabelFromValue","data","value","matchValue","forEach","item","label","Step","CompleteShow","history","useHistory","useQuery","USER_SHOW","fetchPolicy","getUserInfo","nickName","as","artScience","es","ejuSubject","birthday","gd","gender","region","dg","degree","japaneseAbility","englishAbility","gs","goalSchool","ejuPoint","size","direction","current","editable","labelNumber","val","addressData","district","addressArr","push","children","length","item2","item3","join","getAdressDesc","japaneseAbilityCertificate","certificate","point","englishAbilityCertificate","ejuPointValue","toString","getEjuPoint","type","onClick"],"mappings":"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","file":"14.c82f0d98.chunk.js","sourcesContent":["interface DataItem {\r\n  value: string | number;\r\n  label: string;\r\n}\r\nconst getLabelFromValue = (\r\n  data: DataItem[],\r\n  value: string | number\r\n): string => {\r\n  let matchValue = '';\r\n  data?.forEach((item) => {\r\n    if (item.value === value) {\r\n      matchValue = item.label;\r\n    }\r\n  });\r\n  return matchValue;\r\n};\r\n\r\nexport default getLabelFromValue;\r\n","import React from 'react';\r\nimport { WhiteSpace, Steps, List, InputItem } from 'antd-mobile';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useQuery } from '@apollo/client';\r\nimport { USER_SHOW } from '@/helpers/APIHelper';\r\nimport district from '@/constants/district.json';\r\nimport {\r\n  artScience,\r\n  ejuSubject,\r\n  gender,\r\n  degree,\r\n  japaneseAbilityCertificate,\r\n  englishAbilityCertificate,\r\n  goalSchool,\r\n} from '@/constants/globalDatas';\r\nimport getLabelFromValue from '@/utils/getLabelFromValue';\r\nimport { Page, PageTitle, PrimaryButton } from '../styles';\r\n\r\nconst { Step } = Steps;\r\nconst CompleteShow: React.FC = () => {\r\n  const history = useHistory();\r\n  const { data } = useQuery(USER_SHOW, {\r\n    fetchPolicy: 'cache-and-network',\r\n  });\r\n  console.log('data++++=', data);\r\n  const { getUserInfo = {} } = data || {};\r\n  const {\r\n    nickName,\r\n    artScience: as,\r\n    ejuSubject: es,\r\n    birthday,\r\n    gender: gd,\r\n    region,\r\n    degree: dg,\r\n    japaneseAbility,\r\n    englishAbility,\r\n    goalSchool: gs,\r\n    ejuPoint,\r\n  } = getUserInfo;\r\n\r\n  // 获取留考最高成绩\r\n  const getEjuPoint = (): string => {\r\n    let ejuPointValue = 0;\r\n    ejuPoint?.forEach((item: { subject: string; point: number }) => {\r\n      if (item?.point) {\r\n        ejuPointValue += item.point;\r\n      }\r\n    });\r\n    return ejuPointValue.toString();\r\n  };\r\n\r\n  // 获取地址描述\r\n  const getAdressDesc = (val: string[]): string => {\r\n    const addressData = district.data;\r\n    const addressArr: string[] = [];\r\n    console.log('addressData++++', addressData);\r\n    // TODO 优化为递归调用\r\n    addressData.forEach((item) => {\r\n      if (item.value === val[0]) {\r\n        addressArr.push(item.label);\r\n        if (item?.children?.length > 0) {\r\n          item.children.forEach((item2) => {\r\n            if (item2.value === val[1]) {\r\n              addressArr.push(item2.label);\r\n              if (item2?.children?.length > 0) {\r\n                item2.children.forEach((item3) => {\r\n                  if (item3.value === val[2]) {\r\n                    addressArr.push(item3.label);\r\n                  }\r\n                });\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n    return addressArr.join(',');\r\n  };\r\n  return (\r\n    <>\r\n      <Page>\r\n        <PageTitle>请完善您的信息</PageTitle>\r\n        <WhiteSpace size=\"xl\" />\r\n        <Steps direction=\"horizontal\" current={2}>\r\n          <Step />\r\n          <Step />\r\n          <Step />\r\n        </Steps>\r\n        <WhiteSpace size=\"xl\" />\r\n        <List>\r\n          <InputItem editable={false} value={nickName} labelNumber={7}>\r\n            昵称:\r\n          </InputItem>\r\n          <InputItem\r\n            editable={false}\r\n            value={getLabelFromValue(artScience, as)}\r\n            labelNumber={7}\r\n          >\r\n            文理:\r\n          </InputItem>\r\n          <InputItem\r\n            editable={false}\r\n            value={getLabelFromValue(ejuSubject, es)}\r\n            labelNumber={7}\r\n          >\r\n            考学科目:\r\n          </InputItem>\r\n          <InputItem editable={false} value={birthday} labelNumber={7}>\r\n            出生日期:\r\n          </InputItem>\r\n          <InputItem\r\n            editable={false}\r\n            value={getLabelFromValue(gender, gd)}\r\n            labelNumber={7}\r\n          >\r\n            性别:\r\n          </InputItem>\r\n          <InputItem\r\n            editable={false}\r\n            value={getAdressDesc(region)}\r\n            labelNumber={7}\r\n          >\r\n            国内地区:\r\n          </InputItem>\r\n          <InputItem\r\n            editable={false}\r\n            value={getLabelFromValue(degree, dg)}\r\n            labelNumber={7}\r\n          >\r\n            最终学历:\r\n          </InputItem>\r\n          <InputItem\r\n            editable={false}\r\n            value={`${getLabelFromValue(\r\n              japaneseAbilityCertificate,\r\n              japaneseAbility?.[0].certificate\r\n            )}-${japaneseAbility?.[0].point}`}\r\n            labelNumber={7}\r\n          >\r\n            日语能力:\r\n          </InputItem>\r\n          <InputItem\r\n            editable={false}\r\n            value={`${getLabelFromValue(\r\n              englishAbilityCertificate,\r\n              englishAbility?.[0].certificate\r\n            )}-${englishAbility?.[0].point}`}\r\n            labelNumber={7}\r\n          >\r\n            英语能力:\r\n          </InputItem>\r\n          <InputItem\r\n            editable={false}\r\n            value={getLabelFromValue(goalSchool, gs)}\r\n            labelNumber={7}\r\n          >\r\n            目标大学:\r\n          </InputItem>\r\n          <InputItem editable={false} value={getEjuPoint()} labelNumber={7}>\r\n            留考最高成绩:\r\n          </InputItem>\r\n          <WhiteSpace size=\"xl\" />\r\n        </List>\r\n        <PrimaryButton\r\n          type=\"primary\"\r\n          onClick={(): void => history.push('/library')}\r\n        >\r\n          确认\r\n        </PrimaryButton>\r\n        <WhiteSpace size=\"xl\" />\r\n        <WhiteSpace size=\"xl\" />\r\n      </Page>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CompleteShow;\r\n"],"sourceRoot":""}