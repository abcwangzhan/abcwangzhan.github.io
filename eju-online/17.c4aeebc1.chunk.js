(this.webpackJsonp=this.webpackJsonp||[]).push([[17],{1247:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return y}));t(448);var a=t(261),r=t.n(a),c=(t(450),t(263)),o=t.n(c),i=t(262),l=t(17),u=(t(260),t(101)),s=t.n(u),f=t(39),p=t(0),m=t.n(p),b=t(1239),d=t(447),h=t(1236),j=t(166),E=t(96),O=t(95),k=t(1203),w=t.n(k),g=t(1204),v=t(1193),y=function(){var e=Object(b.e)(),n=Object(p.useState)({}),t=Object(f.a)(n,2),a=t[0],c=t[1],u=Object(d.a)(j.q,{onCompleted:function(e){return J(e)},onError:function(){return s.a.show("\u767b\u5f55\u5931\u8d25")}}),k=Object(f.a)(u,2),y=k[0],C=k[1].loading,S=Object(h.a)(j.s,{fetchPolicy:"cache-and-network",onCompleted:function(e){return N(e)}}),I=Object(f.a)(S,1)[0],J=function(e){var n;E.a.setLocal(O.a.TOKEN,(null===e||void 0===e||null===(n=e.signIn)||void 0===n?void 0:n.token)||""),I()},N=function(n){var t=n.getUserInfo,a=t.nickName,r=t.artScience,c=t.ejuSubject;!a||!r&&"number"!==typeof r||!c&&"number"!==typeof c?e.replace("/complete"):e.replace("/")},q=function(e,n){c((function(t){return Object(l.a)(Object(l.a)({},t),{},Object(i.a)({},n,e))}))};return Object(p.useEffect)((function(){C&&s.a.loading("\u767b\u5f55\u4e2d",0),!C&&s.a.hide()}),[C]),m.a.createElement(v.e,null,m.a.createElement(v.f,null,"\u6b22\u8fce\u6765\u5230\u83d3\u5b50\u9898\u5e93"),m.a.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1/\u7528\u6237\u540d",onChange:function(e){return q(e,"email")},name:"email"}),m.a.createElement(r.a,{size:"lg"}),m.a.createElement(o.a,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",type:"password",name:"password",onChange:function(e){return q(e,"password")}}),m.a.createElement(v.g,{type:"primary",mt:"286px",onClick:function(){if(function(){var e=a.email,n=a.password;switch(!1){case!!e:s.a.info("\u8bf7\u8f93\u5165\u7535\u5b50\u90ae\u7bb1");break;case g.a.test(e||""):s.a.info("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7535\u5b50\u90ae\u7bb1\u683c\u5f0f");break;case!!n:s.a.info("\u8bf7\u8f93\u5165\u8d26\u53f7\u5bc6\u7801");break;case g.b.test(n||""):s.a.info("\u8bf7\u8f93\u51658-24\u4f4d\u5305\u542b\u5927\u5c0f\u5199\u5b57\u6bcd\u6570\u5b57\u53ca\u7279\u6b8a\u5b57\u7b26\u7684\u5bc6\u7801");break;default:return!0}return!1}()){var e=a.email,n=a.password;y({variables:{email:e,password:w()(n||"").toString()}})}}},"\u767b\u5f55"),m.a.createElement(v.c,null,m.a.createElement(v.d,{onClick:function(){return e.push("/register")}},"\u65b0\u7528\u6237\u6ce8\u518c"),m.a.createElement(v.d,null,"\u5fd8\u8bb0\u5bc6\u7801")))}}}]);