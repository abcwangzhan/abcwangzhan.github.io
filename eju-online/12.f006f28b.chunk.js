(this.webpackJsonp=this.webpackJsonp||[]).push([[12],{1223:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return C}));n(125);var a=n(74),l=n.n(a),c=(n(75),n(51)),r=n.n(c),u=(n(241),n(87)),i=n.n(u),o=n(127),s=n(19),m=n(13),d=n(0),f=n.n(d),p=n(1197),E=n(1153),b=n(161),v=n(126),j=n(105),O=n(1190),g=n(99),h=n(1173),y=n(1174),k=n(242),w=n(1152),x=n(1164),C=function(){var e=Object(h.a)().openModal,t=Object(d.useState)({}),n=Object(m.a)(t,2),a=n[0],c=n[1],u=Object(d.useState)(!1),C=Object(m.a)(u,2),I=C[0],T=C[1],A=Object(d.useState)(!1),S=Object(m.a)(A,2),q=S[0],N=S[1],R=Object(d.useContext)(j.a).dispatch,_=Object(v.a)(),J=_.subject,B=_.tagId,F=_.tag,M=Object(d.useRef)(null),Q=Object(d.useRef)(1),z=Object(p.a)(b.s,{variables:{subject:J,tagId:B}}),D=z.data,G=z.loading,H=(D||{}).topicQuestions,K=Object(d.useRef)(),L=Object(O.e)();Object(d.useEffect)((function(){null===R||void 0===R||R({type:"setTopic",topic:H})}),[R,H]),Object(d.useEffect)((function(){G?i.a.loading("\u52a0\u8f7d\u4e2d",0):i.a.hide()}),[G]);return Object(d.useEffect)((function(){1===(null===H||void 0===H?void 0:H.length)&&N(!0)}),[null===H||void 0===H?void 0:H.length]),f.a.createElement(f.a.Fragment,null,H&&H.length>0&&f.a.createElement(k.w,{id:"topic_page"},f.a.createElement(k.u,null,f.a.createElement(k.t,null),f.a.createElement(k.v,null,f.a.createElement(r.a,{type:"cross",color:"#262626",onClick:function(){return L.go(-1)}}),f.a.createElement(x.a,{ref:K}))),f.a.createElement(k.n,null,f.a.createElement(E.a,{defaultIndex:0,loop:!1,indicator:function(e,t){return Q.current=t+1,null},ref:M,onIndexChange:function(){var e;null===(e=document.getElementById("topic_page"))||void 0===e||e.scrollTo(0,0),setTimeout((function(){H.length===Q.current?N(!0):N(!1)}),500)}},null===H||void 0===H?void 0:H.map((function(t,n){var l=t.questionId,r=t.question,u=t.checkAnswers,i=t._id,m=a[n+1]||{};return f.a.createElement(E.a.Item,{key:i},f.a.createElement(k.u,{className:"lr-pd"},f.a.createElement(k.s,null,l," ",F),f.a.createElement(k.s,null,n+1,"/",null===H||void 0===H?void 0:H.length)),f.a.createElement(k.r,null,Object(w.a)(r)),f.a.createElement(k.l,null,f.a.createElement(k.m,null,"\u89e3\u7b54"),u.map((function(t){var l=t[0];return f.a.createElement(k.m,{key:l.index},f.a.createElement("span",null,l.index),f.a.createElement(k.p,null,f.a.createElement("span",null,m[l.index]),f.a.createElement(k.q,{className:"iconfont icon-edit",onClick:function(){return e({label:l.index,changeAnswer:function(e){return function(e,t,n){var l=a[n]||{};l[e]=t,c((function(e){return Object(s.a)(Object(s.a)({},e),{},Object(o.a)({},n,l))}))}(l.index,e,n+1)}})}})))}))))})))),f.a.createElement(k.j,null,f.a.createElement(k.i,null),f.a.createElement(k.k,null,q?f.a.createElement(l.a,{type:"primary",onClick:function(){null===R||void 0===R||R({type:"setTopicSelectAnswer",topicSelectAnswer:a}),T(!0)}},"\u63d0\u4ea4\u5e76\u67e5\u770b\u7ed3\u679c"):f.a.createElement(l.a,{type:"primary",onClick:function(){var e;null===(e=M.current)||void 0===e||e.swipeNext()}},"\u4e0b\u4e00\u9898")))),f.a.createElement(g.a,{effect:"bottom",needCloseTag:!0,visible:I},f.a.createElement(y.a,{hide:function(){return T(!1)},type:"topic",selectAnswer:a,tag:F,getTimeCounter:function(){var e;return(null===(e=K.current)||void 0===e?void 0:e.stop())||0}})))}}}]);