(this.webpackJsonp=this.webpackJsonp||[]).push([[9],{1208:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return A}));n(125);var a=n(74),c=n.n(a),l=(n(75),n(51)),u=n.n(l),r=(n(241),n(87)),i=n.n(r),o=n(127),s=n(19),m=n(13),d=n(0),f=n.n(d),v=n(1190),E=n(1153),p=n(1198),b=n(161),j=n(126),O=n(99),g=n(1148),k=n(105),h=n(242),y=n(57),w=n(100),C=n(402),T=function(e){var t=Object(C.a)(b.q,{onCompleted:function(e){return O(e)}}),n=Object(m.a)(t,2),a=n[0],l=n[1].loading,r=Object(d.useContext)(k.a).state,o=e.hide,s=e.tag,v=e.answerNum,E=e.answer,p=e.getTimeCounter,O=function(e){o(),w.a.replace("/quick-result?tag=".concat(s,"&timeCounter=").concat(p()))};return Object(d.useEffect)((function(){l?i.a.loading("\u63d0\u4ea4\u4e2d",0):i.a.hide()}),[l]),f.a.createElement(y.h,null,f.a.createElement(y.b,null,f.a.createElement(y.i,null,"\u7b54\u9898\u5361",f.a.createElement(y.j,null,f.a.createElement(u.a,{type:"cross",onClick:function(){return o()}}))),f.a.createElement(y.f,null,f.a.createElement(y.d,null,s),f.a.createElement(y.e,null,function(){for(var e=[],t=0;t<v;t+=1)E[t]?e.push(f.a.createElement(y.g,{className:"true",key:t+1},t+1)):e.push(f.a.createElement(y.g,{key:t+1},t+1));return e}())),f.a.createElement(h.j,null,f.a.createElement(c.a,{type:"primary",onClick:function(){for(var e=r.quick,t=r.quickTrueAnswer,n=[],c=[],l=[],u=0,i=0;i<v;i+=1){var o;n.push((null===e||void 0===e||null===(o=e[i])||void 0===o?void 0:o._id)||"");var s=E[i];c.push([s||""]);var m=null===t||void 0===t?void 0:t[i];(null===m||void 0===m?void 0:m.answer)===s?(u+=1,l.push(null===m||void 0===m?void 0:m.point)):l.push(0)}var d=Object(j.a)(),f=d.subject,b=d.tagId,O=d.sourceType,g=p();a({variables:{ids:n,userAnswers:c,points:l,accuracy:u/v,timeCounter:g,subject:f,tagId:b,sourceType:O,moduleType:"0"}})}},"\u786e\u5b9a\u63d0\u4ea4"))))},q=n(1152),I=n(1164),A=function(){var e=Object(d.useState)({}),t=Object(m.a)(e,2),n=t[0],a=t[1],l=Object(d.useState)(!1),r=Object(m.a)(l,2),w=r[0],C=r[1],A=Object(p.a)(b.n),N=Object(m.a)(A,2),x=N[0],S=N[1],_=S.data,Q=S.loading,R=Object(d.useState)(!1),J=Object(m.a)(R,2),B=J[0],F=J[1],z=Object(d.useContext)(k.a).dispatch,D=Object(d.useRef)(null),G=Object(d.useRef)(1),H=(_||{}).smartQuestions,K=Object(v.e)(),L=Object(j.a)(),M=L.subject,P=L.tagId,U=L.tag,V=(null===H||void 0===H?void 0:H.length)||0,W=Object(d.useRef)(),X=function(){var e;null===(e=D.current)||void 0===e||e.swipeNext()};Object(d.useEffect)((function(){x({variables:{subject:M,tagId:P}})}),[x,M,P]),Object(d.useEffect)((function(){var e=[];null===H||void 0===H||H.forEach((function(t){return e.push(t.checkAnswer)})),null===z||void 0===z||z({type:"setQuickTrueAnswer",quickTrueAnswer:e}),null===z||void 0===z||z({type:"setQuick",quick:H})}),[z,H]),Object(d.useEffect)((function(){Q?i.a.loading("\u52a0\u8f7d\u4e2d",0):i.a.hide()}),[Q]);return Object(d.useEffect)((function(){1===V&&C(!0)}),[V]),f.a.createElement(f.a.Fragment,null,V>0&&f.a.createElement(h.w,{id:"quick_page"},f.a.createElement(h.u,null,f.a.createElement(h.t,null),f.a.createElement(h.v,null,f.a.createElement(u.a,{type:"cross",color:"#262626",onClick:function(){return K.go(-1)}}),f.a.createElement(I.a,{ref:W}))),f.a.createElement(h.n,null,f.a.createElement(E.a,{defaultIndex:0,loop:!1,indicator:function(e,t){return G.current=t+1,null},ref:D,onIndexChange:function(){var e;null===(e=document.getElementById("quick_page"))||void 0===e||e.scrollTo(0,0),setTimeout((function(){H.length===G.current?C(!0):C(!1)}),500)}},null===H||void 0===H?void 0:H.map((function(e,t){var c=e.question,l=e.questionId,u=e.options,r=e._id;return f.a.createElement(E.a.Item,{key:r},f.a.createElement(h.u,{className:"lr-pd"},f.a.createElement(h.s,null,l," ",U),f.a.createElement(h.s,null,t+1,"/",null===H||void 0===H?void 0:H.length)),f.a.createElement(h.r,null,Object(q.a)(c)),f.a.createElement(y.a,null,null===u||void 0===u?void 0:u.map((function(e,c){return f.a.createElement(y.c,{onClick:function(){return e=t,n=c,a((function(t){return Object(s.a)(Object(s.a)({},t),{},Object(o.a)({},e,g.l[n]))})),void setTimeout((function(){G.current<V&&X()}),300);var e,n},key:e,className:n[t]===g.l[c]?"active":""},e)}))))})))),f.a.createElement(h.j,null,f.a.createElement(h.i,null),f.a.createElement(h.k,null,w?f.a.createElement(c.a,{type:"primary",onClick:function(){null===z||void 0===z||z({type:"setSelectAnswer",selectAnswer:n}),F(!0)}},"\u63d0\u4ea4"):f.a.createElement(c.a,{type:"primary",onClick:X},"\u4e0b\u4e00\u9898")))),f.a.createElement(O.a,{effect:"bottom",needCloseTag:!0,visible:B},f.a.createElement(T,{hide:function(){return F(!1)},answer:n,tag:U,answerNum:V,getTimeCounter:function(){var e;return(null===(e=W.current)||void 0===e?void 0:e.stop())||0}})))}}}]);