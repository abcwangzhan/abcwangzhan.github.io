{"version":3,"sources":["pages/Login/CompleteAll/CompleteAll.tsx"],"names":["Step","CompleteAll","useState","birthday","setBirthday","genderValue","setGenderValue","regionValue","setRegionValue","degreeValue","setDegreeValue","goalSchoolValue","setGoalSchoolValue","goalSchool","setGoalSchool","japaneseAbilityCertificateValue","setJapaneseAbilityCertificateValue","japaneseAbilityPointValue","setJapaneseAbilityPointValue","englishAbilityCertificateValue","setEnglishAbilityCertificateValue","englishAbilityPointValue","setEnglishAbilityPointValue","drawerOpen","setDraweOpen","ejuValue","setEjuValue","ejuValuePoint","setEjuValuePoint","nickName","setNickName","history","useHistory","isUpdate","getUrlParams","completeType","userInfo","useQuery","USER_SHOW","fetchPolicy","data","useMutation","UPDATE_USER_INFO","onCompleted","info","go","push","onError","show","updateUserInfo","handleSelectPick","value","type","date","pad","n","getFullYear","getMonth","getDate","formatDate","handleSubmit","ejuPoint","Object","keys","forEach","item","subject","point","Number","param","gender","region","degree","japaneseAbility","certificate","englishAbility","variables","userInfoInput","handleEjuPoint","points","val","useEffect","APIHelper","getSchool","then","res","filterArr","getGoalSchool","getUserInfo","infoBirthday","infoGender","infoDegree","infoGoalSchool","nickNameStr","jap","eng","ejuObj","totalPoint","toString","refreshTitle","size","direction","current","placeholder","onChange","mode","format","PickItem","cols","onOk","district","japaneseAbilityCertificate","length","englishAbilityCertificate","onClick","className","inline","sidebar","artScience","renderHeader","ejuContent","position","open","enableDragHandle","onOpenChange"],"mappings":"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","file":"15.05000e19.chunk.js","sourcesContent":["import React, { ReactElement, useEffect, useState } from 'react';\r\nimport {\r\n  WhiteSpace,\r\n  Picker,\r\n  Steps,\r\n  DatePicker,\r\n  Drawer,\r\n  InputItem,\r\n  List,\r\n  Toast,\r\n} from 'antd-mobile';\r\nimport { useHistory } from 'react-router-dom';\r\nimport getUrlParams from '@/utils/get-url-params';\r\nimport PickItem from '@/components/PickItem';\r\nimport {\r\n  gender,\r\n  degree,\r\n  japaneseAbilityCertificate,\r\n  englishAbilityCertificate,\r\n} from '@/constants/globalDatas';\r\nimport district from '@/constants/district.json';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport APIHelper, { UPDATE_USER_INFO, USER_SHOW } from '@/helpers/APIHelper';\r\nimport getGoalSchool, { PickDataItem } from '@/utils/getGoalSchool';\r\nimport refreshTitle from '@/utils/refreshTitle';\r\nimport {\r\n  Page,\r\n  PageTitle,\r\n  OthersItem,\r\n  PrimaryButton,\r\n  DrawerBox,\r\n  ButtonBox,\r\n} from '../styles';\r\n\r\nconst { Step } = Steps;\r\nconst CompleteAll: React.FC = () => {\r\n  const [birthday, setBirthday] = useState(''); // 出生日期\r\n  const [genderValue, setGenderValue] = useState<number[]>([]); // 性别\r\n  const [regionValue, setRegionValue] = useState<string[]>([]); // 国内地区\r\n  const [degreeValue, setDegreeValue] = useState<string[]>([]); // 最终学历\r\n  const [goalSchoolValue, setGoalSchoolValue] = useState<string[]>([]); // 目标院校\r\n  const [goalSchool, setGoalSchool] = useState<PickDataItem[]>([]); // 目标院校列表\r\n  const [japaneseAbilityCertificateValue, setJapaneseAbilityCertificateValue] =\r\n    useState<string[]>([]); // 日语能力\r\n  const [japaneseAbilityPointValue, setJapaneseAbilityPointValue] = useState(0); // 日语成绩\r\n  const [englishAbilityCertificateValue, setEnglishAbilityCertificateValue] =\r\n    useState<string[]>([]); // 英语能力\r\n  const [englishAbilityPointValue, setEnglishAbilityPointValue] = useState(0); // 英语成绩\r\n  const [drawerOpen, setDraweOpen] = useState(false); // 是否打开最高留考成绩抽屉\r\n  const [ejuValue, setEjuValue] = useState({}); // 留考成绩展示\r\n  const [ejuValuePoint, setEjuValuePoint] = useState(''); // 留考成绩总分\r\n  const [nickName, setNickName] = useState(''); // 昵称\r\n  const history = useHistory();\r\n  const { completeType } = getUrlParams();\r\n  const isUpdate = completeType === 'update'; // 是否是个人中心完善信息点进来\r\n  const { data: userInfo } = useQuery(USER_SHOW, {\r\n    fetchPolicy: 'cache-and-network',\r\n  });\r\n  const [updateUserInfo] = useMutation(UPDATE_USER_INFO, {\r\n    onCompleted: () => {\r\n      Toast.info('保存成功', 2, () => {\r\n        isUpdate ? history.go(-1) : history.push('/complete-show');\r\n      });\r\n    },\r\n    onError: () => Toast.show('保存失败'),\r\n  });\r\n\r\n  // 格式化日期格式\r\n  const formatDate = (date: Date): string => {\r\n    const pad = (n: number): string | number => (n < 10 ? `0${n}` : n);\r\n    const dateStr = `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(\r\n      date.getDate()\r\n    )}`;\r\n    return dateStr;\r\n  };\r\n  // 设置下拉选中的值\r\n  const handleSelectPick = (value: any, type: string): void => {\r\n    console.log(value.toString());\r\n    switch (type) {\r\n      case 'birthday':\r\n        setBirthday(formatDate(value));\r\n        break;\r\n      case 'gender':\r\n        setGenderValue(value);\r\n        break;\r\n      case 'region':\r\n        setRegionValue(value);\r\n        break;\r\n      case 'degree':\r\n        setDegreeValue(value);\r\n        break;\r\n      case 'japaneseAbilityCertificate':\r\n        setJapaneseAbilityCertificateValue(value);\r\n        break;\r\n      case 'englishAbilityCertificate':\r\n        setEnglishAbilityCertificateValue(value);\r\n        break;\r\n      case 'goalSchool':\r\n        setGoalSchoolValue(value);\r\n        break;\r\n      default:\r\n    }\r\n  };\r\n\r\n  // 下一步前进行提交\r\n  const handleSubmit = (): void => {\r\n    const ejuPoint: { subject: string; point: number }[] = [];\r\n    Object.keys(ejuValue).forEach((item) => {\r\n      ejuPoint.push({\r\n        subject: item,\r\n        point: Number(ejuValue[item as keyof typeof ejuValue]),\r\n      });\r\n    });\r\n    const param = {\r\n      birthday,\r\n      gender: genderValue[0],\r\n      region: regionValue,\r\n      degree: degreeValue[0],\r\n      japaneseAbility: {\r\n        certificate: japaneseAbilityCertificateValue[0],\r\n        point: japaneseAbilityPointValue,\r\n      },\r\n      englishAbility: {\r\n        certificate: englishAbilityCertificateValue[0],\r\n        point: englishAbilityPointValue,\r\n      },\r\n      goalSchool: goalSchoolValue[0],\r\n      ejuPoint,\r\n      nickName,\r\n    };\r\n    updateUserInfo({\r\n      variables: {\r\n        userInfoInput: param,\r\n      },\r\n    });\r\n  };\r\n  // 修改分数\r\n  const handleEjuPoint = (points: string, type: string): void => {\r\n    setEjuValue((val) => {\r\n      const newVal = { ...val, [type]: points };\r\n      return newVal;\r\n    });\r\n  };\r\n\r\n  // 填写留考成绩\r\n  const handleEjuValue = (): void => {\r\n    setDraweOpen(false);\r\n  };\r\n  const ejuContent = (): ReactElement => {\r\n    console.log('userInfo+++++', userInfo);\r\n    // 0文科  1理科\r\n    const artScience = userInfo?.getUserInfo?.artScience;\r\n    return (\r\n      <DrawerBox>\r\n        <List renderHeader=\"留考最高成绩\">\r\n          {artScience === 0 && (\r\n            <>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                type=\"number\"\r\n                value={ejuValue['japWriting' as keyof typeof ejuValue]}\r\n                onChange={(val: string): void =>\r\n                  handleEjuPoint(val, 'japWriting')\r\n                }\r\n              >\r\n                日语写作\r\n              </InputItem>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                type=\"number\"\r\n                value={ejuValue['japReading' as keyof typeof ejuValue]}\r\n                onChange={(val: string): void =>\r\n                  handleEjuPoint(val, 'japReading')\r\n                }\r\n              >\r\n                日语阅读\r\n              </InputItem>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                type=\"number\"\r\n                value={ejuValue['japListening' as keyof typeof ejuValue]}\r\n                onChange={(val: string): void =>\r\n                  handleEjuPoint(val, 'japListening')\r\n                }\r\n              >\r\n                日语听力\r\n              </InputItem>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                type=\"number\"\r\n                value={ejuValue['math1' as keyof typeof ejuValue]}\r\n                onChange={(val: string): void => handleEjuPoint(val, 'math1')}\r\n              >\r\n                数学1\r\n              </InputItem>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                value={ejuValue['ACAT' as keyof typeof ejuValue]}\r\n                type=\"number\"\r\n                onChange={(val: string): void => handleEjuPoint(val, 'ACAT')}\r\n              >\r\n                文综\r\n              </InputItem>\r\n            </>\r\n          )}\r\n          {artScience === 1 && (\r\n            <>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                type=\"number\"\r\n                value={ejuValue['japWriting' as keyof typeof ejuValue]}\r\n                onChange={(val: string): void =>\r\n                  handleEjuPoint(val, 'japWriting')\r\n                }\r\n              >\r\n                日语写作\r\n              </InputItem>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                value={ejuValue['japReading' as keyof typeof ejuValue]}\r\n                type=\"number\"\r\n                onChange={(val: string): void =>\r\n                  handleEjuPoint(val, 'japReading')\r\n                }\r\n              >\r\n                日语阅读\r\n              </InputItem>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                value={ejuValue['japListening' as keyof typeof ejuValue]}\r\n                type=\"number\"\r\n                onChange={(val: string): void =>\r\n                  handleEjuPoint(val, 'japListening')\r\n                }\r\n              >\r\n                日语听力\r\n              </InputItem>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                value={ejuValue['math2' as keyof typeof ejuValue]}\r\n                type=\"number\"\r\n                onChange={(val: string): void => handleEjuPoint(val, 'math2')}\r\n              >\r\n                数学2\r\n              </InputItem>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                value={ejuValue['physics' as keyof typeof ejuValue]}\r\n                type=\"number\"\r\n                onChange={(val: string): void => handleEjuPoint(val, 'physics')}\r\n              >\r\n                物理\r\n              </InputItem>\r\n              <InputItem\r\n                placeholder=\"请输入成绩\"\r\n                value={ejuValue['chemistry' as keyof typeof ejuValue]}\r\n                type=\"number\"\r\n                onChange={(val: string): void =>\r\n                  handleEjuPoint(val, 'chemistry')\r\n                }\r\n              >\r\n                化学\r\n              </InputItem>\r\n            </>\r\n          )}\r\n        </List>\r\n        <WhiteSpace size=\"xl\" />\r\n        <PrimaryButton type=\"primary\" onClick={(): void => handleEjuValue()}>\r\n          保存\r\n        </PrimaryButton>\r\n      </DrawerBox>\r\n    );\r\n  };\r\n  useEffect(() => {\r\n    // 初始化获得目标院校\r\n    APIHelper.getSchool().then((res) => {\r\n      const filterArr = getGoalSchool(res.data);\r\n      setGoalSchool(filterArr);\r\n    });\r\n  }, []);\r\n\r\n  // 初始化展示已完善的信息\r\n  useEffect(() => {\r\n    const {\r\n      birthday: infoBirthday,\r\n      gender: infoGender,\r\n      region,\r\n      degree: infoDegree,\r\n      japaneseAbility,\r\n      englishAbility,\r\n      goalSchool: infoGoalSchool,\r\n      ejuPoint,\r\n      nickName: nickNameStr,\r\n    } = userInfo?.getUserInfo || {};\r\n    console.log(userInfo?.getUserInfo);\r\n    setBirthday(infoBirthday);\r\n    setGenderValue([infoGender]);\r\n    setRegionValue(region);\r\n    setDegreeValue([infoDegree]);\r\n    console.log('nickName+++', nickNameStr);\r\n    setNickName(nickNameStr);\r\n    const jap = japaneseAbility?.[0];\r\n    if (jap) {\r\n      setJapaneseAbilityCertificateValue([jap.certificate]);\r\n      setJapaneseAbilityPointValue(jap.point);\r\n    }\r\n    const eng = englishAbility?.[0];\r\n    if (eng) {\r\n      setEnglishAbilityCertificateValue([eng.certificate]);\r\n      setEnglishAbilityPointValue(eng.point);\r\n    }\r\n    setGoalSchoolValue([infoGoalSchool]);\r\n    // 留考成绩\r\n    const ejuObj: { [key: string]: string | number } = {};\r\n    ejuPoint?.forEach((item: { subject: string; point: number }) => {\r\n      const { subject, point } = item;\r\n      ejuObj[subject] = point;\r\n    });\r\n    setEjuValue(ejuObj);\r\n  }, [userInfo?.getUserInfo]);\r\n\r\n  useEffect(() => {\r\n    let totalPoint = 0;\r\n    Object.keys(ejuValue).forEach((item) => {\r\n      totalPoint += Number(ejuValue[item as keyof typeof ejuValue]);\r\n    });\r\n    setEjuValuePoint(totalPoint.toString());\r\n  }, [ejuValue]);\r\n\r\n  useEffect(() => {\r\n    isUpdate && refreshTitle('个人信息');\r\n  }, [isUpdate]);\r\n  return (\r\n    <>\r\n      <Page>\r\n        {isUpdate ? (\r\n          <PageTitle>个人信息</PageTitle>\r\n        ) : (\r\n          <>\r\n            <PageTitle>请完善您的信息</PageTitle>\r\n            <WhiteSpace size=\"xl\" />\r\n            <Steps direction=\"horizontal\" current={1}>\r\n              <Step />\r\n              <Step />\r\n              <Step />\r\n            </Steps>\r\n            <WhiteSpace size=\"xl\" />\r\n            <OthersItem>选填信息（填写该信息开启AI考学分析功能）</OthersItem>\r\n          </>\r\n        )}\r\n        <WhiteSpace size=\"xl\" />\r\n        {isUpdate && (\r\n          <InputItem\r\n            placeholder=\"请输入昵称\"\r\n            value={nickName}\r\n            onChange={(val: string): void => setNickName(val)}\r\n          />\r\n        )}\r\n        <DatePicker\r\n          mode=\"date\"\r\n          onChange={(value): void => handleSelectPick(value, 'birthday')}\r\n          format=\"YYYY-MM-DD\"\r\n        >\r\n          <PickItem placeholder=\"请选择出生日期\" value={birthday} />\r\n        </DatePicker>\r\n        <Picker\r\n          data={gender}\r\n          cols={1}\r\n          value={genderValue}\r\n          onOk={(value: string[]): void => handleSelectPick(value, 'gender')}\r\n        >\r\n          <PickItem placeholder=\"请选择性别\" />\r\n        </Picker>\r\n        <Picker\r\n          data={district.data}\r\n          value={regionValue}\r\n          onOk={(value: string[]): void => handleSelectPick(value, 'region')}\r\n        >\r\n          <PickItem placeholder=\"请选择国内地区\" />\r\n        </Picker>\r\n        <Picker\r\n          data={degree}\r\n          cols={1}\r\n          value={degreeValue}\r\n          onOk={(value: string[]): void => handleSelectPick(value, 'degree')}\r\n        >\r\n          <PickItem placeholder=\"请选择最终学历\" />\r\n        </Picker>\r\n        <Picker\r\n          data={japaneseAbilityCertificate}\r\n          cols={1}\r\n          value={japaneseAbilityCertificateValue}\r\n          onOk={(value: string[]): void =>\r\n            handleSelectPick(value, 'japaneseAbilityCertificate')\r\n          }\r\n        >\r\n          <PickItem placeholder=\"请选择日语能力\" />\r\n        </Picker>\r\n        {japaneseAbilityCertificateValue.length > 0 && (\r\n          <>\r\n            <InputItem\r\n              placeholder=\"请输入日语成绩\"\r\n              type=\"number\"\r\n              value={\r\n                japaneseAbilityPointValue > 0\r\n                  ? japaneseAbilityPointValue.toString()\r\n                  : ''\r\n              }\r\n              onChange={(val): void =>\r\n                setJapaneseAbilityPointValue(Number(val))\r\n              }\r\n            />\r\n            <WhiteSpace size=\"lg\" />\r\n          </>\r\n        )}\r\n        <Picker\r\n          data={englishAbilityCertificate}\r\n          cols={1}\r\n          value={englishAbilityCertificateValue}\r\n          onOk={(value: string[]): void =>\r\n            handleSelectPick(value, 'englishAbilityCertificate')\r\n          }\r\n        >\r\n          <PickItem placeholder=\"请选择英语能力\" />\r\n        </Picker>\r\n        {englishAbilityCertificateValue.length > 0 && (\r\n          <>\r\n            <InputItem\r\n              placeholder=\"请输入英语成绩\"\r\n              type=\"number\"\r\n              value={\r\n                englishAbilityPointValue > 0\r\n                  ? englishAbilityPointValue.toString()\r\n                  : ''\r\n              }\r\n              onChange={(val): void => setEnglishAbilityPointValue(Number(val))}\r\n            />\r\n            <WhiteSpace size=\"lg\" />\r\n          </>\r\n        )}\r\n        <Picker\r\n          data={goalSchool}\r\n          cols={1}\r\n          value={goalSchoolValue}\r\n          onOk={(value: string[]): void =>\r\n            handleSelectPick(value, 'goalSchool')\r\n          }\r\n        >\r\n          <PickItem placeholder=\"请选择目标院校\" />\r\n        </Picker>\r\n\r\n        <PickItem\r\n          placeholder=\"请输入留考最高成绩\"\r\n          onClick={(): void => setDraweOpen(true)}\r\n          value={ejuValuePoint}\r\n        />\r\n\r\n        <ButtonBox>\r\n          {isUpdate ? (\r\n            <PrimaryButton\r\n              type=\"primary\"\r\n              className=\"block\"\r\n              onClick={(): void => handleSubmit()}\r\n            >\r\n              保存\r\n            </PrimaryButton>\r\n          ) : (\r\n            <>\r\n              <PrimaryButton\r\n                inline\r\n                type=\"ghost\"\r\n                onClick={(): void => history.push('/')}\r\n              >\r\n                跳过\r\n              </PrimaryButton>\r\n\r\n              <PrimaryButton\r\n                inline\r\n                type=\"primary\"\r\n                onClick={(): void => handleSubmit()}\r\n              >\r\n                下一步\r\n              </PrimaryButton>\r\n            </>\r\n          )}\r\n        </ButtonBox>\r\n      </Page>\r\n      {drawerOpen && (\r\n        <Drawer\r\n          sidebar={ejuContent()}\r\n          position=\"bottom\"\r\n          open={drawerOpen}\r\n          enableDragHandle\r\n          onOpenChange={(): void => setDraweOpen(!drawerOpen)}\r\n        >\r\n          <div />\r\n        </Drawer>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CompleteAll;\r\n"],"sourceRoot":""}