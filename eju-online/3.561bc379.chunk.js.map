{"version":3,"sources":["pages/Login/styles.ts","helpers/APIHelper.ts","constants/globalDatas.ts","components/PickItem/PickItem.tsx","pages/Setting/Feedback/Feedback.tsx"],"names":["themeColor","pkg","theme","Page","styled","div","PageTitle","PrimaryButton","props","mt","OthersBox","OthersItem","span","DrawerBox","ButtonBox","USER_SHOW","gql","USER_LOGIN","USER_RIGISTER","USER_COMPLETE","CHANGE_PWD","QUERY_INFORMATION","CREAT_FEEDBACK","artScience","value","label","ejuSubject","gender","degree","japaneseAbilityCertificate","englishAbilityCertificate","goalSchool","feedbackType","PickItem","extra","onClick","placeholder","editable","type","size","Feedback","useState","feedType","setFeedType","feedContent","setFeedContent","fileArr","setFileArr","useMutation","onCompleted","changeSuccess","handleSave","history","loading","useHistory","info","goBack","data","cols","onOk","rows","count","clear","onChange","val","files","index","selectable","length","checkValues","variables","id","fbType","fbContent","fbImage","url"],"mappings":"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","file":"3.561bc379.chunk.js","sourcesContent":["import { Button } from 'antd-mobile';\r\nimport { ButtonProps } from 'antd-mobile/lib/button';\r\nimport styled from 'styled-px2vw';\r\nimport pkg from '../../../package.json';\r\n\r\nconst themeColor = pkg.theme['brand-primary'];\r\ninterface PrimaryButtonProps extends ButtonProps {\r\n  mt?: string;\r\n}\r\n\r\nexport const Page = styled.div`\r\n  padding: 40px 32px 0;\r\n  overflow: auto;\r\n  height: 100vh;\r\n  input {\r\n    font-size: 32px !important;\r\n  }\r\n  .am-checkbox-agree {\r\n    margin-left: 0;\r\n  }\r\n  .am-input-item {\r\n    padding-left: 0 !important;\r\n    .am-list-line {\r\n      padding-left: 30px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const PageTitle = styled.div`\r\n  text-align: center;\r\n  padding-bottom: 48px;\r\n  font-size: 40px;\r\n  letter-spacing: 20px;\r\n  font-weight: bold;\r\n`;\r\n\r\nexport const PrimaryButton = styled(Button)<PrimaryButtonProps>`\r\n  /* height: 100px;\r\n  line-height: 100px;\r\n  border-radius: 50px; */\r\n  margin-top: ${(props): string | number => props.mt || 0};\r\n`;\r\n\r\nexport const OthersBox = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 20px 32px;\r\n`;\r\n\r\nexport const OthersItem = styled.span`\r\n  color: ${themeColor};\r\n`;\r\n\r\nexport const DrawerBox = styled.div`\r\n  height: 75vh;\r\n  background-color: #fff;\r\n  padding: 0 30px;\r\n`;\r\n\r\nexport const ButtonBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding-bottom: 100px;\r\n`;\r\n","import { gql } from '@apollo/client';\r\n\r\n// 获取用户信息\r\nexport const USER_SHOW = gql`\r\n  query userShow($id: ID!) {\r\n    user_show(_id: $id) {\r\n      user_name\r\n      art_science\r\n      eju_subject\r\n      birthday\r\n      gender\r\n      region\r\n      degree\r\n      japanese_ability {\r\n        certificate\r\n        point\r\n      }\r\n      english_ability {\r\n        certificate\r\n        point\r\n      }\r\n      goal_school\r\n      eju_point {\r\n        subject\r\n        point\r\n      }\r\n    }\r\n  }\r\n`;\r\n// 登录\r\nexport const USER_LOGIN = gql`\r\n  query userLogin($email: String!, $password: String!) {\r\n    user_login(email: $email, password: $password) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\n// 注册\r\nexport const USER_RIGISTER = gql`\r\n  query addUserRegister(\r\n    $email: String!\r\n    $password: String!\r\n    $userName: String!\r\n  ) {\r\n    addUser_register(email: $email, password: $password, user_name: $userName) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\n// 保存用户信息\r\nexport const USER_COMPLETE = gql`\r\n  mutation addUserInfo(\r\n    $artScience: String!\r\n    $ejuSubject: String!\r\n    $birthday: String\r\n    $region: String\r\n    $degree: String\r\n    $japaneseAbilityCertificate: String\r\n    $japaneseAbilityPoint: Int\r\n    $englishAbilityCertificate: String\r\n    $englishAbilityPoint: Int\r\n    $goalSchool: String\r\n    $ejuPoint: Int\r\n  ) {\r\n    addUser_adduserinfo(\r\n      art_science: $artScience\r\n      eju_subject_1: $ejuSubject\r\n      birthday: $birthday\r\n      region: $region\r\n      degree: $degree\r\n      japanese_ability_certificate: $japaneseAbilityCertificate\r\n      japanese_ability_point: $japaneseAbilityPoint\r\n      english_ability_certificate: $englishAbilityCertificate\r\n      english_ability_point: $englishAbilityPoint\r\n      goal_school: $goalSchool\r\n      eju_point: $ejuPoint\r\n    ) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\n// 修改登录密码\r\nexport const CHANGE_PWD = gql`\r\n  mutation changPwd($id: String!, $password: String) {\r\n    changePW(_id: $id, password: $password) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n\r\n// 查询用户消息\r\nexport const QUERY_INFORMATION = gql`\r\n  query getInformation($id: ID!) {\r\n    information(_id: $id) {\r\n      _id\r\n      date\r\n      time\r\n      title\r\n      content\r\n    }\r\n  }\r\n`;\r\n\r\n// 用户反馈\r\nexport const CREAT_FEEDBACK = gql`\r\n  mutation creatFeedback(\r\n    $id: String!\r\n    $fbType: String\r\n    $fbContent: String\r\n    $fbImage: String\r\n  ) {\r\n    createFbEmail(\r\n      _id: $id\r\n      fb_type: $fbType\r\n      fb_content: $fbContent\r\n      fb_image: $fbImage\r\n    ) {\r\n      _id\r\n    }\r\n  }\r\n`;\r\n","// 文理科\r\nexport const artScience = [\r\n  {\r\n    value: '0',\r\n    label: '文科',\r\n  },\r\n  {\r\n    value: '1',\r\n    label: '理科',\r\n  },\r\n];\r\n\r\n// 科目\r\nexport const ejuSubject = [\r\n  {\r\n    value: '0',\r\n    label: '数学+化学',\r\n  },\r\n  {\r\n    value: '1',\r\n    label: '数学+物理',\r\n  },\r\n];\r\n\r\n// 性别\r\nexport const gender = [\r\n  {\r\n    value: '0',\r\n    label: '女',\r\n  },\r\n  {\r\n    value: '1',\r\n    label: '男',\r\n  },\r\n];\r\n// 最后学历\r\nexport const degree = [\r\n  {\r\n    value: '0',\r\n    label: '高中',\r\n  },\r\n  {\r\n    value: '1',\r\n    label: '大学专科',\r\n  },\r\n  {\r\n    value: '1',\r\n    label: '大学本科',\r\n  },\r\n  {\r\n    value: '2',\r\n    label: '研究生',\r\n  },\r\n  {\r\n    value: '3',\r\n    label: '博士生',\r\n  },\r\n];\r\n\r\n// 日语能力\r\nexport const japaneseAbilityCertificate = [\r\n  {\r\n    value: '0',\r\n    label: 'N1',\r\n  },\r\n  {\r\n    value: '1',\r\n    label: 'N2',\r\n  },\r\n  {\r\n    value: '2',\r\n    label: 'N3',\r\n  },\r\n  {\r\n    value: '3',\r\n    label: 'N4',\r\n  },\r\n];\r\n// 英语能力\r\nexport const englishAbilityCertificate = [\r\n  {\r\n    value: '0',\r\n    label: '高中英语',\r\n  },\r\n  {\r\n    value: '1',\r\n    label: '四级',\r\n  },\r\n  {\r\n    value: '2',\r\n    label: '六级',\r\n  },\r\n  {\r\n    value: '3',\r\n    label: '英专',\r\n  },\r\n];\r\n// 目标院校\r\nexport const goalSchool = [\r\n  {\r\n    value: '0',\r\n    label: '大学1',\r\n  },\r\n  {\r\n    value: '1',\r\n    label: '大学2',\r\n  },\r\n  {\r\n    value: '2',\r\n    label: '大学3',\r\n  },\r\n  {\r\n    value: '3',\r\n    label: '大学4',\r\n  },\r\n];\r\n\r\n// 意见反馈类型\r\nexport const feedbackType = [\r\n  {\r\n    value: '0',\r\n    label: '类型1',\r\n  },\r\n  {\r\n    value: '1',\r\n    label: '类型2',\r\n  },\r\n  {\r\n    value: '2',\r\n    label: '类型3',\r\n  },\r\n  {\r\n    value: '3',\r\n    label: '类型4',\r\n  },\r\n];\r\n","import { Icon, InputItem, WhiteSpace } from 'antd-mobile';\r\nimport React from 'react';\r\n\r\ninterface PickItemProps {\r\n  extra?: string;\r\n  onClick?: () => void;\r\n  placeholder: string;\r\n  value?: string;\r\n}\r\n\r\nconst PickItem: React.FC<PickItemProps> = (props) => {\r\n  const { extra, onClick, placeholder, value } = props;\r\n  console.log('extra+++', extra);\r\n  return (\r\n    <div onClick={onClick}>\r\n      <InputItem\r\n        placeholder={placeholder || '请选择'}\r\n        editable={false}\r\n        extra={<Icon type=\"down\" />}\r\n        value={value || (extra && extra !== '请选择' ? extra : '')}\r\n      />\r\n      <WhiteSpace size=\"lg\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PickItem;\r\n","import React, { useState } from 'react';\r\nimport {\r\n  List,\r\n  Picker,\r\n  WhiteSpace,\r\n  TextareaItem,\r\n  ImagePicker,\r\n  Toast,\r\n} from 'antd-mobile';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useMutation } from '@apollo/client';\r\nimport PickItem from '@/components/PickItem';\r\nimport { feedbackType } from '@/constants/globalDatas';\r\nimport { CREAT_FEEDBACK } from '@/helpers/APIHelper';\r\nimport { Page, PageTitle, PrimaryButton } from '../../Login/styles';\r\nimport { ImageFile } from '../types';\r\n\r\nconst Feedback: React.FC = () => {\r\n  const [feedType, setFeedType] = useState<string[]>([]); // 反馈类型\r\n  const [feedContent, setFeedContent] = useState(''); // 反馈内容\r\n  const [fileArr, setFileArr] = useState<ImageFile[]>([]); // 反馈图片\r\n  const [handleSave, { loading }] = useMutation(CREAT_FEEDBACK, {\r\n    onCompleted: () => changeSuccess(),\r\n  });\r\n  const history = useHistory();\r\n  // 选择图片\r\n  const onChange = (files: ImageFile[], type: string, index?: number): void => {\r\n    setFileArr(files);\r\n    console.log(files, type, index);\r\n  };\r\n\r\n  // 页面校验\r\n  const checkValues = (): boolean => {\r\n    switch (false) {\r\n      case feedType.length > 0:\r\n        Toast.info('请选择反馈类型');\r\n        break;\r\n      case !!feedContent:\r\n        Toast.info('请输入反馈内容');\r\n        break;\r\n      default:\r\n        return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // 提交\r\n  const handleSubmit = (): void => {\r\n    console.log(fileArr);\r\n    if (checkValues()) {\r\n      handleSave({\r\n        variables: {\r\n          id: '111',\r\n          fbType: feedType[0],\r\n          fbContent: feedContent,\r\n          fbImage: fileArr[0].url,\r\n        },\r\n      });\r\n    }\r\n    // history.goBack();\r\n  };\r\n\r\n  // 保存成功\r\n  const changeSuccess = (): void => {\r\n    Toast.info('保存成功', 1.5, () => history.goBack());\r\n  };\r\n  return (\r\n    <Page>\r\n      <PageTitle>意见反馈</PageTitle>\r\n      <WhiteSpace size=\"xl\" />\r\n\r\n      <Picker\r\n        data={feedbackType}\r\n        cols={1}\r\n        value={feedType}\r\n        onOk={(value: string[]): void => setFeedType(value)}\r\n      >\r\n        <PickItem placeholder=\"请选择反馈问题类型\" />\r\n      </Picker>\r\n      <List>\r\n        <TextareaItem\r\n          placeholder=\"请输入您的意见\"\r\n          rows={5}\r\n          count={100}\r\n          clear\r\n          onChange={(val) => setFeedContent(val || '')}\r\n        />\r\n      </List>\r\n      <WhiteSpace size=\"xl\" />\r\n      <ImagePicker\r\n        onChange={onChange}\r\n        files={fileArr}\r\n        selectable={fileArr.length < 4}\r\n      />\r\n      <WhiteSpace size=\"xl\" />\r\n\r\n      <PrimaryButton type=\"primary\" mt=\"200px\" onClick={handleSubmit}>\r\n        提交\r\n      </PrimaryButton>\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default Feedback;\r\n"],"sourceRoot":""}