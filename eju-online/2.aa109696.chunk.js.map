{"version":3,"sources":["pages/UserCenter/utils/exif/index.js","components/TabBar/styles.ts","components/TabBar/TabBar.tsx","pages/Library/Library.tsx","pages/Library/utils/filterArr.ts","pages/UserCenter/images/avatar-default.jpg","pages/Find/styles.ts","pages/Find/images/icon-star2.svg","pages/Find/Ladder/Ladder.tsx","pages/Find/utils/getLevel.ts","pages/Find/Strength/Radar.tsx","pages/Find/Strength/SubjectParsing.tsx","pages/Find/Strength/Strength.tsx","pages/Find/Predict/Predict.tsx","pages/Find/Find.tsx","pages/UserCenter/images/bg.jpg","pages/UserCenter/styles.ts","pages/UserCenter/utils/chooseImg.ts","pages/UserCenter/UserCenter.tsx","pages/Home/Home.tsx"],"names":["debug","EXIF","obj","this","EXIFwrapped","module","exports","ExifTags","Tags","TiffTags","GPSTags","0","IFD1Tags","StringValues","ExposureProgram","1","2","3","4","5","6","7","8","MeteringMode","255","LightSource","9","10","11","12","13","14","15","17","18","19","20","21","22","23","24","Flash","SensingMethod","SceneCaptureType","SceneType","CustomRendered","WhiteBalance","GainControl","Contrast","Saturation","Sharpness","SubjectDistanceRange","FileSource","Components","imageHasData","img","exifdata","getImageData","callback","handleBinaryFile","binFile","data","findEXIFinJPEG","iptcdata","file","dataView","DataView","getUint8","offset","length","byteLength","isFieldSegmentStart","nameHeaderLength","readIPTCData","getUint16","findIPTCinJPEG","isXmpEnabled","xmpdata","self","dom","DOMParser","getStringFromDB","startOffset","sectionLength","xmpString","xmpEndIndex","indexOf","indexOfXmp","substring","slice","xml2Object","parseFromString","findXMPinJPEG","call","src","test","base64","contentType","match","replace","binary","atob","len","buffer","ArrayBuffer","view","Uint8Array","i","charCodeAt","base64ToArrayBuffer","fileReader","FileReader","onload","e","target","result","url","http","XMLHttpRequest","open","responseType","status","response","send","objectURLToBlob","blob","readAsArrayBuffer","Blob","File","readEXIFData","IptcFieldMap","fieldValue","fieldName","dataSize","segmentType","segmentStartPos","getInt16","hasOwnProperty","Array","push","readTags","tiffStart","dirStart","strings","bigEnd","entryOffset","entries","tags","readTagValue","vals","val","n","numerator","denominator","type","numValues","getUint32","valueOffset","Number","getInt32","start","outstr","String","fromCharCode","tag","exifData","gpsData","tiffOffset","firstIFDOffset","ExifIFDPointer","GPSInfoIFDPointer","IFD1OffsetPointer","getNextIFDOffset","thumbTags","JpegIFOffset","JpegIFByteCount","tOffset","tLength","readThumbnailImage","xml2json","xml","json","nodeType","attributes","j","attribute","item","nodeName","nodeValue","hasChildNodes","childNodes","child","old","children","idx","itemAtt","dataKey","dataValue","undefined","textContent","enableXmp","disableXmp","getData","Image","HTMLImageElement","complete","getTag","getIptcTag","getAllTags","a","getAllIptcTags","pretty","strPretty","readFromBinaryFile","themeColor","pkg","theme","TabBarBox","styled","div","BottomBlank","TabBarInner","TabBarItem","ItemIcon","span","ItemTitle","TabBar","props","handelClick","onClick","className","Library","useState","value","label","subjectArr","setSubjectArr","userInfo","useQuery","USER_SHOW","useLazyQuery","QUERY_SUBJECT","subjectReq","sujectData","subjectLoading","loading","SUBJECT_TAGS","subjectTagsReq","subjectTagsData","subjectTagLoading","subjectTags","getUserTagAbilities","subjectExams","getExamHistoryBySubject","filterExam","useMemo","arr","comMap","resultArr","forEach","sourceType","Object","keys","key","filterSourceType","filterExamHis","resultMap","examId","filterExamId","useContext","ProviderContext","state","dispatch","tabType","ejuSubjectValue","history","useHistory","handleTabChange","tabTypeToSourceType","setAbilities","useCallback","prevTag","abilities","startArr","tagId","abilityValue","Math","round","getQuick","map","_id","name","Header","title","Body","item2","name2","_id2","children2","Panel","header","style","marginBottom","item3","name3","_id3","size","inline","subject","handleToExamInfo","exam","getExam","examEnum","examDate","date","dateToYear","bestPoints","examHis","getTopic","useEffect","variables","typeSubjects","stringArrToPickArr","subjectEnum","hide","userData","getUserInfo","avatar","cols","onOk","changeEjuSubject","PickItem","placeholder","Page","TabBox","TabItem","InfoBox","InfoLi","InfoItem","IconStar","StrengthInner","StrengthContent","StrengthScroll","SelectBox","SelectBoxItem","Table","table","Tr","tr","Td","td","Th","th","PredictBox","PredictBoxButton","button","PredictBoxFont","PredictSelect","PredictScroll","PredictContent","LadderBox","LadderContent","RankHeader","ItemFirst","ItemSecond","pl","ItemThird","RankList","RankItem","RankItemCenter","RankItemStart","RankAvatar","prop","RankName","RankItemEnd","RankIcon","SelectItem","IconArrow","Ladder","rankNum","subjectPointsArr","FIND_RANK","fetchPolicy","getRank","findRankData","rankArr","findRank","rankValue","setRankValue","rankData","setRankData","showMy","setShowmy","getSubjectRank","subjectRankThisWeek","initData","param","pointsLabel","getPointsLabel","rankSet","index","rank","userName","point","isHigher","dw","getRankItem","getLevel","level","Radar","subjectPoint","score","width","window","screen","chart","F2","Chart","id","pixelRatio","devicePixelRatio","padding","height","coord","source","values","axis","text","total","top","grid","line","area","position","color","animate","appear","animation","stroke","lineWidth","delay","legend","custom","items","marker","fill","render","tableListData","getTabelData","SubjectParsing","pointsData","setPointData","pointsValue","setPointValue","subjectvalue","setSubjectValue","SUBJECT_TAGS_ONLY","getTags","tagsLoading","FIND_TAG","onCompleted","res","handleAbility","getAbilityTag","tagsArrRef","useRef","chartRef","findAbilityTag","abilityValues","tagName","showParsing","tagsData","tagsArr","current","appendPadding","scale","ticks","getLabelFromValue","Strength","handleStrengthTabChang","strengthTab","tabs","sub","page","onChange","tab","Predict","school","setSchool","totalData","setTotalData","goalSchool","setGoalSchool","ejuSubject","setEjuSubject","department","setDepartment","probability","setProbability","english","jap","jap_writing","math","physics","chemistry","recommendPoint","setRecommendPoint","recommendPointData","verticalAlign","APIHelper","getSchool","then","filterArr","getGoalSchool","getSubject","departments","handleSchool","schoolName","toFixed","school_id","ja","phy","che","jaw","predict","code","ability","handlePredict","sourceData","goalPoint","goalLevel","itemData","Find","FIND_GENERAL_ABILITY","generalAbility","findSujectData","FIND_SUBJECT","predicterPoints","PREDICTED_POINTS","findPredictedPoints","totalRankThisWeek","findPointsSubject","totalPoint","findSubjectArr","findSubjects","findGeneralAbility","setTabType","setRankNum","subjectFilterArr","setSubjectFilterArr","findSubjectFilterArr","setFindSubjectFilterArr","setStrengthTab","getTabContent","ele","nickName","getStar","starArr","getInfo","Item1","Item2","Item3","Item4","PersonBg","PersonInner","PersonBgInner","bg","AvatarBox","Avatar","AvatarUpload","input","NickBox","NickName","Sign","FucList","FucListItem","FucListItemTop","FucListItemBottom","MenuBox","MenuItem","MenuLabel","MenuIcon","MsgNum","compressImg","imgBase64","sizeNum","Promise","resolve","reject","canvas","document","createElement","context","getContext","onerror","Error","w","h","orient","getPhotoOrientation","save","translate","rotate","PI","drawImage","restore","imgCompressed","toDataURL","chooseImg","checkImg","reader","readAsDataURL","imageBase64","catch","pressError","UserCenter","msgNum","QUERY_MSG_NUM","signature","avatarBase64","setAvatarBase64","useMutation","UPDATE_USER_INFO","onError","updateUserInfo","avatarStr","avatarDefault","handleMenu","accept","fileData","files","getElementById","offsetWidth","userInfoInput","getImg","getUnreadMessageCount","Home","setType","location","useLocation","pathname","handleClick","clickType"],"mappings":"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","file":"2.aa109696.chunk.js","sourcesContent":["/* eslint-disable */\r\n(function () {\r\n  var debug = false;\r\n\r\n  var root = this;\r\n\r\n  var EXIF = function (obj) {\r\n    if (obj instanceof EXIF) return obj;\r\n    if (!(this instanceof EXIF)) return new EXIF(obj);\r\n    this.EXIFwrapped = obj;\r\n  };\r\n\r\n  if (typeof exports !== 'undefined') {\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n      exports = module.exports = EXIF;\r\n    }\r\n    exports.EXIF = EXIF;\r\n  } else {\r\n    root.EXIF = EXIF;\r\n  }\r\n\r\n  var ExifTags = (EXIF.Tags = {\r\n    // version tags\r\n    0x9000: 'ExifVersion', // EXIF version\r\n    0xa000: 'FlashpixVersion', // Flashpix format version\r\n\r\n    // colorspace tags\r\n    0xa001: 'ColorSpace', // Color space information tag\r\n\r\n    // image configuration\r\n    0xa002: 'PixelXDimension', // Valid width of meaningful image\r\n    0xa003: 'PixelYDimension', // Valid height of meaningful image\r\n    0x9101: 'ComponentsConfiguration', // Information about channels\r\n    0x9102: 'CompressedBitsPerPixel', // Compressed bits per pixel\r\n\r\n    // user information\r\n    0x927c: 'MakerNote', // Any desired information written by the manufacturer\r\n    0x9286: 'UserComment', // Comments by user\r\n\r\n    // related file\r\n    0xa004: 'RelatedSoundFile', // Name of related sound file\r\n\r\n    // date and time\r\n    0x9003: 'DateTimeOriginal', // Date and time when the original image was generated\r\n    0x9004: 'DateTimeDigitized', // Date and time when the image was stored digitally\r\n    0x9290: 'SubsecTime', // Fractions of seconds for DateTime\r\n    0x9291: 'SubsecTimeOriginal', // Fractions of seconds for DateTimeOriginal\r\n    0x9292: 'SubsecTimeDigitized', // Fractions of seconds for DateTimeDigitized\r\n\r\n    // picture-taking conditions\r\n    0x829a: 'ExposureTime', // Exposure time (in seconds)\r\n    0x829d: 'FNumber', // F number\r\n    0x8822: 'ExposureProgram', // Exposure program\r\n    0x8824: 'SpectralSensitivity', // Spectral sensitivity\r\n    0x8827: 'ISOSpeedRatings', // ISO speed rating\r\n    0x8828: 'OECF', // Optoelectric conversion factor\r\n    0x9201: 'ShutterSpeedValue', // Shutter speed\r\n    0x9202: 'ApertureValue', // Lens aperture\r\n    0x9203: 'BrightnessValue', // Value of brightness\r\n    0x9204: 'ExposureBias', // Exposure bias\r\n    0x9205: 'MaxApertureValue', // Smallest F number of lens\r\n    0x9206: 'SubjectDistance', // Distance to subject in meters\r\n    0x9207: 'MeteringMode', // Metering mode\r\n    0x9208: 'LightSource', // Kind of light source\r\n    0x9209: 'Flash', // Flash status\r\n    0x9214: 'SubjectArea', // Location and area of main subject\r\n    0x920a: 'FocalLength', // Focal length of the lens in mm\r\n    0xa20b: 'FlashEnergy', // Strobe energy in BCPS\r\n    0xa20c: 'SpatialFrequencyResponse', //\r\n    0xa20e: 'FocalPlaneXResolution', // Number of pixels in width direction per FocalPlaneResolutionUnit\r\n    0xa20f: 'FocalPlaneYResolution', // Number of pixels in height direction per FocalPlaneResolutionUnit\r\n    0xa210: 'FocalPlaneResolutionUnit', // Unit for measuring FocalPlaneXResolution and FocalPlaneYResolution\r\n    0xa214: 'SubjectLocation', // Location of subject in image\r\n    0xa215: 'ExposureIndex', // Exposure index selected on camera\r\n    0xa217: 'SensingMethod', // Image sensor type\r\n    0xa300: 'FileSource', // Image source (3 == DSC)\r\n    0xa301: 'SceneType', // Scene type (1 == directly photographed)\r\n    0xa302: 'CFAPattern', // Color filter array geometric pattern\r\n    0xa401: 'CustomRendered', // Special processing\r\n    0xa402: 'ExposureMode', // Exposure mode\r\n    0xa403: 'WhiteBalance', // 1 = auto white balance, 2 = manual\r\n    0xa404: 'DigitalZoomRation', // Digital zoom ratio\r\n    0xa405: 'FocalLengthIn35mmFilm', // Equivalent foacl length assuming 35mm film camera (in mm)\r\n    0xa406: 'SceneCaptureType', // Type of scene\r\n    0xa407: 'GainControl', // Degree of overall image gain adjustment\r\n    0xa408: 'Contrast', // Direction of contrast processing applied by camera\r\n    0xa409: 'Saturation', // Direction of saturation processing applied by camera\r\n    0xa40a: 'Sharpness', // Direction of sharpness processing applied by camera\r\n    0xa40b: 'DeviceSettingDescription', //\r\n    0xa40c: 'SubjectDistanceRange', // Distance to subject\r\n\r\n    // other tags\r\n    0xa005: 'InteroperabilityIFDPointer',\r\n    0xa420: 'ImageUniqueID', // Identifier assigned uniquely to each image\r\n  });\r\n\r\n  var TiffTags = (EXIF.TiffTags = {\r\n    0x0100: 'ImageWidth',\r\n    0x0101: 'ImageHeight',\r\n    0x8769: 'ExifIFDPointer',\r\n    0x8825: 'GPSInfoIFDPointer',\r\n    0xa005: 'InteroperabilityIFDPointer',\r\n    0x0102: 'BitsPerSample',\r\n    0x0103: 'Compression',\r\n    0x0106: 'PhotometricInterpretation',\r\n    0x0112: 'Orientation',\r\n    0x0115: 'SamplesPerPixel',\r\n    0x011c: 'PlanarConfiguration',\r\n    0x0212: 'YCbCrSubSampling',\r\n    0x0213: 'YCbCrPositioning',\r\n    0x011a: 'XResolution',\r\n    0x011b: 'YResolution',\r\n    0x0128: 'ResolutionUnit',\r\n    0x0111: 'StripOffsets',\r\n    0x0116: 'RowsPerStrip',\r\n    0x0117: 'StripByteCounts',\r\n    0x0201: 'JPEGInterchangeFormat',\r\n    0x0202: 'JPEGInterchangeFormatLength',\r\n    0x012d: 'TransferFunction',\r\n    0x013e: 'WhitePoint',\r\n    0x013f: 'PrimaryChromaticities',\r\n    0x0211: 'YCbCrCoefficients',\r\n    0x0214: 'ReferenceBlackWhite',\r\n    0x0132: 'DateTime',\r\n    0x010e: 'ImageDescription',\r\n    0x010f: 'Make',\r\n    0x0110: 'Model',\r\n    0x0131: 'Software',\r\n    0x013b: 'Artist',\r\n    0x8298: 'Copyright',\r\n  });\r\n\r\n  var GPSTags = (EXIF.GPSTags = {\r\n    0x0000: 'GPSVersionID',\r\n    0x0001: 'GPSLatitudeRef',\r\n    0x0002: 'GPSLatitude',\r\n    0x0003: 'GPSLongitudeRef',\r\n    0x0004: 'GPSLongitude',\r\n    0x0005: 'GPSAltitudeRef',\r\n    0x0006: 'GPSAltitude',\r\n    0x0007: 'GPSTimeStamp',\r\n    0x0008: 'GPSSatellites',\r\n    0x0009: 'GPSStatus',\r\n    0x000a: 'GPSMeasureMode',\r\n    0x000b: 'GPSDOP',\r\n    0x000c: 'GPSSpeedRef',\r\n    0x000d: 'GPSSpeed',\r\n    0x000e: 'GPSTrackRef',\r\n    0x000f: 'GPSTrack',\r\n    0x0010: 'GPSImgDirectionRef',\r\n    0x0011: 'GPSImgDirection',\r\n    0x0012: 'GPSMapDatum',\r\n    0x0013: 'GPSDestLatitudeRef',\r\n    0x0014: 'GPSDestLatitude',\r\n    0x0015: 'GPSDestLongitudeRef',\r\n    0x0016: 'GPSDestLongitude',\r\n    0x0017: 'GPSDestBearingRef',\r\n    0x0018: 'GPSDestBearing',\r\n    0x0019: 'GPSDestDistanceRef',\r\n    0x001a: 'GPSDestDistance',\r\n    0x001b: 'GPSProcessingMethod',\r\n    0x001c: 'GPSAreaInformation',\r\n    0x001d: 'GPSDateStamp',\r\n    0x001e: 'GPSDifferential',\r\n  });\r\n\r\n  // EXIF 2.3 Spec\r\n  var IFD1Tags = (EXIF.IFD1Tags = {\r\n    0x0100: 'ImageWidth',\r\n    0x0101: 'ImageHeight',\r\n    0x0102: 'BitsPerSample',\r\n    0x0103: 'Compression',\r\n    0x0106: 'PhotometricInterpretation',\r\n    0x0111: 'StripOffsets',\r\n    0x0112: 'Orientation',\r\n    0x0115: 'SamplesPerPixel',\r\n    0x0116: 'RowsPerStrip',\r\n    0x0117: 'StripByteCounts',\r\n    0x011a: 'XResolution',\r\n    0x011b: 'YResolution',\r\n    0x011c: 'PlanarConfiguration',\r\n    0x0128: 'ResolutionUnit',\r\n    0x0201: 'JpegIFOffset', // When image format is JPEG, this value show offset to JPEG data stored.(aka \"ThumbnailOffset\" or \"JPEGInterchangeFormat\")\r\n    0x0202: 'JpegIFByteCount', // When image format is JPEG, this value shows data size of JPEG image (aka \"ThumbnailLength\" or \"JPEGInterchangeFormatLength\")\r\n    0x0211: 'YCbCrCoefficients',\r\n    0x0212: 'YCbCrSubSampling',\r\n    0x0213: 'YCbCrPositioning',\r\n    0x0214: 'ReferenceBlackWhite',\r\n  });\r\n\r\n  var StringValues = (EXIF.StringValues = {\r\n    ExposureProgram: {\r\n      0: 'Not defined',\r\n      1: 'Manual',\r\n      2: 'Normal program',\r\n      3: 'Aperture priority',\r\n      4: 'Shutter priority',\r\n      5: 'Creative program',\r\n      6: 'Action program',\r\n      7: 'Portrait mode',\r\n      8: 'Landscape mode',\r\n    },\r\n    MeteringMode: {\r\n      0: 'Unknown',\r\n      1: 'Average',\r\n      2: 'CenterWeightedAverage',\r\n      3: 'Spot',\r\n      4: 'MultiSpot',\r\n      5: 'Pattern',\r\n      6: 'Partial',\r\n      255: 'Other',\r\n    },\r\n    LightSource: {\r\n      0: 'Unknown',\r\n      1: 'Daylight',\r\n      2: 'Fluorescent',\r\n      3: 'Tungsten (incandescent light)',\r\n      4: 'Flash',\r\n      9: 'Fine weather',\r\n      10: 'Cloudy weather',\r\n      11: 'Shade',\r\n      12: 'Daylight fluorescent (D 5700 - 7100K)',\r\n      13: 'Day white fluorescent (N 4600 - 5400K)',\r\n      14: 'Cool white fluorescent (W 3900 - 4500K)',\r\n      15: 'White fluorescent (WW 3200 - 3700K)',\r\n      17: 'Standard light A',\r\n      18: 'Standard light B',\r\n      19: 'Standard light C',\r\n      20: 'D55',\r\n      21: 'D65',\r\n      22: 'D75',\r\n      23: 'D50',\r\n      24: 'ISO studio tungsten',\r\n      255: 'Other',\r\n    },\r\n    Flash: {\r\n      0x0000: 'Flash did not fire',\r\n      0x0001: 'Flash fired',\r\n      0x0005: 'Strobe return light not detected',\r\n      0x0007: 'Strobe return light detected',\r\n      0x0009: 'Flash fired, compulsory flash mode',\r\n      0x000d: 'Flash fired, compulsory flash mode, return light not detected',\r\n      0x000f: 'Flash fired, compulsory flash mode, return light detected',\r\n      0x0010: 'Flash did not fire, compulsory flash mode',\r\n      0x0018: 'Flash did not fire, auto mode',\r\n      0x0019: 'Flash fired, auto mode',\r\n      0x001d: 'Flash fired, auto mode, return light not detected',\r\n      0x001f: 'Flash fired, auto mode, return light detected',\r\n      0x0020: 'No flash function',\r\n      0x0041: 'Flash fired, red-eye reduction mode',\r\n      0x0045: 'Flash fired, red-eye reduction mode, return light not detected',\r\n      0x0047: 'Flash fired, red-eye reduction mode, return light detected',\r\n      0x0049: 'Flash fired, compulsory flash mode, red-eye reduction mode',\r\n      0x004d:\r\n        'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',\r\n      0x004f:\r\n        'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',\r\n      0x0059: 'Flash fired, auto mode, red-eye reduction mode',\r\n      0x005d:\r\n        'Flash fired, auto mode, return light not detected, red-eye reduction mode',\r\n      0x005f:\r\n        'Flash fired, auto mode, return light detected, red-eye reduction mode',\r\n    },\r\n    SensingMethod: {\r\n      1: 'Not defined',\r\n      2: 'One-chip color area sensor',\r\n      3: 'Two-chip color area sensor',\r\n      4: 'Three-chip color area sensor',\r\n      5: 'Color sequential area sensor',\r\n      7: 'Trilinear sensor',\r\n      8: 'Color sequential linear sensor',\r\n    },\r\n    SceneCaptureType: {\r\n      0: 'Standard',\r\n      1: 'Landscape',\r\n      2: 'Portrait',\r\n      3: 'Night scene',\r\n    },\r\n    SceneType: {\r\n      1: 'Directly photographed',\r\n    },\r\n    CustomRendered: {\r\n      0: 'Normal process',\r\n      1: 'Custom process',\r\n    },\r\n    WhiteBalance: {\r\n      0: 'Auto white balance',\r\n      1: 'Manual white balance',\r\n    },\r\n    GainControl: {\r\n      0: 'None',\r\n      1: 'Low gain up',\r\n      2: 'High gain up',\r\n      3: 'Low gain down',\r\n      4: 'High gain down',\r\n    },\r\n    Contrast: {\r\n      0: 'Normal',\r\n      1: 'Soft',\r\n      2: 'Hard',\r\n    },\r\n    Saturation: {\r\n      0: 'Normal',\r\n      1: 'Low saturation',\r\n      2: 'High saturation',\r\n    },\r\n    Sharpness: {\r\n      0: 'Normal',\r\n      1: 'Soft',\r\n      2: 'Hard',\r\n    },\r\n    SubjectDistanceRange: {\r\n      0: 'Unknown',\r\n      1: 'Macro',\r\n      2: 'Close view',\r\n      3: 'Distant view',\r\n    },\r\n    FileSource: {\r\n      3: 'DSC',\r\n    },\r\n\r\n    Components: {\r\n      0: '',\r\n      1: 'Y',\r\n      2: 'Cb',\r\n      3: 'Cr',\r\n      4: 'R',\r\n      5: 'G',\r\n      6: 'B',\r\n    },\r\n  });\r\n\r\n  function addEvent(element, event, handler) {\r\n    if (element.addEventListener) {\r\n      element.addEventListener(event, handler, false);\r\n    } else if (element.attachEvent) {\r\n      element.attachEvent('on' + event, handler);\r\n    }\r\n  }\r\n\r\n  function imageHasData(img) {\r\n    return !!img.exifdata;\r\n  }\r\n\r\n  function base64ToArrayBuffer(base64, contentType) {\r\n    contentType =\r\n      contentType || base64.match(/^data\\:([^\\;]+)\\;base64,/im)[1] || ''; // e.g. 'data:image/jpeg;base64,...' => 'image/jpeg'\r\n    base64 = base64.replace(/^data\\:([^\\;]+)\\;base64,/gim, '');\r\n    var binary = atob(base64);\r\n    var len = binary.length;\r\n    var buffer = new ArrayBuffer(len);\r\n    var view = new Uint8Array(buffer);\r\n    for (var i = 0; i < len; i++) {\r\n      view[i] = binary.charCodeAt(i);\r\n    }\r\n    return buffer;\r\n  }\r\n\r\n  function objectURLToBlob(url, callback) {\r\n    var http = new XMLHttpRequest();\r\n    http.open('GET', url, true);\r\n    http.responseType = 'blob';\r\n    http.onload = function (e) {\r\n      if (this.status == 200 || this.status === 0) {\r\n        callback(this.response);\r\n      }\r\n    };\r\n    http.send();\r\n  }\r\n\r\n  function getImageData(img, callback) {\r\n    function handleBinaryFile(binFile) {\r\n      var data = findEXIFinJPEG(binFile);\r\n      img.exifdata = data || {};\r\n      var iptcdata = findIPTCinJPEG(binFile);\r\n      img.iptcdata = iptcdata || {};\r\n      if (EXIF.isXmpEnabled) {\r\n        var xmpdata = findXMPinJPEG(binFile);\r\n        img.xmpdata = xmpdata || {};\r\n      }\r\n      if (callback) {\r\n        callback.call(img);\r\n      }\r\n    }\r\n\r\n    if (img.src) {\r\n      if (/^data\\:/i.test(img.src)) {\r\n        // Data URI\r\n        var arrayBuffer = base64ToArrayBuffer(img.src);\r\n        handleBinaryFile(arrayBuffer);\r\n      } else if (/^blob\\:/i.test(img.src)) {\r\n        // Object URL\r\n        var fileReader = new FileReader();\r\n        fileReader.onload = function (e) {\r\n          handleBinaryFile(e.target.result);\r\n        };\r\n        objectURLToBlob(img.src, function (blob) {\r\n          fileReader.readAsArrayBuffer(blob);\r\n        });\r\n      } else {\r\n        var http = new XMLHttpRequest();\r\n        http.onload = function () {\r\n          if (this.status == 200 || this.status === 0) {\r\n            handleBinaryFile(http.response);\r\n          } else {\r\n            throw 'Could not load image';\r\n          }\r\n          http = null;\r\n        };\r\n        http.open('GET', img.src, true);\r\n        http.responseType = 'arraybuffer';\r\n        http.send(null);\r\n      }\r\n    } else if (\r\n      self.FileReader &&\r\n      (img instanceof self.Blob || img instanceof self.File)\r\n    ) {\r\n      var fileReader = new FileReader();\r\n      fileReader.onload = function (e) {\r\n        if (debug)\r\n          console.log('Got file of length ' + e.target.result.byteLength);\r\n        handleBinaryFile(e.target.result);\r\n      };\r\n\r\n      fileReader.readAsArrayBuffer(img);\r\n    }\r\n  }\r\n\r\n  function findEXIFinJPEG(file) {\r\n    var dataView = new DataView(file);\r\n\r\n    if (debug) console.log('Got file of length ' + file.byteLength);\r\n    if (dataView.getUint8(0) != 0xff || dataView.getUint8(1) != 0xd8) {\r\n      if (debug) console.log('Not a valid JPEG');\r\n      return false; // not a valid jpeg\r\n    }\r\n\r\n    var offset = 2,\r\n      length = file.byteLength,\r\n      marker;\r\n\r\n    while (offset < length) {\r\n      if (dataView.getUint8(offset) != 0xff) {\r\n        if (debug)\r\n          console.log(\r\n            'Not a valid marker at offset ' +\r\n              offset +\r\n              ', found: ' +\r\n              dataView.getUint8(offset)\r\n          );\r\n        return false; // not a valid marker, something is wrong\r\n      }\r\n\r\n      marker = dataView.getUint8(offset + 1);\r\n      if (debug) console.log(marker);\r\n\r\n      // we could implement handling for other markers here,\r\n      // but we're only looking for 0xFFE1 for EXIF data\r\n\r\n      if (marker == 225) {\r\n        if (debug) console.log('Found 0xFFE1 marker');\r\n\r\n        return readEXIFData(\r\n          dataView,\r\n          offset + 4,\r\n          dataView.getUint16(offset + 2) - 2\r\n        );\r\n\r\n        // offset += 2 + file.getShortAt(offset+2, true);\r\n      } else {\r\n        offset += 2 + dataView.getUint16(offset + 2);\r\n      }\r\n    }\r\n  }\r\n\r\n  function findIPTCinJPEG(file) {\r\n    var dataView = new DataView(file);\r\n\r\n    if (debug) console.log('Got file of length ' + file.byteLength);\r\n    if (dataView.getUint8(0) != 0xff || dataView.getUint8(1) != 0xd8) {\r\n      if (debug) console.log('Not a valid JPEG');\r\n      return false; // not a valid jpeg\r\n    }\r\n\r\n    var offset = 2,\r\n      length = file.byteLength;\r\n\r\n    var isFieldSegmentStart = function (dataView, offset) {\r\n      return (\r\n        dataView.getUint8(offset) === 0x38 &&\r\n        dataView.getUint8(offset + 1) === 0x42 &&\r\n        dataView.getUint8(offset + 2) === 0x49 &&\r\n        dataView.getUint8(offset + 3) === 0x4d &&\r\n        dataView.getUint8(offset + 4) === 0x04 &&\r\n        dataView.getUint8(offset + 5) === 0x04\r\n      );\r\n    };\r\n\r\n    while (offset < length) {\r\n      if (isFieldSegmentStart(dataView, offset)) {\r\n        // Get the length of the name header (which is padded to an even number of bytes)\r\n        var nameHeaderLength = dataView.getUint8(offset + 7);\r\n        if (nameHeaderLength % 2 !== 0) nameHeaderLength += 1;\r\n        // Check for pre photoshop 6 format\r\n        if (nameHeaderLength === 0) {\r\n          // Always 4\r\n          nameHeaderLength = 4;\r\n        }\r\n\r\n        var startOffset = offset + 8 + nameHeaderLength;\r\n        var sectionLength = dataView.getUint16(offset + 6 + nameHeaderLength);\r\n\r\n        return readIPTCData(file, startOffset, sectionLength);\r\n\r\n        break;\r\n      }\r\n\r\n      // Not the marker, continue searching\r\n      offset++;\r\n    }\r\n  }\r\n  var IptcFieldMap = {\r\n    0x78: 'caption',\r\n    0x6e: 'credit',\r\n    0x19: 'keywords',\r\n    0x37: 'dateCreated',\r\n    0x50: 'byline',\r\n    0x55: 'bylineTitle',\r\n    0x7a: 'captionWriter',\r\n    0x69: 'headline',\r\n    0x74: 'copyright',\r\n    0x0f: 'category',\r\n  };\r\n  function readIPTCData(file, startOffset, sectionLength) {\r\n    var dataView = new DataView(file);\r\n    var data = {};\r\n    var fieldValue, fieldName, dataSize, segmentType, segmentSize;\r\n    var segmentStartPos = startOffset;\r\n    while (segmentStartPos < startOffset + sectionLength) {\r\n      if (\r\n        dataView.getUint8(segmentStartPos) === 0x1c &&\r\n        dataView.getUint8(segmentStartPos + 1) === 0x02\r\n      ) {\r\n        segmentType = dataView.getUint8(segmentStartPos + 2);\r\n        if (segmentType in IptcFieldMap) {\r\n          dataSize = dataView.getInt16(segmentStartPos + 3);\r\n          segmentSize = dataSize + 5;\r\n          fieldName = IptcFieldMap[segmentType];\r\n          fieldValue = getStringFromDB(dataView, segmentStartPos + 5, dataSize);\r\n          // Check if we already stored a value with this name\r\n          if (data.hasOwnProperty(fieldName)) {\r\n            // Value already stored with this name, create multivalue field\r\n            if (data[fieldName] instanceof Array) {\r\n              data[fieldName].push(fieldValue);\r\n            } else {\r\n              data[fieldName] = [data[fieldName], fieldValue];\r\n            }\r\n          } else {\r\n            data[fieldName] = fieldValue;\r\n          }\r\n        }\r\n      }\r\n      segmentStartPos++;\r\n    }\r\n    return data;\r\n  }\r\n\r\n  function readTags(file, tiffStart, dirStart, strings, bigEnd) {\r\n    var entries = file.getUint16(dirStart, !bigEnd),\r\n      tags = {},\r\n      entryOffset,\r\n      tag,\r\n      i;\r\n\r\n    for (i = 0; i < entries; i++) {\r\n      entryOffset = dirStart + i * 12 + 2;\r\n      tag = strings[file.getUint16(entryOffset, !bigEnd)];\r\n      if (!tag && debug)\r\n        console.log('Unknown tag: ' + file.getUint16(entryOffset, !bigEnd));\r\n      tags[tag] = readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd);\r\n    }\r\n    return tags;\r\n  }\r\n\r\n  function readTagValue(file, entryOffset, tiffStart, dirStart, bigEnd) {\r\n    var type = file.getUint16(entryOffset + 2, !bigEnd),\r\n      numValues = file.getUint32(entryOffset + 4, !bigEnd),\r\n      valueOffset = file.getUint32(entryOffset + 8, !bigEnd) + tiffStart,\r\n      offset,\r\n      vals,\r\n      val,\r\n      n,\r\n      numerator,\r\n      denominator;\r\n\r\n    switch (type) {\r\n      case 1: // byte, 8-bit unsigned int\r\n      case 7: // undefined, 8-bit byte, value depending on field\r\n        if (numValues == 1) {\r\n          return file.getUint8(entryOffset + 8, !bigEnd);\r\n        } else {\r\n          offset = numValues > 4 ? valueOffset : entryOffset + 8;\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] = file.getUint8(offset + n);\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 2: // ascii, 8-bit byte\r\n        offset = numValues > 4 ? valueOffset : entryOffset + 8;\r\n        return getStringFromDB(file, offset, numValues - 1);\r\n\r\n      case 3: // short, 16 bit int\r\n        if (numValues == 1) {\r\n          return file.getUint16(entryOffset + 8, !bigEnd);\r\n        } else {\r\n          offset = numValues > 2 ? valueOffset : entryOffset + 8;\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] = file.getUint16(offset + 2 * n, !bigEnd);\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 4: // long, 32 bit int\r\n        if (numValues == 1) {\r\n          return file.getUint32(entryOffset + 8, !bigEnd);\r\n        } else {\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] = file.getUint32(valueOffset + 4 * n, !bigEnd);\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 5: // rational = two long values, first is numerator, second is denominator\r\n        if (numValues == 1) {\r\n          numerator = file.getUint32(valueOffset, !bigEnd);\r\n          denominator = file.getUint32(valueOffset + 4, !bigEnd);\r\n          val = new Number(numerator / denominator);\r\n          val.numerator = numerator;\r\n          val.denominator = denominator;\r\n          return val;\r\n        } else {\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            numerator = file.getUint32(valueOffset + 8 * n, !bigEnd);\r\n            denominator = file.getUint32(valueOffset + 4 + 8 * n, !bigEnd);\r\n            vals[n] = new Number(numerator / denominator);\r\n            vals[n].numerator = numerator;\r\n            vals[n].denominator = denominator;\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 9: // slong, 32 bit signed int\r\n        if (numValues == 1) {\r\n          return file.getInt32(entryOffset + 8, !bigEnd);\r\n        } else {\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] = file.getInt32(valueOffset + 4 * n, !bigEnd);\r\n          }\r\n          return vals;\r\n        }\r\n\r\n      case 10: // signed rational, two slongs, first is numerator, second is denominator\r\n        if (numValues == 1) {\r\n          return (\r\n            file.getInt32(valueOffset, !bigEnd) /\r\n            file.getInt32(valueOffset + 4, !bigEnd)\r\n          );\r\n        } else {\r\n          vals = [];\r\n          for (n = 0; n < numValues; n++) {\r\n            vals[n] =\r\n              file.getInt32(valueOffset + 8 * n, !bigEnd) /\r\n              file.getInt32(valueOffset + 4 + 8 * n, !bigEnd);\r\n          }\r\n          return vals;\r\n        }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Given an IFD (Image File Directory) start offset\r\n   * returns an offset to next IFD or 0 if it's the last IFD.\r\n   */\r\n  function getNextIFDOffset(dataView, dirStart, bigEnd) {\r\n    //the first 2bytes means the number of directory entries contains in this IFD\r\n    var entries = dataView.getUint16(dirStart, !bigEnd);\r\n\r\n    // After last directory entry, there is a 4bytes of data,\r\n    // it means an offset to next IFD.\r\n    // If its value is '0x00000000', it means this is the last IFD and there is no linked IFD.\r\n\r\n    return dataView.getUint32(dirStart + 2 + entries * 12, !bigEnd); // each entry is 12 bytes long\r\n  }\r\n\r\n  function readThumbnailImage(dataView, tiffStart, firstIFDOffset, bigEnd) {\r\n    // get the IFD1 offset\r\n    var IFD1OffsetPointer = getNextIFDOffset(\r\n      dataView,\r\n      tiffStart + firstIFDOffset,\r\n      bigEnd\r\n    );\r\n\r\n    if (!IFD1OffsetPointer) {\r\n      // console.log('******** IFD1Offset is empty, image thumb not found ********');\r\n      return {};\r\n    } else if (IFD1OffsetPointer > dataView.byteLength) {\r\n      // this should not happen\r\n      // console.log('******** IFD1Offset is outside the bounds of the DataView ********');\r\n      return {};\r\n    }\r\n    // console.log('*******  thumbnail IFD offset (IFD1) is: %s', IFD1OffsetPointer);\r\n\r\n    var thumbTags = readTags(\r\n      dataView,\r\n      tiffStart,\r\n      tiffStart + IFD1OffsetPointer,\r\n      IFD1Tags,\r\n      bigEnd\r\n    );\r\n\r\n    // EXIF 2.3 specification for JPEG format thumbnail\r\n\r\n    // If the value of Compression(0x0103) Tag in IFD1 is '6', thumbnail image format is JPEG.\r\n    // Most of Exif image uses JPEG format for thumbnail. In that case, you can get offset of thumbnail\r\n    // by JpegIFOffset(0x0201) Tag in IFD1, size of thumbnail by JpegIFByteCount(0x0202) Tag.\r\n    // Data format is ordinary JPEG format, starts from 0xFFD8 and ends by 0xFFD9. It seems that\r\n    // JPEG format and 160x120pixels of size are recommended thumbnail format for Exif2.1 or later.\r\n\r\n    if (thumbTags['Compression']) {\r\n      // console.log('Thumbnail image found!');\r\n\r\n      switch (thumbTags['Compression']) {\r\n        case 6:\r\n          // console.log('Thumbnail image format is JPEG');\r\n          if (thumbTags.JpegIFOffset && thumbTags.JpegIFByteCount) {\r\n            // extract the thumbnail\r\n            var tOffset = tiffStart + thumbTags.JpegIFOffset;\r\n            var tLength = thumbTags.JpegIFByteCount;\r\n            thumbTags['blob'] = new Blob(\r\n              [new Uint8Array(dataView.buffer, tOffset, tLength)],\r\n              {\r\n                type: 'image/jpeg',\r\n              }\r\n            );\r\n          }\r\n          break;\r\n\r\n        case 1:\r\n          console.log(\r\n            'Thumbnail image format is TIFF, which is not implemented.'\r\n          );\r\n          break;\r\n        default:\r\n          console.log(\r\n            \"Unknown thumbnail image format '%s'\",\r\n            thumbTags['Compression']\r\n          );\r\n      }\r\n    } else if (thumbTags['PhotometricInterpretation'] == 2) {\r\n      console.log('Thumbnail image format is RGB, which is not implemented.');\r\n    }\r\n    return thumbTags;\r\n  }\r\n\r\n  function getStringFromDB(buffer, start, length) {\r\n    var outstr = '';\r\n    for (var n = start; n < start + length; n++) {\r\n      outstr += String.fromCharCode(buffer.getUint8(n));\r\n    }\r\n    return outstr;\r\n  }\r\n\r\n  function readEXIFData(file, start) {\r\n    if (getStringFromDB(file, start, 4) != 'Exif') {\r\n      if (debug)\r\n        console.log('Not valid EXIF data! ' + getStringFromDB(file, start, 4));\r\n      return false;\r\n    }\r\n\r\n    var bigEnd,\r\n      tags,\r\n      tag,\r\n      exifData,\r\n      gpsData,\r\n      tiffOffset = start + 6;\r\n\r\n    // test for TIFF validity and endianness\r\n    if (file.getUint16(tiffOffset) == 0x4949) {\r\n      bigEnd = false;\r\n    } else if (file.getUint16(tiffOffset) == 0x4d4d) {\r\n      bigEnd = true;\r\n    } else {\r\n      if (debug) console.log('Not valid TIFF data! (no 0x4949 or 0x4D4D)');\r\n      return false;\r\n    }\r\n\r\n    if (file.getUint16(tiffOffset + 2, !bigEnd) != 0x002a) {\r\n      if (debug) console.log('Not valid TIFF data! (no 0x002A)');\r\n      return false;\r\n    }\r\n\r\n    var firstIFDOffset = file.getUint32(tiffOffset + 4, !bigEnd);\r\n\r\n    if (firstIFDOffset < 0x00000008) {\r\n      if (debug)\r\n        console.log(\r\n          'Not valid TIFF data! (First offset less than 8)',\r\n          file.getUint32(tiffOffset + 4, !bigEnd)\r\n        );\r\n      return false;\r\n    }\r\n\r\n    tags = readTags(\r\n      file,\r\n      tiffOffset,\r\n      tiffOffset + firstIFDOffset,\r\n      TiffTags,\r\n      bigEnd\r\n    );\r\n\r\n    if (tags.ExifIFDPointer) {\r\n      exifData = readTags(\r\n        file,\r\n        tiffOffset,\r\n        tiffOffset + tags.ExifIFDPointer,\r\n        ExifTags,\r\n        bigEnd\r\n      );\r\n      for (tag in exifData) {\r\n        switch (tag) {\r\n          case 'LightSource':\r\n          case 'Flash':\r\n          case 'MeteringMode':\r\n          case 'ExposureProgram':\r\n          case 'SensingMethod':\r\n          case 'SceneCaptureType':\r\n          case 'SceneType':\r\n          case 'CustomRendered':\r\n          case 'WhiteBalance':\r\n          case 'GainControl':\r\n          case 'Contrast':\r\n          case 'Saturation':\r\n          case 'Sharpness':\r\n          case 'SubjectDistanceRange':\r\n          case 'FileSource':\r\n            exifData[tag] = StringValues[tag][exifData[tag]];\r\n            break;\r\n\r\n          case 'ExifVersion':\r\n          case 'FlashpixVersion':\r\n            exifData[tag] = String.fromCharCode(\r\n              exifData[tag][0],\r\n              exifData[tag][1],\r\n              exifData[tag][2],\r\n              exifData[tag][3]\r\n            );\r\n            break;\r\n\r\n          case 'ComponentsConfiguration':\r\n            exifData[tag] =\r\n              StringValues.Components[exifData[tag][0]] +\r\n              StringValues.Components[exifData[tag][1]] +\r\n              StringValues.Components[exifData[tag][2]] +\r\n              StringValues.Components[exifData[tag][3]];\r\n            break;\r\n        }\r\n        tags[tag] = exifData[tag];\r\n      }\r\n    }\r\n\r\n    if (tags.GPSInfoIFDPointer) {\r\n      gpsData = readTags(\r\n        file,\r\n        tiffOffset,\r\n        tiffOffset + tags.GPSInfoIFDPointer,\r\n        GPSTags,\r\n        bigEnd\r\n      );\r\n      for (tag in gpsData) {\r\n        switch (tag) {\r\n          case 'GPSVersionID':\r\n            gpsData[tag] =\r\n              gpsData[tag][0] +\r\n              '.' +\r\n              gpsData[tag][1] +\r\n              '.' +\r\n              gpsData[tag][2] +\r\n              '.' +\r\n              gpsData[tag][3];\r\n            break;\r\n        }\r\n        tags[tag] = gpsData[tag];\r\n      }\r\n    }\r\n\r\n    // extract thumbnail\r\n    tags['thumbnail'] = readThumbnailImage(\r\n      file,\r\n      tiffOffset,\r\n      firstIFDOffset,\r\n      bigEnd\r\n    );\r\n\r\n    return tags;\r\n  }\r\n\r\n  function findXMPinJPEG(file) {\r\n    if (!('DOMParser' in self)) {\r\n      // console.warn('XML parsing not supported without DOMParser');\r\n      return;\r\n    }\r\n    var dataView = new DataView(file);\r\n\r\n    if (debug) console.log('Got file of length ' + file.byteLength);\r\n    if (dataView.getUint8(0) != 0xff || dataView.getUint8(1) != 0xd8) {\r\n      if (debug) console.log('Not a valid JPEG');\r\n      return false; // not a valid jpeg\r\n    }\r\n\r\n    var offset = 2,\r\n      length = file.byteLength,\r\n      dom = new DOMParser();\r\n\r\n    while (offset < length - 4) {\r\n      if (getStringFromDB(dataView, offset, 4) == 'http') {\r\n        var startOffset = offset - 1;\r\n        var sectionLength = dataView.getUint16(offset - 2) - 1;\r\n        var xmpString = getStringFromDB(dataView, startOffset, sectionLength);\r\n        var xmpEndIndex = xmpString.indexOf('xmpmeta>') + 8;\r\n        xmpString = xmpString.substring(\r\n          xmpString.indexOf('<x:xmpmeta'),\r\n          xmpEndIndex\r\n        );\r\n\r\n        var indexOfXmp = xmpString.indexOf('x:xmpmeta') + 10;\r\n        //Many custom written programs embed xmp/xml without any namespace. Following are some of them.\r\n        //Without these namespaces, XML is thought to be invalid by parsers\r\n        xmpString =\r\n          xmpString.slice(0, indexOfXmp) +\r\n          'xmlns:Iptc4xmpCore=\"http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/\" ' +\r\n          'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' +\r\n          'xmlns:tiff=\"http://ns.adobe.com/tiff/1.0/\" ' +\r\n          'xmlns:plus=\"http://schemas.android.com/apk/lib/com.google.android.gms.plus\" ' +\r\n          'xmlns:ext=\"http://www.gettyimages.com/xsltExtension/1.0\" ' +\r\n          'xmlns:exif=\"http://ns.adobe.com/exif/1.0/\" ' +\r\n          'xmlns:stEvt=\"http://ns.adobe.com/xap/1.0/sType/ResourceEvent#\" ' +\r\n          'xmlns:stRef=\"http://ns.adobe.com/xap/1.0/sType/ResourceRef#\" ' +\r\n          'xmlns:crs=\"http://ns.adobe.com/camera-raw-settings/1.0/\" ' +\r\n          'xmlns:xapGImg=\"http://ns.adobe.com/xap/1.0/g/img/\" ' +\r\n          'xmlns:Iptc4xmpExt=\"http://iptc.org/std/Iptc4xmpExt/2008-02-29/\" ' +\r\n          xmpString.slice(indexOfXmp);\r\n\r\n        var domDocument = dom.parseFromString(xmpString, 'text/xml');\r\n        return xml2Object(domDocument);\r\n      } else {\r\n        offset++;\r\n      }\r\n    }\r\n  }\r\n\r\n  function xml2json(xml) {\r\n    var json = {};\r\n\r\n    if (xml.nodeType == 1) {\r\n      // element node\r\n      if (xml.attributes.length > 0) {\r\n        json['@attributes'] = {};\r\n        for (var j = 0; j < xml.attributes.length; j++) {\r\n          var attribute = xml.attributes.item(j);\r\n          json['@attributes'][attribute.nodeName] = attribute.nodeValue;\r\n        }\r\n      }\r\n    } else if (xml.nodeType == 3) {\r\n      // text node\r\n      return xml.nodeValue;\r\n    }\r\n\r\n    // deal with children\r\n    if (xml.hasChildNodes()) {\r\n      for (var i = 0; i < xml.childNodes.length; i++) {\r\n        var child = xml.childNodes.item(i);\r\n        var nodeName = child.nodeName;\r\n        if (json[nodeName] == null) {\r\n          json[nodeName] = xml2json(child);\r\n        } else {\r\n          if (json[nodeName].push == null) {\r\n            var old = json[nodeName];\r\n            json[nodeName] = [];\r\n            json[nodeName].push(old);\r\n          }\r\n          json[nodeName].push(xml2json(child));\r\n        }\r\n      }\r\n    }\r\n\r\n    return json;\r\n  }\r\n\r\n  function xml2Object(xml) {\r\n    try {\r\n      var obj = {};\r\n      if (xml.children.length > 0) {\r\n        for (var i = 0; i < xml.children.length; i++) {\r\n          var item = xml.children.item(i);\r\n          var attributes = item.attributes;\r\n          for (var idx in attributes) {\r\n            var itemAtt = attributes[idx];\r\n            var dataKey = itemAtt.nodeName;\r\n            var dataValue = itemAtt.nodeValue;\r\n\r\n            if (dataKey !== undefined) {\r\n              obj[dataKey] = dataValue;\r\n            }\r\n          }\r\n          var nodeName = item.nodeName;\r\n\r\n          if (typeof obj[nodeName] == 'undefined') {\r\n            obj[nodeName] = xml2json(item);\r\n          } else {\r\n            if (typeof obj[nodeName].push == 'undefined') {\r\n              var old = obj[nodeName];\r\n\r\n              obj[nodeName] = [];\r\n              obj[nodeName].push(old);\r\n            }\r\n            obj[nodeName].push(xml2json(item));\r\n          }\r\n        }\r\n      } else {\r\n        obj = xml.textContent;\r\n      }\r\n      return obj;\r\n    } catch (e) {\r\n      console.log(e.message);\r\n    }\r\n  }\r\n\r\n  EXIF.enableXmp = function () {\r\n    EXIF.isXmpEnabled = true;\r\n  };\r\n\r\n  EXIF.disableXmp = function () {\r\n    EXIF.isXmpEnabled = false;\r\n  };\r\n\r\n  EXIF.getData = function (img, callback) {\r\n    if (\r\n      ((self.Image && img instanceof self.Image) ||\r\n        (self.HTMLImageElement && img instanceof self.HTMLImageElement)) &&\r\n      !img.complete\r\n    )\r\n      return false;\r\n\r\n    if (!imageHasData(img)) {\r\n      getImageData(img, callback);\r\n    } else {\r\n      if (callback) {\r\n        callback.call(img);\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n\r\n  EXIF.getTag = function (img, tag) {\r\n    if (!imageHasData(img)) return;\r\n    return img.exifdata[tag];\r\n  };\r\n\r\n  EXIF.getIptcTag = function (img, tag) {\r\n    if (!imageHasData(img)) return;\r\n    return img.iptcdata[tag];\r\n  };\r\n\r\n  EXIF.getAllTags = function (img) {\r\n    if (!imageHasData(img)) return {};\r\n    var a,\r\n      data = img.exifdata,\r\n      tags = {};\r\n    for (a in data) {\r\n      if (data.hasOwnProperty(a)) {\r\n        tags[a] = data[a];\r\n      }\r\n    }\r\n    return tags;\r\n  };\r\n\r\n  EXIF.getAllIptcTags = function (img) {\r\n    if (!imageHasData(img)) return {};\r\n    var a,\r\n      data = img.iptcdata,\r\n      tags = {};\r\n    for (a in data) {\r\n      if (data.hasOwnProperty(a)) {\r\n        tags[a] = data[a];\r\n      }\r\n    }\r\n    return tags;\r\n  };\r\n\r\n  EXIF.pretty = function (img) {\r\n    if (!imageHasData(img)) return '';\r\n    var a,\r\n      data = img.exifdata,\r\n      strPretty = '';\r\n    for (a in data) {\r\n      if (data.hasOwnProperty(a)) {\r\n        if (typeof data[a] == 'object') {\r\n          if (data[a] instanceof Number) {\r\n            strPretty +=\r\n              a +\r\n              ' : ' +\r\n              data[a] +\r\n              ' [' +\r\n              data[a].numerator +\r\n              '/' +\r\n              data[a].denominator +\r\n              ']\\r\\n';\r\n          } else {\r\n            strPretty += a + ' : [' + data[a].length + ' values]\\r\\n';\r\n          }\r\n        } else {\r\n          strPretty += a + ' : ' + data[a] + '\\r\\n';\r\n        }\r\n      }\r\n    }\r\n    return strPretty;\r\n  };\r\n\r\n  EXIF.readFromBinaryFile = function (file) {\r\n    return findEXIFinJPEG(file);\r\n  };\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n    define('exif-js', [], function () {\r\n      return EXIF;\r\n    });\r\n  }\r\n}.call(this));\r\n","import styled from 'styled-px2vw';\nimport pkg from '../../../package.json';\n\nconst themeColor = pkg.theme['brand-primary'];\n\nexport const TabBarBox = styled.div`\n  background-color: #fafafa;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding-bottom: constant(safe-area-inset-bottom);\n  padding-bottom: env(safe-area-inset-bottom);\n`;\n\nexport const BottomBlank = styled.div`\n  width: 100%;\n  height: 130px;\n  padding-bottom: constant(safe-area-inset-bottom);\n  padding-bottom: env(safe-area-inset-bottom);\n`;\nexport const TabBarInner = styled.div`\n  display: flex;\n  justify-content: space-between;\n  padding: 28px 96px 0;\n`;\nexport const TabBarItem = styled.div`\n  color: #bfbfbf;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow: hidden;\n  &.active {\n    color: ${themeColor};\n  }\n`;\n\nexport const ItemIcon = styled.span`\n  display: inline-block;\n  width: 48px;\n  height: 48px;\n  font-size: 40px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n`;\nexport const ItemTitle = styled.div`\n  font-size: 22px;\n  height: 40px;\n  line-height: 40px;\n`;\n","import React from 'react';\r\nimport {\r\n  TabBarBox,\r\n  TabBarItem,\r\n  TabBarInner,\r\n  ItemIcon,\r\n  ItemTitle,\r\n} from './styles';\r\n\r\ninterface TabBarProps {\r\n  handelClick: (type: string) => void;\r\n  type: string;\r\n}\r\n\r\nconst TabBar: React.FC<TabBarProps> = (props) => {\r\n  const { handelClick, type } = props;\r\n  return (\r\n    <>\r\n      <TabBarBox>\r\n        <TabBarInner>\r\n          <TabBarItem\r\n            onClick={(): void => handelClick('library')}\r\n            className={type === 'library' ? 'active' : ''}\r\n          >\r\n            <ItemIcon className=\"iconfont icon-library\" />\r\n            <ItemTitle>题库</ItemTitle>\r\n          </TabBarItem>\r\n          <TabBarItem\r\n            onClick={(): void => handelClick('find')}\r\n            className={type === 'find' ? 'active' : ''}\r\n          >\r\n            <ItemIcon className=\"iconfont icon-find\" />\r\n            <ItemTitle>发现</ItemTitle>\r\n          </TabBarItem>\r\n          <TabBarItem\r\n            onClick={(): void => handelClick('user-center')}\r\n            className={type === 'user-center' ? 'active' : ''}\r\n          >\r\n            <ItemIcon className=\"iconfont icon-my\" />\r\n            <ItemTitle>我的</ItemTitle>\r\n          </TabBarItem>\r\n        </TabBarInner>\r\n      </TabBarBox>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TabBar;\r\n","import React, {\n  ReactElement,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport {\n  Accordion,\n  Picker,\n  WhiteSpace,\n  Button,\n  Card,\n  Toast,\n} from 'antd-mobile';\nimport PickItem from '@/components/PickItem';\nimport { useHistory } from 'react-router-dom';\nimport { ProviderContext } from '@/reducer/context';\nimport { useLazyQuery, useQuery } from '@apollo/client';\nimport { QUERY_SUBJECT, SUBJECT_TAGS, USER_SHOW } from '@/helpers/APIHelper';\nimport { examEnum, subjectEnum } from '@/constants/globalDatas';\nimport { BottomBlank } from '@/components/TabBar/styles';\nimport {\n  AccordionBottom,\n  AccordionBox,\n  AccordionItem,\n  AccordionLeft,\n  AccordionLeftStarBox,\n  AccordionLeftTite,\n  AccordionRight,\n  Content,\n  Star,\n  StarBox,\n  StarFont,\n  TabBarBox,\n  TabBarFixed,\n  TabBarItem,\n} from './styles';\nimport stringArrToPickArr from './utils/stringArrToPickArr';\nimport { filterSourceType, filterExamId } from './utils/filterArr';\nimport dateToYear from './utils/dateToYear';\n\nconst Library: React.FC = () => {\n  // const [ejuSubjectValue, setEjuSubjectValue] = useState<string[]>(['maths1']); // 科目选中值,默认选中maths1\n  const [subjectArr, setSubjectArr] = useState([{ value: '', label: '' }]); // 科目下拉选项\n  const { data: userInfo } = useQuery(USER_SHOW);\n  const [subjectReq, { data: sujectData, loading: subjectLoading }] =\n    useLazyQuery(QUERY_SUBJECT); // 查询下拉选项数据\n  const [\n    subjectTagsReq,\n    { data: subjectTagsData, loading: subjectTagLoading },\n  ] = useLazyQuery(SUBJECT_TAGS); // 查询该科目下所有题目\n\n  const {\n    subjectTags,\n    getUserTagAbilities,\n    subjectExams = [],\n    getExamHistoryBySubject = [],\n  } = subjectTagsData || {};\n  const filterExam = useMemo(\n    () => filterSourceType(subjectExams),\n    [subjectExams]\n  ); // 过滤后的考试题目\n  const filterExamHis = useMemo(\n    () => filterExamId(getExamHistoryBySubject),\n    [getExamHistoryBySubject]\n  ); // 过滤后的考试记录\n  const { state, dispatch } = useContext(ProviderContext);\n  const { tabType, ejuSubjectValue } = state;\n  const history = useHistory();\n  // 切换标签\n  const handleTabChange = (type: string): void => {\n    dispatch?.({ type: 'setTabType', tabType: type });\n  };\n  // 根据tabType获取相应的sourceType\n  const tabTypeToSourceType = useMemo(() => {\n    switch (tabType) {\n      case 'quick':\n        return 'gaokao';\n      case 'topic':\n      case 'exam':\n        return 'center';\n      default:\n        return '';\n    }\n  }, [tabType]);\n  // 设置星值\n  const setAbilities = useCallback(\n    (prevTag: string): ReactElement => {\n      let abilities = 0;\n      const startArr = [];\n      getUserTagAbilities?.forEach(\n        (item: { tagId: string; abilityValue: string }) => {\n          const { tagId, abilityValue } = item;\n          if (prevTag === tagId) {\n            abilities = Math.round(Number(abilityValue) / 20);\n          }\n        }\n      );\n      for (let i = 1; i <= 5; i += 1) {\n        if (abilities === 5) {\n          startArr.push(<Star key={i} className=\"all iconfont icon-star1\" />);\n        } else if (i <= abilities) {\n          startArr.push(\n            <Star key={i} className=\"active iconfont icon-star1\" />\n          );\n        } else {\n          startArr.push(<Star key={i} />);\n        }\n      }\n      return <>{startArr}</>;\n    },\n    [getUserTagAbilities]\n  );\n\n  // 获取智能速答题目\n  const getQuick = useCallback(() => {\n    return subjectTags?.tags?.map((item: any) => {\n      const { _id, name, children = [] } = item;\n      return (\n        <div key={_id}>\n          <Card>\n            <Card.Header title={name} />\n            <Card.Body>\n              <Accordion>\n                {children.map((item2: any) => {\n                  const {\n                    name: name2,\n                    _id: _id2,\n                    children: children2 = [],\n                  } = item2;\n                  return (\n                    <Accordion.Panel\n                      header={name2}\n                      key={_id2}\n                      style={{ marginBottom: '10px' }}\n                    >\n                      <AccordionBox>\n                        {children2.map((item3: any) => {\n                          const { name: name3, _id: _id3 } = item3;\n                          const abilities = setAbilities(_id3);\n                          return (\n                            <AccordionItem key={_id3}>\n                              <AccordionLeftTite>{name3}</AccordionLeftTite>\n                              <AccordionBottom>\n                                <AccordionLeft>\n                                  <AccordionLeftStarBox>\n                                    <StarFont>菓星值</StarFont>\n                                    <StarBox>{abilities}</StarBox>\n                                  </AccordionLeftStarBox>\n                                </AccordionLeft>\n                                <AccordionRight>\n                                  <Button\n                                    type=\"primary\"\n                                    size=\"small\"\n                                    inline\n                                    onClick={(): void =>\n                                      history.push(\n                                        `/quick?subject=${\n                                          subjectTags?.subject || ''\n                                        }&tagId=${\n                                          _id3 || ''\n                                        }&tag=${name3}&sourceType=${tabTypeToSourceType}`\n                                      )\n                                    }\n                                  >\n                                    开始练习\n                                  </Button>\n                                </AccordionRight>\n                              </AccordionBottom>\n                            </AccordionItem>\n                          );\n                        })}\n                      </AccordionBox>\n                    </Accordion.Panel>\n                  );\n                })}\n              </Accordion>\n            </Card.Body>\n          </Card>\n          <WhiteSpace size=\"lg\" />\n        </div>\n      );\n    });\n  }, [\n    history,\n    setAbilities,\n    subjectTags?.subject,\n    subjectTags?.tags,\n    tabTypeToSourceType,\n  ]);\n\n  // 开始考试联系\n  const handleToExamInfo = useCallback(\n    (data) => {\n      dispatch?.({ type: 'setExam', exam: data });\n      history.push('/exam-info');\n    },\n    [dispatch, history]\n  );\n  // 获取套卷模拟\n  const getExam = useCallback(() => {\n    return (\n      <Accordion>\n        {filterExam.map((item) => {\n          return (\n            <Accordion.Panel\n              header={examEnum[item.sourceType as keyof typeof examEnum]}\n              style={{ marginBottom: '20px' }}\n              key={item.sourceType}\n            >\n              <AccordionBox>\n                {item.children.map((val) => {\n                  const { date: examDate } = val;\n                  return (\n                    <AccordionItem key={val._id}>\n                      <AccordionLeftTite>\n                        {dateToYear(examDate)}\n                      </AccordionLeftTite>\n                      <AccordionBottom>\n                        <AccordionLeft>\n                          <AccordionLeftStarBox>\n                            <StarFont>\n                              个人历史最高分：\n                              {filterExamHis[val._id]?.bestPoints}\n                            </StarFont>\n                          </AccordionLeftStarBox>\n                        </AccordionLeft>\n                        <AccordionRight>\n                          <Button\n                            type=\"primary\"\n                            size=\"small\"\n                            inline\n                            onClick={(): void =>\n                              handleToExamInfo({\n                                exam: val,\n                                examHis: filterExamHis[val._id],\n                              })\n                            }\n                          >\n                            开始练习\n                          </Button>\n                        </AccordionRight>\n                      </AccordionBottom>\n                    </AccordionItem>\n                  );\n                })}\n              </AccordionBox>\n            </Accordion.Panel>\n          );\n        })}\n      </Accordion>\n    );\n  }, [filterExam, filterExamHis, handleToExamInfo]);\n\n  // 获取专题模拟\n  const getTopic = useCallback(() => {\n    return subjectTags?.tags?.map((item: any) => {\n      const { _id, name } = item;\n      const abilities = setAbilities(_id);\n\n      return (\n        <AccordionItem key={_id}>\n          <AccordionLeftTite>{name}</AccordionLeftTite>\n          <AccordionBottom>\n            <AccordionLeft>\n              <AccordionLeftStarBox>\n                <StarFont>菓星值</StarFont>\n                <StarBox>{abilities}</StarBox>\n              </AccordionLeftStarBox>\n            </AccordionLeft>\n            <AccordionRight>\n              <Button\n                type=\"primary\"\n                size=\"small\"\n                inline\n                onClick={(): void =>\n                  history.push(\n                    `/topic?subject=${subjectTags?.subject || ''}&tagId=${\n                      _id || ''\n                    }&tag=${name}`\n                  )\n                }\n              >\n                开始练习\n              </Button>\n            </AccordionRight>\n          </AccordionBottom>\n        </AccordionItem>\n      );\n    });\n  }, [history, setAbilities, subjectTags?.subject, subjectTags?.tags]);\n\n  // 更改科目选项\n  const changeEjuSubject = (value: string[]): void => {\n    dispatch?.({ type: 'setEjuSubjectValue', ejuSubjectValue: value });\n  };\n\n  // 查询题库筛选科目的值\n  useEffect(() => {\n    subjectReq({\n      variables: {\n        sourceType: tabTypeToSourceType,\n      },\n    });\n  }, [subjectReq, tabTypeToSourceType]);\n  // 查询科目下所有题目\n  useEffect(() => {\n    const subject = ejuSubjectValue?.[0];\n    subject &&\n      subjectTagsReq({\n        variables: {\n          sourceType: tabTypeToSourceType,\n          subject,\n        },\n      });\n  }, [ejuSubjectValue, subjectTagsReq, tabTypeToSourceType]);\n  // 设置下拉选项\n  useEffect(() => {\n    const { typeSubjects } = sujectData || {};\n    if (typeSubjects) {\n      setSubjectArr(stringArrToPickArr(typeSubjects, subjectEnum));\n    }\n  }, [sujectData]);\n  // 接口loading\n  useEffect(() => {\n    (subjectLoading || subjectTagLoading) && Toast.loading('加载中', 0);\n    !subjectLoading && !subjectTagLoading && Toast.hide();\n  }, [subjectLoading, subjectTagLoading]);\n\n  // 缓存用户信息接口\n  useEffect(() => {\n    const userData = userInfo?.getUserInfo;\n    if (userData) {\n      dispatch?.({ type: 'setUserInfo', userInfo: userData });\n      // 提前加载头像图片\n      if (userData.avatar) {\n        const prevImg = new Image();\n        prevImg.src = userData.avatar;\n      }\n    }\n  }, [dispatch, userInfo?.getUserInfo]);\n  return (\n    <>\n      <TabBarFixed>\n        <TabBarBox>\n          <TabBarItem\n            className={tabType === 'quick' ? 'active' : ''}\n            onClick={(): void => handleTabChange('quick')}\n          >\n            智能速答\n          </TabBarItem>\n          <TabBarItem\n            className={tabType === 'topic' ? 'active' : ''}\n            onClick={(): void => handleTabChange('topic')}\n          >\n            专题模拟\n          </TabBarItem>\n          <TabBarItem\n            className={tabType === 'exam' ? 'active' : ''}\n            onClick={(): void => handleTabChange('exam')}\n          >\n            套卷模拟\n          </TabBarItem>\n        </TabBarBox>\n      </TabBarFixed>\n      <Content>\n        <Picker\n          data={subjectArr}\n          cols={1}\n          value={ejuSubjectValue}\n          onOk={(value: string[]): void => changeEjuSubject(value)}\n        >\n          <PickItem placeholder=\"请选择考学科目\" />\n        </Picker>\n        {tabType === 'quick' && getQuick()}\n        {tabType === 'topic' && getTopic()}\n        {tabType === 'exam' && getExam()}\n        <BottomBlank />\n      </Content>\n    </>\n  );\n};\n\nexport default Library;\n","export interface FilterSourceTypeProps {\r\n  date: string;\r\n  sourceType: string;\r\n  subject: string;\r\n  _id: string;\r\n  fullPoints: number;\r\n  timeLimit: number;\r\n}\r\ninterface FilterSourceTypeReturn {\r\n  sourceType: string;\r\n  children: FilterSourceTypeProps[];\r\n}\r\nexport function filterSourceType(\r\n  arr: FilterSourceTypeProps[]\r\n): FilterSourceTypeReturn[] {\r\n  const comMap: { [key: string]: FilterSourceTypeProps[] } = {}; // 用于比对是否已存当前项\r\n  const resultArr: FilterSourceTypeReturn[] = []; // 最后过滤好的数据\r\n  arr?.forEach((item) => {\r\n    const { sourceType } = item;\r\n    if (comMap[sourceType as keyof typeof comMap]) {\r\n      comMap[sourceType as keyof typeof comMap].push(item);\r\n    } else {\r\n      comMap[sourceType as keyof typeof comMap] = [{ ...item }];\r\n    }\r\n  });\r\n  Object.keys(comMap).forEach((key) => {\r\n    resultArr.push({\r\n      sourceType: key,\r\n      children: comMap[key],\r\n    });\r\n  });\r\n  return resultArr;\r\n}\r\n\r\nexport interface FilterExamIdProps {\r\n  bestPoints: number;\r\n  examId: string;\r\n  frequency: number;\r\n  previousPoints: number;\r\n  subject: string;\r\n  timeCounter: number;\r\n  userId: string;\r\n}\r\ninterface FilterExamIdReturn {\r\n  [key: string]: FilterExamIdProps;\r\n}\r\nexport function filterExamId(arr: FilterExamIdProps[]): FilterExamIdReturn {\r\n  const resultMap: FilterExamIdReturn = {};\r\n  arr?.forEach((item) => {\r\n    const { examId } = item || {};\r\n    resultMap[examId as keyof typeof resultMap] = item;\r\n  });\r\n  return resultMap;\r\n}\r\n","export default __webpack_public_path__ + \"assets/images/avatar-defaulta4605a43.jpg\";","import styled from 'styled-px2vw';\r\nimport pkg from '../../../package.json';\r\nimport star2 from './images/icon-star2.svg';\r\n\r\nconst themeColor = pkg.theme['brand-primary'];\r\n\r\nexport const Page = styled.div``;\r\n\r\nexport const TabBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n  height: 128px;\r\n`;\r\n\r\nexport const TabItem = styled.div`\r\n  width: 190px;\r\n  height: 50px;\r\n  border-radius: 60px;\r\n  font-size: 32px;\r\n  letter-spacing: 0.4px;\r\n  font-weight: bold;\r\n  color: #7f7f7f;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  &.active {\r\n    color: #fff;\r\n    background-color: ${themeColor};\r\n  }\r\n`;\r\n\r\nexport const InfoBox = styled.div`\r\n  background: ${themeColor};\r\n  border-radius: 0px 0px 30px 30px;\r\n  padding: 20px 74px;\r\n  position: relative;\r\n  z-index: 1;\r\n`;\r\n\r\nexport const InfoLi = styled.div`\r\n  height: 70px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const InfoItem = styled.div`\r\n  min-width: 124px;\r\n  color: #fff;\r\n  flex: 1;\r\n`;\r\n\r\nexport const IconStar = styled.span`\r\n  display: inline-flex;\r\n  width: 36px;\r\n  height: 34px;\r\n  background: url(${star2}) no-repeat center;\r\n  margin-right: 16px;\r\n  background-size: contain;\r\n  align-items: center;\r\n  justify-content: center;\r\n  &:last-child {\r\n    margin-right: 0;\r\n  }\r\n  &.icon-star1 {\r\n    background-image: none;\r\n    color: #ffcc00;\r\n  }\r\n`;\r\nexport const StrengthInner = styled.div`\r\n  position: absolute;\r\n  top: 128px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n`;\r\n\r\nexport const StrengthContent = styled.div`\r\n  position: absolute;\r\n  top: 180px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  .am-tabs-pane-wrap {\r\n    position: relative;\r\n  }\r\n`;\r\n\r\nexport const StrengthScroll = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0px;\r\n  left: 0;\r\n  right: 0;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n`;\r\n// 图标\r\nexport const StrengthPage = styled.div`\r\n  padding: 20px 40px;\r\n`;\r\nexport const SelectBox = styled.div`\r\n  padding-top: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-around;\r\n`;\r\n\r\nexport const SelectBoxItem = styled.div`\r\n  width: 50%;\r\n  flex-shrink: 0;\r\n`;\r\n\r\nexport const Table = styled.table`\r\n  width: 100%;\r\n`;\r\nexport const Tr = styled.tr`\r\n  height: 50px;\r\n`;\r\n\r\nexport const Td = styled.td`\r\n  vertical-align: middle;\r\n  font-size: 28px;\r\n  text-align: center;\r\n`;\r\nexport const Th = styled.th`\r\n  font-size: 32px;\r\n  color: ${themeColor};\r\n`;\r\n\r\nexport const RadarScroll = styled.div`\r\n  height: calc(100vh - 395px);\r\n  overflow-y: auto;\r\n`;\r\n\r\nexport const PredictBox = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 20px 30px;\r\n`;\r\nexport const PredictBoxButton = styled.button`\r\n  background: #f8fffc;\r\n  border: 1px solid ${themeColor};\r\n  box-sizing: border-box;\r\n  border-radius: 16px;\r\n  flex-shrink: 0;\r\n  height: 74px;\r\n  color: ${themeColor};\r\n  font-size: 32px;\r\n  padding: 0 12px;\r\n`;\r\nexport const PredictBoxFont = styled.div`\r\n  font-weight: bold;\r\n  font-size: 40px;\r\n  letter-spacing: 0.3px;\r\n  color: ${themeColor};\r\n`;\r\n\r\nexport const PredictSelect = styled.div`\r\n  padding-right: 30px;\r\n`;\r\n\r\nexport const PredictScroll = styled.div`\r\n  position: absolute;\r\n  top: 128px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n`;\r\nexport const PredictContent = styled.div`\r\n  position: absolute;\r\n  top: 180px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n`;\r\n// 天梯排行\r\nexport const LadderBox = styled.div`\r\n  background-color: #f5f5f5;\r\n  position: absolute;\r\n  top: 128px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n`;\r\n\r\nexport const LadderContent = styled.div`\r\n  position: absolute;\r\n  top: 180px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n`;\r\nexport const RankHeader = styled.div`\r\n  height: 126px;\r\n  padding: 34px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const ItemFirst = styled.div`\r\n  width: 70px;\r\n  flex-shrink: 0;\r\n  color: #bdbdbd;\r\n  font-size: 32px;\r\n  text-align: center;\r\n`;\r\nexport const ItemSecond = styled.div<{ pl?: string }>`\r\n  width: 444px;\r\n  padding-left: ${(props): string => props.pl || '0px'};\r\n  color: #bdbdbd;\r\n  font-size: 32px;\r\n`;\r\nexport const ItemThird = styled.div`\r\n  display: inline-flex;\r\n  width: 160px;\r\n  flex-shrink: 0;\r\n  font-size: 32px;\r\n  justify-content: flex-end;\r\n`;\r\n\r\nexport const RankList = styled.div`\r\n  position: absolute;\r\n  top: 126px;\r\n  bottom: 0px;\r\n  left: 0;\r\n  right: 0;\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n  background-color: #fff;\r\n`;\r\n\r\nexport const RankItem = styled.div`\r\n  height: 144px;\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0 34px;\r\n  &.my {\r\n    background-color: #d7efe0;\r\n  }\r\n`;\r\n\r\nexport const RankItemCenter = styled.div`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  color: #000;\r\n  width: 100%;\r\n`;\r\nexport const RankItemStart = styled(RankItemCenter)``;\r\n\r\nexport const RankAvatar = styled.div<{ img: string }>`\r\n  display: inline-block;\r\n  width: 84px;\r\n  height: 84px;\r\n  border-radius: 50%;\r\n  background-image: url(${(prop): string => prop.img || ''});\r\n  background-size: cover;\r\n  background-position: center;\r\n  margin-right: 24px;\r\n`;\r\nexport const RankName = styled.div`\r\n  width: 340px;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n  text-overflow: ellipsis;\r\n  height: 84px;\r\n  line-height: 84px;\r\n`;\r\n\r\nexport const RankItemEnd = styled.div`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  color: #bfbfbf;\r\n`;\r\n\r\nexport const RankIcon = styled.span`\r\n  display: inline-flex;\r\n  width: 46px;\r\n  height: 45px;\r\n  font-size: 46px;\r\n  margin-left: 46px;\r\n  align-items: center;\r\n  justify-content: center;\r\n  &.icon-up {\r\n    color: ${themeColor};\r\n  }\r\n  &.icon-down {\r\n    color: #f5222d;\r\n  }\r\n  &.icon-no-change:before {\r\n    display: inline-block;\r\n    width: 40px;\r\n    height: 6px;\r\n    background-color: #bcbcbc;\r\n  }\r\n`;\r\n\r\nexport const SelectItem = styled.div`\r\n  width: 248px;\r\n  height: 74px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  padding: 0 48px 0 28px;\r\n  justify-content: space-between;\r\n  border-radius: 16px;\r\n  border: 1px solid #e8e8e8;\r\n  background: #fff;\r\n`;\r\nexport const IconArrow = styled.span`\r\n  width: 40px;\r\n  height: 25px;\r\n  display: inline-block;\r\n  font-size: 25px;\r\n  color: ${themeColor};\r\n`;\r\n","export default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik03LjMwNzI1IDQuMjE5ODZDNy45NDkzMiAyLjYxOTE4IDguMjcwMzYgMS44MTg4MyA4Ljc5MTkzIDEuNzA3OTFDOC45MjkwOCAxLjY3ODc0IDkuMDcwODMgMS42Nzg3NCA5LjIwNzk3IDEuNzA3OTFDOS43Mjk1NSAxLjgxODgzIDEwLjA1MDYgMi42MTkxOCAxMC42OTI3IDQuMjE5ODZDMTEuMDU3OCA1LjEzMDE0IDExLjI0MDQgNS41ODUyOCAxMS41ODIgNS44OTQ4NUMxMS42Nzc4IDUuOTgxNjggMTEuNzgxOCA2LjA1OTAxIDExLjg5MjYgNi4xMjU3NkMxMi4yODc0IDYuMzYzNzQgMTIuNzgwMyA2LjQwNzg4IDEzLjc2NjEgNi40OTYxN0MxNS40MzQ4IDYuNjQ1NjIgMTYuMjY5MiA2LjcyMDM0IDE2LjUyNCA3LjE5NjA5QzE2LjU3NjggNy4yOTQ2MiAxNi42MTI3IDcuNDAxMyAxNi42MzAyIDcuNTExNjlDMTYuNzE0NiA4LjA0NDcyIDE2LjEwMTIgOC42MDI3OCAxNC44NzQ0IDkuNzE4OUwxNC41MzM4IDEwLjAyODhDMTMuOTYwMiAxMC41NTA2IDEzLjY3MzUgMTAuODExNSAxMy41MDc2IDExLjEzNzJDMTMuNDA4MSAxMS4zMzI1IDEzLjM0MTQgMTEuNTQyOCAxMy4zMTAxIDExLjc1OThDMTMuMjU4IDEyLjEyMTUgMTMuMzQyIDEyLjUgMTMuNTA5OSAxMy4yNTY5TDEzLjU2OTkgMTMuNTI3NEMxMy44NzExIDE0Ljg4NDkgMTQuMDIxNyAxNS41NjM3IDEzLjgzMzcgMTUuODk3M0MxMy42NjQ5IDE2LjE5NyAxMy4zNTM4IDE2LjM4ODkgMTMuMDEwMiAxNi40MDUzQzEyLjYyNzcgMTYuNDIzNiAxMi4wODg3IDE1Ljk4NDQgMTEuMDEwNyAxNS4xMDZDMTAuMzAwNSAxNC41MjczIDkuOTQ1NDIgMTQuMjM3OSA5LjU1MTIxIDE0LjEyNDlDOS4xOTA5NyAxNC4wMjE2IDguODA4OTQgMTQuMDIxNiA4LjQ0ODY5IDE0LjEyNDlDOC4wNTQ0OCAxNC4yMzc5IDcuNjk5MzggMTQuNTI3MyA2Ljk4OTE3IDE1LjEwNkM1LjkxMTE5IDE1Ljk4NDQgNS4zNzIyMSAxNi40MjM2IDQuOTg5NjggMTYuNDA1M0M0LjY0NjA5IDE2LjM4ODkgNC4zMzUwNCAxNi4xOTcgNC4xNjYxNyAxNS44OTczQzMuOTc4MTggMTUuNTYzNyA0LjEyODc4IDE0Ljg4NDkgNC40Mjk5NyAxMy41Mjc0TDQuNDg5OTggMTMuMjU2OUM0LjY1Nzk0IDEyLjUgNC43NDE5MSAxMi4xMjE1IDQuNjg5OCAxMS43NTk4QzQuNjU4NTQgMTEuNTQyOCA0LjU5MTgyIDExLjMzMjUgNC40OTIzMiAxMS4xMzcyQzQuMzI2NDUgMTAuODExNSA0LjAzOTY4IDEwLjU1MDYgMy40NjYxMyAxMC4wMjg4TDMuMTI1NDYgOS43MTg5QzEuODk4NjcgOC42MDI3OCAxLjI4NTI3IDguMDQ0NzIgMS4zNjk3NSA3LjUxMTY5QzEuMzg3MjQgNy40MDEzIDEuNDIzMTIgNy4yOTQ2MiAxLjQ3NTg5IDcuMTk2MDhDMS43MzA2OSA2LjcyMDM0IDIuNTY1MDcgNi42NDU2MiA0LjIzMzg0IDYuNDk2MTdDNS4yMTk2MiA2LjQwNzg4IDUuNzEyNTEgNi4zNjM3NCA2LjEwNzM1IDYuMTI1NzZDNi4yMTgxIDYuMDU5MDEgNi4zMjIxMSA1Ljk4MTY4IDYuNDE3OTMgNS44OTQ4NUM2Ljc1OTU0IDUuNTg1MjggNi45NDIxMSA1LjEzMDE0IDcuMzA3MjUgNC4yMTk4NloiIGZpbGw9IiM3M0MwOEEiIHN0cm9rZT0iI0ZGQ0MwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQo8L3N2Zz4NCg==\"","import React, {\n  ReactElement,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\nimport { Picker } from 'antd-mobile';\nimport { BottomBlank } from '@/components/TabBar/styles';\nimport { useLazyQuery } from '@apollo/client';\nimport { FIND_RANK } from '@/helpers/APIHelper';\nimport { PickValueArr } from '@/pages/Library/utils/stringArrToPickArr';\nimport dw from '@/pages/UserCenter/images/avatar-default.jpg';\nimport {\n  IconArrow,\n  ItemFirst,\n  ItemSecond,\n  ItemThird,\n  LadderBox,\n  LadderContent,\n  RankAvatar,\n  RankHeader,\n  RankIcon,\n  RankItem,\n  RankItemCenter,\n  RankItemEnd,\n  RankItemStart,\n  RankList,\n  RankName,\n  SelectItem,\n} from '../styles';\nimport { LadderProps, RankItemTypes } from '../types';\n\nconst Ladder: React.FC<LadderProps> = (props) => {\n  const { subjectArr, rankNum, subjectPointsArr } = props;\n\n  // 获取排行榜数据\n  const [getRank, { data: findRankData }] = useLazyQuery(FIND_RANK, {\n    fetchPolicy: 'cache-and-network',\n  });\n  // 排行榜数据\n  const rankArr = useMemo(() => {\n    return findRankData?.findRank || [];\n  }, [findRankData?.findRank]);\n  console.log('findRankData++++', rankArr);\n  // 选中的排行榜排行数据\n  const [rankValue, setRankValue] = useState<string[]>(['']);\n  // 筛选的数据类型\n  const [rankData, setRankData] = useState<PickValueArr[]>([]);\n  const [showMy, setShowmy] = useState(0);\n\n  // 设置下拉选框展示的值\n  const getPointsLabel = (): string => {\n    let pointsLabel = '';\n    rankData.forEach((item) => {\n      if (item.value === rankValue[0]) {\n        pointsLabel = item.label;\n      }\n    });\n    return pointsLabel;\n  };\n  // 获取列表项\n  const getRankItem = (): ReactElement[] => {\n    return rankArr?.rankSet?.map((item: RankItemTypes, index: number) => {\n      const { avatar, rank, userName, point, isHigher } = item;\n      return (\n        <RankItem className={index + 1 === showMy ? 'my' : ''} key={rank}>\n          <ItemFirst>\n            <RankItemStart>{rank}</RankItemStart>\n          </ItemFirst>\n          <ItemSecond pl=\"12px\">\n            <RankItemCenter>\n              <RankAvatar img={avatar || dw} />\n              <RankName>{userName}</RankName>\n            </RankItemCenter>\n          </ItemSecond>\n          <ItemThird>\n            <RankItemEnd>\n              {point}\n              {isHigher > 0 && <RankIcon className=\"iconfont icon-up\" />}\n              {isHigher === 0 && (\n                <RankIcon className=\"iconfont icon-no-change\" />\n              )}\n              {isHigher < 0 && <RankIcon className=\"iconfont icon-down\" />}\n            </RankItemEnd>\n          </ItemThird>\n        </RankItem>\n      );\n    });\n  };\n\n  // 获取当前学科排名\n  const getSubjectRank = useCallback(\n    (subject: string) => {\n      console.log(subjectPointsArr);\n      if (subject) {\n        subjectPointsArr.forEach((item) => {\n          if (item.subject === subject) {\n            setShowmy(item.subjectRankThisWeek);\n          }\n        });\n      } else {\n        setShowmy(rankNum);\n      }\n    },\n    [rankNum, subjectPointsArr]\n  );\n  // 获取下拉选框的值\n  useEffect(() => {\n    console.log('subjectArr+++++++', subjectArr);\n    if (subjectArr?.length > 0) {\n      const initData = [{ value: '', label: '总分' }, ...subjectArr];\n      setRankData(initData);\n    }\n  }, [subjectArr]);\n\n  // 学科变更\n  useEffect(() => {\n    let param = {};\n    if (rankValue[0]) {\n      param = {\n        subject: rankValue[0],\n      };\n    }\n    getSubjectRank(rankValue[0]);\n    getRank({\n      variables: param,\n    });\n  }, [getRank, getSubjectRank, rankValue]);\n\n  return (\n    <LadderBox>\n      <LadderContent>\n        <RankHeader>\n          <ItemFirst>排名</ItemFirst>\n          <ItemSecond pl=\"100px\">昵称</ItemSecond>\n          <ItemThird>\n            <Picker\n              data={rankData}\n              cols={1}\n              value={rankValue}\n              onOk={(value: string[]): void => setRankValue(value)}\n            >\n              <SelectItem>\n                <span>{getPointsLabel()}</span>\n                <IconArrow className=\"iconfont icon-down-arrow\" />\n              </SelectItem>\n            </Picker>\n          </ItemThird>\n        </RankHeader>\n        <RankList>\n          {getRankItem()}\n          <BottomBlank />\n        </RankList>\n      </LadderContent>\n    </LadderBox>\n  );\n};\n\nexport default Ladder;\n","// 根据分数获取等级\r\nconst getLevel = (point: number | string, type: string): string => {\r\n  let level = '';\r\n  if (type === 'math' || type === 'maths1' || type === 'maths2') {\r\n    switch (true) {\r\n      case point < 100:\r\n        level = 'D';\r\n        break;\r\n      case point >= 100 && point < 120:\r\n        level = 'C';\r\n        break;\r\n      case point >= 120 && point < 150:\r\n        level = 'B';\r\n        break;\r\n      case point >= 150 && point < 180:\r\n        level = 'A';\r\n        break;\r\n      case point >= 180:\r\n        level = 'S';\r\n        break;\r\n      default:\r\n    }\r\n  }\r\n  if (type === 'physics' || type === 'chemistry') {\r\n    switch (true) {\r\n      case point < 55:\r\n        level = 'D';\r\n        break;\r\n      case point >= 55 && point < 65:\r\n        level = 'C';\r\n        break;\r\n      case point >= 65 && point < 75:\r\n        level = 'B';\r\n        break;\r\n      case point >= 75 && point < 85:\r\n        level = 'A';\r\n        break;\r\n      case point >= 85:\r\n        level = 'S';\r\n        break;\r\n      default:\r\n    }\r\n  }\r\n  return level;\r\n};\r\n\r\nexport default getLevel;\r\n","import React, { ReactElement, useEffect } from 'react';\nimport F2 from '@antv/f2';\nimport { Card, WhiteSpace, WingBlank } from 'antd-mobile';\nimport { BottomBlank } from '@/components/TabBar/styles';\nimport { subjectEnum } from '@/constants/globalDatas';\nimport pkg from '../../../../package.json';\nimport { RadarScroll, StrengthScroll, Table, Td, Th, Tr } from '../styles';\nimport getLevel from '../utils/getLevel';\nimport { RadarProps } from '../types';\n\nconst themeColor = pkg.theme['brand-primary'];\n\nconst Radar: React.FC<RadarProps> = (props) => {\n  const { subjectPointsArr } = props;\n\n  useEffect(() => {\n    if (subjectPointsArr) {\n      const data = subjectPointsArr.map((item) => {\n        const { subject, subjectPoint } = item;\n        return {\n          item: subject,\n          score: getLevel(subjectPoint, subject),\n        };\n      });\n      // const data = [\n      //   {\n      //     item: '英语',\n      //     score: 'S',\n      //   },\n      //   {\n      //     item: '日语',\n      //     score: 'A',\n      //   },\n      //   {\n      //     item: '数学',\n      //     score: 'B',\n      //   },\n      //   {\n      //     item: '物理',\n      //     score: 'C',\n      //   },\n      //   {\n      //     item: '化学',\n      //     score: 'B',\n      //   },\n      // ];\n      const { width } = window.screen;\n      const chart = new F2.Chart<typeof data[0]>({\n        id: 'radarChart',\n        pixelRatio: window.devicePixelRatio,\n        padding: 'auto',\n        width,\n        height: width * 0.8,\n      });\n\n      chart.coord('polar');\n      chart.source(data, {\n        score: {\n          type: 'cat',\n          values: ['D', 'C', 'B', 'A', 'S'],\n        },\n      });\n\n      chart.axis('score', {\n        label: (text, index, total) => {\n          return { top: true, text };\n        },\n        grid: (text) => {\n          return { top: true, text };\n        },\n        line: {\n          top: false,\n        },\n      });\n      chart.axis('item', {\n        label: (text, index, total) => {\n          return {\n            top: true,\n            text: subjectEnum[text as keyof typeof subjectEnum],\n          };\n        },\n      });\n      chart\n        .area()\n        .position('item*score')\n        .color(`${themeColor}`)\n        .animate({\n          appear: {\n            animation: 'groupWaveIn',\n          },\n        });\n      chart\n        .line()\n        .position('item*score')\n        .color(`${themeColor}`)\n        .animate({\n          appear: {\n            animation: 'groupWaveIn',\n          },\n        });\n      chart\n        .point()\n        .position('item*score')\n        .color(`${themeColor}`)\n        .style({\n          stroke: '#fff',\n          lineWidth: 1,\n        })\n        .animate({\n          appear: {\n            delay: 300,\n          },\n        });\n      chart.legend({\n        custom: true,\n        items: [\n          {\n            name: '能力现状',\n            marker: 'circle',\n            fill: themeColor,\n          },\n        ],\n      });\n      chart.render();\n    }\n  }, [subjectPointsArr]);\n\n  const getTabelData = (): ReactElement => {\n    const tableListData: ReactElement[] = [];\n    subjectPointsArr?.forEach((item) => {\n      const { subject, subjectPoint } = item;\n      tableListData.push(\n        <Tr key={subject}>\n          <Td>{subjectEnum[subject as keyof typeof subjectEnum]}</Td>\n          <Td>{subjectPoint}</Td>\n          <Td>{getLevel(subjectPoint, subject)}</Td>\n        </Tr>\n      );\n    });\n    return (\n      <Table>\n        <tbody>\n          <Tr>\n            <Th>科目</Th>\n            <Th>预测分数</Th>\n            <Th>评级</Th>\n          </Tr>\n          {tableListData}\n        </tbody>\n      </Table>\n    );\n  };\n\n  return (\n    <StrengthScroll>\n      <canvas id=\"radarChart\" width=\"300\" height=\"300\" />\n      <WingBlank size=\"lg\">\n        <WhiteSpace size=\"lg\" />\n        <Card>\n          <Card.Header title=\"数据明细\" />\n          <Card.Body>{getTabelData()}</Card.Body>\n        </Card>\n        <WhiteSpace size=\"lg\" />\n      </WingBlank>\n      <BottomBlank />\n    </StrengthScroll>\n  );\n};\n\nexport default Radar;\n","import React, { useEffect, useRef, useState } from 'react';\nimport F2 from '@antv/f2';\nimport PickItem from '@/components/PickItem';\nimport { Picker, Toast } from 'antd-mobile';\nimport { FIND_TAG, SUBJECT_TAGS_ONLY } from '@/helpers/APIHelper';\nimport { useLazyQuery } from '@apollo/client';\nimport { PickValueArr } from '@/pages/Library/utils/stringArrToPickArr';\nimport { subjectEnum } from '@/constants/globalDatas';\nimport getLabelFromValue from '@/utils/getLabelFromValue';\nimport { BottomBlank } from '@/components/TabBar/styles';\nimport { SelectBox, SelectBoxItem, StrengthScroll } from '../styles';\n\n// interface SubjectParsingItem {\n//   chemistry: { [key: string]: number };\n//   math: { [key: string]: number };\n//   physicals: { [key: string]: number };\n// }\n// interface SubjectParsingProps {\n//   userInfo?: SubjectParsingItem;\n//   generalInfo?: {\n//     average?: SubjectParsingItem;\n//     top: SubjectParsingItem;\n//   };\n// }\n\ninterface SelectData {\n  value: string;\n  label: string;\n}\ninterface SubjectParsingProps {\n  subjectArr: PickValueArr[];\n}\n\ninterface ChartData {\n  date: number;\n  type: string;\n  value: number;\n}\n\ninterface TagsData {\n  _id: string;\n  name: string;\n  children: {\n    _id: string;\n    name: string;\n  }[];\n}\n\ninterface SourceItem {\n  type: string;\n  date: number;\n  value: number;\n}\nconst SubjectParsing: React.FC<SubjectParsingProps> = (props) => {\n  // 知识点下拉框\n  const [pointsData, setPointData] = useState<SelectData[]>([]);\n  const [pointsValue, setPointValue] = useState<string[]>(['']);\n  // 学科下拉框\n  const [subjectvalue, setSubjectValue] = useState<string[]>(['maths1']);\n  const [getTags, { data: tags, loading: tagsLoading }] =\n    useLazyQuery(SUBJECT_TAGS_ONLY);\n  const [getAbilityTag] = useLazyQuery(FIND_TAG, {\n    fetchPolicy: 'cache-and-network',\n    onCompleted: (res) => handleAbility(res),\n  });\n  const tagsArrRef = useRef<TagsData[]>([]);\n  const chartRef = useRef<any>();\n\n  const { subjectArr } = props;\n  // 选择学科\n  const handleSubjectChange = (value: string[]): void => {\n    setSubjectValue(value);\n  };\n  // 变换知识点\n  const handlePointsChange = (value: string[]): void => {\n    setPointValue(value);\n  };\n  // 处理返回的分值\n  const handleAbility = (data: {\n    findAbilityTag: {\n      abilityValues: number[];\n      tagName: string;\n    }[];\n  }): void => {\n    const { findAbilityTag } = data || {};\n    console.log(findAbilityTag);\n    const source: SourceItem[] = [];\n\n    findAbilityTag?.forEach((item) => {\n      const { abilityValues, tagName } = item;\n      for (let i = 1; i <= 6; i += 1) {\n        source.push({\n          type: tagName,\n          date: i,\n          value: abilityValues?.[i] ? Math.round(abilityValues[i] / 20) : 0,\n        });\n      }\n    });\n    showParsing(source);\n  };\n  // 根据学科获得知识点\n  useEffect(() => {\n    getTags({\n      variables: {\n        subject: subjectvalue[0],\n        sourceType: 'center',\n      },\n    });\n  }, [getTags, subjectvalue]);\n\n  // 获取知识点\n  useEffect(() => {\n    const tagsData = tags?.subjectTags?.tags || [];\n    const tagsArr =\n      tagsData.map((item: { name: string; _id: number }) => {\n        const { name, _id } = item;\n        return {\n          label: name,\n          value: _id,\n        };\n      }) || [];\n    setPointValue([tagsArr?.[0]?.value || '']);\n    setPointData(tagsArr);\n    tagsArrRef.current = tagsData;\n  }, [tags?.subjectTags?.tags]);\n\n  // 切换学科查询知识点loading\n  useEffect(() => {\n    tagsLoading ? Toast.loading('加载中', 0) : Toast.hide();\n  }, [tagsLoading]);\n\n  // 根据知识点获取相关统计图数据\n  useEffect(() => {\n    const tagId = pointsValue?.[0];\n    if (tagId) {\n      getAbilityTag({\n        variables: {\n          tagId,\n        },\n      });\n    }\n  }, [getAbilityTag, pointsValue]);\n\n  // 监听知识点变化\n  // useEffect(() => {\n  //   console.log(pointsValue);\n  //   const tagsId = pointsValue[0];\n  //   // 获取选中tag的子集\n  //   if (tagsId) {\n  //     tagsArrRef?.current?.forEach((item) => {\n  //       if (item._id === tagsId) {\n  //         console.log(item.children);\n  //         item.children.forEach((item2) => {\n  //           getAbilityTag({\n  //             variables: {\n  //               tagId: item2._id,\n  //             },\n  //           });\n  //         });\n  //       }\n  //     });\n  //   }\n  // }, [getAbilityTag, pointsValue]);\n  // 展示图表\n  const showParsing = (data: ChartData[]): void => {\n    const { width } = window.screen;\n    const chart = new F2.Chart<typeof data[0]>({\n      id: 'columnarChart',\n      pixelRatio: window.devicePixelRatio,\n      padding: 'auto',\n      width,\n      height: width * 0.8,\n      appendPadding: [15, 15, 15, 20],\n    });\n    chartRef.current = chart;\n    // chart.source(data, {\n    //   percent: {\n    //     type: 'linear',\n    //     alias: '平均正确率(%)',\n    //     min: 0,\n    //     max: 100,\n    //     tickCount: 6,\n    //   },\n    // });\n\n    // chart.interval().position('genre*percent').color('genre');\n    // chart.legend({\n    //   align: 'right',\n    //   itemWidth: null,\n    // });\n    // chart.guide().text({\n    //   position: ['min', 'max'],\n    //   content: '平均正确率(%)',\n    //   style: {\n    //     textBaseline: 'middle',\n    //   },\n    //   offsetY: -35,\n    // });\n    // chart.render();\n    // const offset = -5;\n    // const canvas = chart.get('canvas');\n    // const group = canvas.addGroup();\n    // data.forEach((obj) => {\n    //   const point = chart.getPosition(obj);\n    //   group.addShape('text', {\n    //     attrs: {\n    //       x: point.x,\n    //       y: point.y + offset,\n    //       text: `${obj.percent}%`,\n    //       textAlign: 'center',\n    //       textBaseline: 'bottom',\n    //       fill: '#808080',\n    //     },\n    //   });\n    // });\n    chart.source(data);\n    chart.scale('date', {\n      ticks: ['1', '2', '3', '4', '5', '6'],\n    });\n    chart.scale('value', {\n      ticks: ['0', '1', '2', '3', '4', '5'],\n    });\n    chart.axis('date', {\n      label: function label(text, index, total) {\n        return {\n          text: `第${text}月`,\n        };\n      },\n    });\n    chart.axis('value', {\n      label: function label(text, index, total) {\n        return {\n          text: `${text}星`,\n        };\n      },\n    });\n    chart.line().position('date*value').color('type');\n    chart.point().position('date*value').color('type');\n    chart.render();\n  };\n\n  return (\n    <StrengthScroll>\n      <SelectBox>\n        <SelectBoxItem>\n          <Picker\n            data={subjectArr}\n            cols={1}\n            onOk={handleSubjectChange}\n            value={subjectvalue}\n          >\n            <PickItem\n              placeholder=\"请选择科目\"\n              value={subjectEnum[subjectvalue[0] as keyof typeof subjectEnum]}\n            />\n          </Picker>\n        </SelectBoxItem>\n        <SelectBoxItem>\n          <Picker\n            data={pointsData}\n            cols={1}\n            onOk={handlePointsChange}\n            value={pointsValue}\n          >\n            <PickItem\n              placeholder=\"请选择知识点\"\n              value={getLabelFromValue(pointsData, pointsValue[0] || '')}\n            />\n          </Picker>\n        </SelectBoxItem>\n      </SelectBox>\n      <canvas id=\"columnarChart\" />\n      <BottomBlank />\n    </StrengthScroll>\n  );\n};\n\nexport default SubjectParsing;\n","import React from 'react';\nimport { Tabs } from 'antd-mobile';\nimport Radar from './Radar';\nimport SubjectParsing from './SubjectParsing';\nimport { StrengthProps } from '../types';\nimport { StrengthContent, StrengthInner } from '../styles';\n\nconst Strength: React.FC<StrengthProps> = (props) => {\n  const { subjectArr, subjectPointsArr, handleStrengthTabChang, strengthTab } =\n    props;\n  const handleTabChange = (index: number): void => {\n    handleStrengthTabChang(index);\n  };\n  return (\n    <StrengthInner>\n      <StrengthContent>\n        <Tabs\n          tabs={[\n            { title: '综合雷达图', sub: '1' },\n            { title: '学科/知识点能力分析', sub: '2' },\n          ]}\n          page={strengthTab}\n          onChange={(tab, index): void => handleTabChange(index)}\n        >\n          <Radar subjectPointsArr={subjectPointsArr} />\n          <SubjectParsing subjectArr={subjectArr} />\n        </Tabs>\n      </StrengthContent>\n    </StrengthInner>\n  );\n};\n\nexport default Strength;\n","import React, { ReactElement, useEffect, useState } from 'react';\nimport F2 from '@antv/f2';\nimport { Card, Picker, WhiteSpace, WingBlank } from 'antd-mobile';\nimport PickItem from '@/components/PickItem';\nimport { BottomBlank } from '@/components/TabBar/styles';\nimport APIHelper from '@/helpers/APIHelper';\nimport getGoalSchool, { PickDataItem, getSubject } from '@/utils/getGoalSchool';\nimport { RecommendPointAbility, SchoolData } from '@/helpers/types';\nimport { subjectEnum } from '@/constants/globalDatas';\nimport pkg from '../../../../package.json';\nimport {\n  PredictBox,\n  PredictBoxButton,\n  PredictBoxFont,\n  PredictContent,\n  PredictScroll,\n  PredictSelect,\n  Table,\n  Td,\n  Th,\n  Tr,\n} from '../styles';\nimport getLevel from '../utils/getLevel';\nimport { PredictProps } from '../types';\n\nconst themeColor = pkg.theme['brand-primary'];\n\nconst Predict: React.FC<PredictProps> = (props) => {\n  const [school, setSchool] = useState<string[]>([]);\n  const [totalData, setTotalData] = useState<SchoolData>({});\n  const [goalSchool, setGoalSchool] = useState<PickDataItem[]>([]); // 学校列表\n  const [ejuSubject, setEjuSubject] = useState<PickDataItem[]>([]); // 专业\n  const [department, setDepartment] = useState<string[]>([]); // 专业\n  const [probability, setProbability] = useState(0); // 合格率\n  const [recommendPoint, setRecommendPoint] = useState<RecommendPointAbility>({\n    english: '',\n    jap: 0,\n    jap_writing: 0,\n    math: 0,\n    physics: 0,\n    chemistry: 0,\n  }); // 推荐能力值\n  const { subjectPointsArr } = props;\n\n  useEffect(() => {\n    if (subjectPointsArr || recommendPoint) {\n      const recommendPointData = { ...recommendPoint };\n      const data: { [key: string]: string }[] = [];\n      subjectPointsArr?.forEach((item) => {\n        const { subject, subjectPoint } = item;\n        data.push({\n          item: subject,\n          type: 'my',\n          score: getLevel(subjectPoint, subject),\n        });\n      });\n      Object.keys(recommendPointData).forEach((item) => {\n        console.log('recommendPointData+++++++item', item);\n        data.push({\n          item,\n          type: 'you',\n          score:\n            item === 'english'\n              ? recommendPointData[item]\n              : getLevel(\n                  recommendPointData[item as keyof typeof recommendPointData],\n                  item\n                ),\n        });\n      });\n      // const data = [\n      //   {\n      //     item: '英语',\n      //     type: 'my',\n      //     score: 'S',\n      //   },\n      //   {\n      //     item: '日语',\n      //     type: 'my',\n      //     score: 'A+',\n      //   },\n      //   {\n      //     item: '数学',\n      //     type: 'my',\n      //     score: 'B+',\n      //   },\n      //   {\n      //     item: '物理',\n      //     type: 'my',\n      //     score: 'C+',\n      //   },\n      //   {\n      //     item: '化学',\n      //     type: 'my',\n      //     score: 'A-',\n      //   },\n      //   {\n      //     item: '英语',\n      //     type: 'you',\n      //     score: 'B+',\n      //   },\n      //   {\n      //     item: '日语',\n      //     type: 'you',\n      //     score: 'C-',\n      //   },\n      //   {\n      //     item: '数学',\n      //     type: 'you',\n      //     score: 'A+',\n      //   },\n      //   {\n      //     item: '物理',\n      //     type: 'you',\n      //     score: 'A+',\n      //   },\n      //   {\n      //     item: '化学',\n      //     type: 'you',\n      //     score: 'B-',\n      //   },\n      // ];\n      const { width } = window.screen;\n      const chart = new F2.Chart<typeof data[0]>({\n        id: 'predictChart',\n        pixelRatio: window.devicePixelRatio,\n        padding: 30,\n        width,\n        height: width * 0.8,\n        appendPadding: [15, 15, 15, 20],\n      });\n\n      chart.coord('polar');\n      chart.source(data, {\n        score: {\n          type: 'cat',\n          values: ['D', 'C', 'B', 'A', 'S'],\n        },\n      });\n\n      chart.axis('score', {\n        label: (text, index, total) => {\n          console.log('label++++++score', text, index, total);\n          return { top: true, text };\n        },\n        grid: (text) => {\n          console.log(text);\n          return { top: true, text };\n        },\n        line: {\n          top: false,\n        },\n      });\n      chart.axis('item', {\n        label: (text, index, total) => {\n          console.log('label++++++item', text, index, total);\n          return {\n            top: true,\n            text: subjectEnum[text as keyof typeof subjectEnum],\n          };\n        },\n      });\n      chart\n        .area()\n        .position('item*score')\n        .color('type', (type) => {\n          console.log(type);\n          if (type === 'my') {\n            return themeColor;\n          }\n          return '#BFBFBF';\n        })\n        .animate({\n          appear: {\n            animation: 'groupWaveIn',\n          },\n        });\n      chart\n        .line()\n        .position('item*score')\n        .color('type', (type) => {\n          console.log(type);\n          if (type === 'my') {\n            return themeColor;\n          }\n          return '#BFBFBF';\n        })\n        .animate({\n          appear: {\n            animation: 'groupWaveIn',\n          },\n        });\n      chart\n        .point()\n        .position('item*score')\n        .color('type', (type) => {\n          console.log(type);\n          if (type === 'my') {\n            return themeColor;\n          }\n          return '#BFBFBF';\n        })\n        .style({\n          stroke: '#fff',\n          lineWidth: 1,\n        })\n        .animate({\n          appear: {\n            delay: 300,\n          },\n        });\n      chart.legend({\n        custom: true,\n        verticalAlign: 'top',\n        position: 'left',\n        items: [\n          {\n            name: '能力现状',\n            marker: 'circle',\n            fill: themeColor,\n          },\n          {\n            name: '能力目标',\n            marker: 'circle',\n            fill: '#BFBFBF',\n          },\n        ],\n      });\n      chart.render();\n    }\n  }, [recommendPoint, subjectPointsArr]);\n  const getTabelData = (): ReactElement => {\n    const recommendPointData = { ...recommendPoint };\n    const tableListData: ReactElement[] = [];\n    const sourceData = {} as {\n      [key: string]: {\n        point?: number;\n        level?: string;\n        goalPoint?: number;\n        goalLevel?: string;\n      };\n    };\n    subjectPointsArr?.forEach((item) => {\n      const { subject, subjectPoint } = item;\n      if (!sourceData[subject]) {\n        sourceData[subject] = {};\n      }\n      sourceData[subject].point = subjectPoint;\n      sourceData[subject].level = getLevel(subjectPoint, subject);\n    });\n    Object.keys(recommendPointData).forEach((item) => {\n      if (!sourceData[item]) {\n        sourceData[item] = {};\n      }\n      let point = 0;\n      if (item === 'english') {\n        // point = recommendPointData[item as keyof typeof recommendPointData].toefl;\n        // 接口没有英语成绩\n        point = 0;\n      } else {\n        point = Number(\n          recommendPointData[item as keyof typeof recommendPointData]\n        );\n      }\n      console.log('sourceData+++', sourceData);\n\n      sourceData[item].goalPoint = point;\n      sourceData[item].goalLevel = getLevel(point, item);\n    });\n    Object.keys(sourceData).forEach((item) => {\n      const itemData = sourceData[item];\n      const { point, level, goalPoint, goalLevel } = itemData;\n      tableListData.push(\n        <Tr key={item}>\n          <Td>{subjectEnum[item as keyof typeof subjectEnum]}</Td>\n          <Td>{point}</Td>\n          <Td>{goalPoint}</Td>\n          <Td>{level}</Td>\n          <Td>{goalLevel}</Td>\n        </Tr>\n      );\n    });\n    return (\n      <Table>\n        <tbody>\n          <Tr>\n            <Th>科目</Th>\n            <Th>预测分数</Th>\n            <Th>目标分数</Th>\n            <Th>评级</Th>\n            <Th>目标评级</Th>\n          </Tr>\n          {tableListData}\n        </tbody>\n      </Table>\n    );\n  };\n  // 选择学校\n  const handleSchool = (value: string[]): void => {\n    console.log(value, 'value+++');\n\n    const subjectArr = getSubject(\n      totalData[Number(value[0]) as keyof typeof totalData].departments\n    );\n    setEjuSubject(subjectArr);\n    setSchool(value);\n    setDepartment([]);\n  };\n\n  // 点击预测\n  const handlePredict = (): void => {\n    const param = {\n      school_id: Number(school[0]),\n      math: 200,\n      ja: 400,\n      phy: 90,\n      che: 100,\n      jaw: 50,\n      department: department[0],\n    };\n    APIHelper.predict(param).then((res) => {\n      console.log(res.code);\n      if (res.code === 204) {\n        setProbability(res.data.probability);\n        setRecommendPoint(res.data.recommendPoint.ability);\n      }\n    });\n  };\n  useEffect(() => {\n    APIHelper.getSchool().then((res) => {\n      setTotalData(res.data);\n      const filterArr = getGoalSchool(res.data);\n      setGoalSchool(filterArr);\n    });\n  }, []);\n  return (\n    <PredictScroll>\n      <PredictContent>\n        <PredictSelect>\n          <WhiteSpace size=\"lg\" />\n          <Picker\n            data={goalSchool}\n            cols={1}\n            onOk={(value): void => handleSchool(value)}\n          >\n            <PickItem\n              placeholder=\"院校\"\n              value={\n                totalData[Number(school[0]) as keyof typeof totalData]\n                  ?.schoolName\n              }\n            />\n          </Picker>\n\n          <Picker\n            data={ejuSubject}\n            cols={1}\n            onOk={(value): void => setDepartment(value)}\n          >\n            <PickItem placeholder=\"专业\" value={department[0]} />\n          </Picker>\n        </PredictSelect>\n\n        <PredictBox>\n          <PredictBoxFont>\n            合格概率:（{(probability * 100).toFixed(2)}%）\n          </PredictBoxFont>\n          <PredictBoxButton onClick={(): void => handlePredict()}>\n            点击预测\n          </PredictBoxButton>\n        </PredictBox>\n        <canvas id=\"predictChart\" width=\"300\" height=\"300\" />\n        <WingBlank size=\"lg\">\n          <WhiteSpace size=\"lg\" />\n          <Card>\n            <Card.Header title=\"数据明细\" />\n            <Card.Body>{getTabelData()}</Card.Body>\n          </Card>\n          <WhiteSpace size=\"lg\" />\n        </WingBlank>\n        <BottomBlank />\n      </PredictContent>\n    </PredictScroll>\n  );\n};\n\nexport default Predict;\n","import React, {\r\n  ReactNode,\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useState,\r\n} from 'react';\r\nimport {\r\n  FIND_GENERAL_ABILITY,\r\n  FIND_SUBJECT,\r\n  PREDICTED_POINTS,\r\n  QUERY_SUBJECT,\r\n  USER_SHOW,\r\n} from '@/helpers/APIHelper';\r\nimport { useQuery } from '@apollo/client';\r\nimport { level, subjectEnum } from '@/constants/globalDatas';\r\nimport Ladder from './Ladder';\r\nimport Strength from './Strength';\r\nimport Predict from './Predict';\r\nimport {\r\n  IconStar,\r\n  InfoBox,\r\n  InfoItem,\r\n  InfoLi,\r\n  Page,\r\n  TabBox,\r\n  TabItem,\r\n} from './styles';\r\nimport stringArrToPickArr, {\r\n  PickValueArr,\r\n} from '../Library/utils/stringArrToPickArr';\r\n\r\nconst Find: React.FC = () => {\r\n  const { data = {} } = useQuery(USER_SHOW);\r\n  const { data: generalAbility = 0 } = useQuery(FIND_GENERAL_ABILITY);\r\n  // 获取学科下拉框\r\n  const { data: sujectData } = useQuery(QUERY_SUBJECT, {\r\n    variables: { sourceType: 'center' },\r\n  });\r\n  // 获取发现相关学科\r\n  const { data: findSujectData } = useQuery(FIND_SUBJECT);\r\n  // 返回预测总分数和学科预测分数\r\n  const { data: predicterPoints } = useQuery(PREDICTED_POINTS);\r\n  console.log(predicterPoints, 'predicterPoints+++++');\r\n  const { totalRankThisWeek, findPointsSubject, totalPoint } =\r\n    predicterPoints?.findPredictedPoints || {};\r\n  // 学科数组\r\n  const subjectArr = useMemo(\r\n    () => sujectData?.typeSubjects || [],\r\n    [sujectData?.typeSubjects]\r\n  );\r\n  // 发现学科数组\r\n  const findSubjectArr = useMemo(\r\n    () => findSujectData?.findSubjects || [],\r\n    [findSujectData?.findSubjects]\r\n  );\r\n  // 能力值\r\n  const abilityValue = Math.round(generalAbility?.findGeneralAbility / 20);\r\n  const [tabType, setTabType] = useState('strength'); // tab标签类型\r\n  const [rankNum, setRankNum] = useState(0); // 设置排名\r\n  const [subjectFilterArr, setSubjectFilterArr] = useState<PickValueArr[]>([]); // 学科下拉框数据\r\n  const [findSubjectFilterArr, setFindSubjectFilterArr] = useState<\r\n    PickValueArr[]\r\n  >([]); // 发现学科下拉框数据\r\n  const [strengthTab, setStrengthTab] = useState(0);\r\n  // 切换tab标签\r\n  const handleTabChange = (type: string): void => {\r\n    setTabType(type);\r\n  };\r\n  // 获取返回的标签内容\r\n  const getTabContent = useCallback((): ReactNode => {\r\n    let ele = null;\r\n    switch (tabType) {\r\n      case 'strength':\r\n        ele = (\r\n          <Strength\r\n            subjectArr={subjectFilterArr}\r\n            subjectPointsArr={findPointsSubject}\r\n            handleStrengthTabChang={handleStrengthTabChang}\r\n            strengthTab={strengthTab}\r\n          />\r\n        );\r\n        break;\r\n      case 'ladder':\r\n        ele = (\r\n          <Ladder\r\n            subjectArr={findSubjectFilterArr}\r\n            rankNum={rankNum}\r\n            subjectPointsArr={findPointsSubject}\r\n          />\r\n        );\r\n        break;\r\n      case 'predict':\r\n        ele = <Predict subjectPointsArr={findPointsSubject} />;\r\n        break;\r\n      default:\r\n    }\r\n    return ele;\r\n  }, [\r\n    findPointsSubject,\r\n    findSubjectFilterArr,\r\n    rankNum,\r\n    strengthTab,\r\n    subjectFilterArr,\r\n    tabType,\r\n  ]);\r\n\r\n  const { nickName } = data?.getUserInfo || {};\r\n\r\n  // 获取菓星值展示\r\n  const getStar = useCallback(() => {\r\n    const starArr = [];\r\n    for (let i = 1; i <= 5; i += 1) {\r\n      starArr.push(\r\n        <IconStar\r\n          className={i <= abilityValue ? 'iconfont icon-star1' : ''}\r\n          key={i}\r\n        />\r\n      );\r\n    }\r\n    return starArr;\r\n  }, [abilityValue]);\r\n\r\n  // 获得信息展示栏\r\n  const getInfo = useCallback((): JSX.Element => {\r\n    const Item1 = <InfoItem>昵称：{nickName}</InfoItem>;\r\n    let Item2 = null;\r\n    let Item3 = null;\r\n    let Item4 = null;\r\n    switch (tabType) {\r\n      case 'strength':\r\n        if (strengthTab === 0) {\r\n          Item2 = <InfoItem>预测分数(不含日语)</InfoItem>;\r\n          Item4 = <InfoItem>{totalPoint}</InfoItem>;\r\n        }\r\n        if (strengthTab === 1) {\r\n          Item2 = <InfoItem>平均菓星值</InfoItem>;\r\n          Item4 = <InfoItem>{getStar()}</InfoItem>;\r\n        }\r\n        Item3 = (\r\n          <InfoItem>\r\n            评级：\r\n            {level[abilityValue as keyof typeof level]}\r\n          </InfoItem>\r\n        );\r\n        break;\r\n      case 'ladder':\r\n        Item2 = <InfoItem>本季综合排名</InfoItem>;\r\n        Item3 = <InfoItem>总分：{totalPoint}</InfoItem>;\r\n        Item4 = <InfoItem>{rankNum}</InfoItem>;\r\n        break;\r\n      case 'predict':\r\n        Item2 = <InfoItem>预测分数(不含日语)</InfoItem>;\r\n        Item3 = (\r\n          <InfoItem>\r\n            评级：\r\n            {level[abilityValue as keyof typeof level]}\r\n          </InfoItem>\r\n        );\r\n        Item4 = <InfoItem>{totalPoint}</InfoItem>;\r\n        break;\r\n      default:\r\n    }\r\n    return (\r\n      <InfoBox>\r\n        <InfoLi>\r\n          {Item1}\r\n          {Item2}\r\n        </InfoLi>\r\n        <InfoLi>\r\n          {Item3}\r\n          {Item4}\r\n        </InfoLi>\r\n      </InfoBox>\r\n    );\r\n  }, [\r\n    abilityValue,\r\n    getStar,\r\n    nickName,\r\n    rankNum,\r\n    strengthTab,\r\n    tabType,\r\n    totalPoint,\r\n  ]);\r\n  // 实力评估tab切换\r\n  const handleStrengthTabChang = (index: number): void => {\r\n    console.log(index);\r\n    setStrengthTab(index);\r\n  };\r\n  // 获取下拉选框的值\r\n  useEffect(() => {\r\n    if (subjectArr?.length > 0) {\r\n      setSubjectFilterArr(stringArrToPickArr(subjectArr, subjectEnum));\r\n    }\r\n  }, [subjectArr]);\r\n  // 获取发现学科下拉选框的值\r\n  useEffect(() => {\r\n    if (findSubjectArr?.length > 0) {\r\n      setFindSubjectFilterArr(stringArrToPickArr(findSubjectArr, subjectEnum));\r\n    }\r\n  }, [findSubjectArr]);\r\n  // 设置综合排行\r\n  useEffect(() => {\r\n    setRankNum(totalRankThisWeek);\r\n  }, [totalRankThisWeek]);\r\n  return (\r\n    <Page>\r\n      <TabBox>\r\n        <TabItem\r\n          className={tabType === 'strength' ? 'active' : ''}\r\n          onClick={(): void => handleTabChange('strength')}\r\n        >\r\n          实力评估\r\n        </TabItem>\r\n        <TabItem\r\n          className={tabType === 'ladder' ? 'active' : ''}\r\n          onClick={(): void => handleTabChange('ladder')}\r\n        >\r\n          排行天梯\r\n        </TabItem>\r\n        <TabItem\r\n          className={tabType === 'predict' ? 'active' : ''}\r\n          onClick={(): void => handleTabChange('predict')}\r\n        >\r\n          智能预测\r\n        </TabItem>\r\n      </TabBox>\r\n      <>{getInfo()}</>\r\n      <>{getTabContent()}</>\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default Find;\r\n","export default __webpack_public_path__ + \"assets/images/bg677958d2.jpg\";","import styled from 'styled-px2vw';\r\nimport bg from './images/bg.jpg';\r\nimport pkg from '../../../package.json';\r\n\r\nconst themeColor = pkg.theme['brand-primary'];\r\n\r\nexport const PersonBg = styled.div`\r\n  height: 312px;\r\n  position: relative;\r\n`;\r\nexport const PersonInner = styled.div`\r\n  position: absolute;\r\n  z-index: 2;\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\nexport const PersonBgInner = styled(PersonInner)<{ bg: string }>`\r\n  z-index: 1;\r\n  overflow: hidden;\r\n  &::before {\r\n    content: '';\r\n    position: absolute;\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    background-image: url(${(props): string => props.bg});\r\n    filter: blur(10px);\r\n    background-size: cover;\r\n    width: 115%;\r\n    height: 115%;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n  }\r\n`;\r\nexport const AvatarBox = styled.div`\r\n  width: 220px;\r\n  height: 220px;\r\n  border-radius: 50%;\r\n  background-color: #fff;\r\n  padding: 12px;\r\n  position: absolute;\r\n  left: 42px;\r\n  bottom: -14px;\r\n  box-shadow: 0px 4px 20px rgba(101, 101, 101, 0.15);\r\n`;\r\nexport const Avatar = styled.img`\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n  object-position: center;\r\n`;\r\nexport const AvatarUpload = styled.input`\r\n  width: 100%;\r\n  height: 100%;\r\n  opacity: 0;\r\n  position: absolute;\r\n  z-index: 1;\r\n  top: 0;\r\n  left: 0;\r\n`;\r\nexport const NickBox = styled.div`\r\n  width: 375px;\r\n  height: 206px;\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n  color: #fff;\r\n`;\r\n\r\nexport const NickName = styled.div`\r\n  font-weight: bold;\r\n  font-size: 38px;\r\n`;\r\nexport const Sign = styled.div`\r\n  font-size: 22px;\r\n  margin-top: 70px;\r\n`;\r\n\r\nexport const FucList = styled.div`\r\n  height: 366px;\r\n  background: #f5f5f5;\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  overflow: auto;\r\n`;\r\n\r\nexport const FucListItem = styled.div`\r\n  width: 284px;\r\n  height: 234px;\r\n  background: #fff;\r\n  filter: drop-shadow(4px 5px 10px rgba(0, 0, 0, 0.05));\r\n  border-radius: 20px;\r\n  margin-left: 32px;\r\n  flex-shrink: 0;\r\n  &:last-child {\r\n    margin-right: 32px;\r\n  }\r\n`;\r\n\r\nexport const FucListItemTop = styled.div`\r\n  height: 134px;\r\n  background: url(${bg}) no-repeat center;\r\n  background-size: cover;\r\n  border-top-left-radius: 20px;\r\n  border-top-right-radius: 20px;\r\n`;\r\nexport const FucListItemBottom = styled.div`\r\n  height: 100px;\r\n  font-size: 32px;\r\n  font-weight: bold;\r\n  text-align: center;\r\n  line-height: 100px;\r\n`;\r\n\r\nexport const MenuBox = styled.div`\r\n  padding-top: 60px;\r\n`;\r\n\r\nexport const MenuItem = styled.div`\r\n  padding: 0 46px;\r\n  display: flex;\r\n  align-items: center;\r\n  height: 96px;\r\n  margin-bottom: 36px;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport const MenuLabel = styled.div`\r\n  display: inline-flex;\r\n  font-weight: bold;\r\n  font-size: 32px;\r\n  align-items: center;\r\n`;\r\n\r\nexport const MenuIcon = styled.span`\r\n  width: 40px;\r\n  height: 40px;\r\n  margin-right: 90px;\r\n  font-size: 40px;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #bfbfbf;\r\n`;\r\n\r\nexport const MsgNum = styled.div`\r\n  width: 48px;\r\n  height: 48px;\r\n  border-radius: 6px;\r\n  background: ${themeColor};\r\n  font-weight: 500;\r\n  font-size: 14px;\r\n  font-size: 28px;\r\n  line-height: 48px;\r\n  text-align: center;\r\n  color: #fff;\r\n`;\r\n","import EXIF from './exif';\n// 校验图片格式\nconst checkImg = (file: File): boolean => {\n  return /\\.(png|jpg|jpeg|PNG|JPG|JPEG)$/.test(file.name);\n};\n\n// 获取图片的旋转数值\nfunction getPhotoOrientation(img: HTMLImageElement): number {\n  let orient = 0;\n  try {\n    EXIF.getData(img, (): void => {\n      orient = EXIF.getTag(img, 'Orientation');\n    });\n  } catch (e) {\n    console.log(e);\n  }\n  return orient;\n}\n// 图片压缩\nfunction compressImg(imgBase64: string, sizeNum: number): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const img = new Image();\n    img.src = imgBase64;\n\n    img.onerror = (): void => {\n      reject(new Error('上传失败！'));\n    };\n    img.onload = (): void => {\n      const { width } = img;\n      const { height } = img;\n      const scale = width / height;\n      // let w = 600;\n      // let h = parseInt(w / scale);\n      let w = 0;\n      let h = 0;\n      const baseNum = sizeNum;\n      if (scale < 1) {\n        w = baseNum;\n        h = baseNum / scale;\n      } else {\n        h = baseNum;\n        w = scale * baseNum;\n      }\n      // 解决ios中压缩图片后旋转Bug\n      console.log('orient:', getPhotoOrientation(img));\n      const orient = getPhotoOrientation(img);\n      if (context) {\n        switch (orient) {\n          case 6:\n            canvas.width = h;\n            canvas.height = w;\n            context.save();\n            context.translate(h / 2, w / 2);\n            context.rotate((90 * Math.PI) / 180);\n            context.drawImage(img, -w / 2, -h / 2, w, h);\n            context.restore();\n            break;\n          case 3:\n            canvas.width = w;\n            canvas.height = h;\n            context.save();\n            context.translate(w / 2, h / 2);\n            context.rotate((180 * Math.PI) / 180);\n            context.drawImage(img, -w / 2, -h / 2, w, h);\n            context.restore();\n            break;\n          case 8:\n            canvas.width = h;\n            canvas.height = w;\n            context.save();\n            context.translate(h / 2, w / 2);\n            context.rotate((-90 * Math.PI) / 180);\n            context.drawImage(img, -w / 2, -h / 2, w, h);\n            context.restore();\n            break;\n          default:\n            canvas.width = w;\n            canvas.height = h;\n            context.drawImage(img, 0, 0, w, h);\n        }\n      }\n      const imgCompressed = canvas.toDataURL('image/jpeg', 0.92);\n      resolve(imgCompressed);\n    };\n  });\n}\nconst chooseImg = (file: File, sizeNum: number): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    if (!checkImg(file)) {\n      reject(new Error('请上传正确格式图片（jpeg、jpg、png）'));\n    }\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    // 获取图片base64资源\n    reader.onload = (e): void => {\n      // console.log(e && e.target && e.target.result);\n      const imageBase64 =\n        e && e.target && e.target.result ? e.target.result : '';\n      const imageBase64String =\n        typeof imageBase64 === 'string' ? imageBase64 : '';\n      compressImg(imageBase64String, sizeNum)\n        .then((res) => resolve(res))\n        .catch((pressError) => reject(pressError));\n    };\n    reader.onerror = (): void => {\n      reject(new Error('上传失败！'));\n    };\n  });\n};\nexport default chooseImg;\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport {\r\n  QUERY_MSG_NUM,\r\n  UPDATE_USER_INFO,\r\n  USER_SHOW,\r\n} from '@/helpers/APIHelper';\r\nimport { ProviderContext } from '@/reducer/context';\r\nimport {\r\n  PersonBg,\r\n  AvatarBox,\r\n  PersonInner,\r\n  Avatar,\r\n  PersonBgInner,\r\n  NickBox,\r\n  NickName,\r\n  Sign,\r\n  FucList,\r\n  FucListItem,\r\n  FucListItemTop,\r\n  FucListItemBottom,\r\n  MenuBox,\r\n  MenuItem,\r\n  MenuLabel,\r\n  MenuIcon,\r\n  MsgNum,\r\n  AvatarUpload,\r\n} from './styles';\r\nimport chooseImg from './utils/chooseImg';\r\nimport avatarDefault from './images/avatar-default.jpg';\r\n\r\nconst UserCenter: React.FC = () => {\r\n  const { data = {} } = useQuery(USER_SHOW, {\r\n    fetchPolicy: 'cache-and-network',\r\n  });\r\n  const { data: msgNum } = useQuery(QUERY_MSG_NUM, {\r\n    fetchPolicy: 'cache-and-network',\r\n  });\r\n  const { state } = useContext(ProviderContext);\r\n  const { userInfo } = state;\r\n  const { nickName, signature, avatar } = data?.getUserInfo || userInfo || {};\r\n  const [avatarBase64, setAvatarBase64] = useState(avatar || '');\r\n  const [updateUserInfo] = useMutation(UPDATE_USER_INFO, {\r\n    onCompleted: () => console.log('保存成功'),\r\n    onError: () => console.log('保存失败'),\r\n  });\r\n\r\n  const history = useHistory();\r\n  const avatarStr = avatarBase64 || avatarDefault;\r\n\r\n  console.log('avatarStr+++++', avatarStr);\r\n  // 操作菜单\r\n  const handleMenu = (type: string): void => {\r\n    switch (type) {\r\n      case 'msg':\r\n        history.push('/msg');\r\n        break;\r\n      case 'personal':\r\n        history.push('/complete-all?completeType=update');\r\n        break;\r\n      case 'setting':\r\n        history.push('/setting');\r\n        break;\r\n      default:\r\n    }\r\n  };\r\n  // 获取未读消息数\r\n  // const getMessageNum = (): number => {\r\n  //   let num = 0;\r\n  //   userMessages?.forEach((item: { isRead: boolean }) => {\r\n  //     if (!item.isRead) {\r\n  //       num += 1;\r\n  //     }\r\n  //   });\r\n  //   return num;\r\n  // };\r\n\r\n  // 上传头像\r\n  const getImg = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    const fileData = e.target.files;\r\n    if (fileData && fileData[0]) {\r\n      // 获取图片最小大小像素\r\n      const sizeNum =\r\n        (document.getElementById('avatar_box')?.offsetWidth || 0) *\r\n        window.devicePixelRatio;\r\n      chooseImg(fileData[0], sizeNum).then((res) => {\r\n        updateUserInfo({\r\n          variables: {\r\n            userInfoInput: {\r\n              avatar: res,\r\n            },\r\n          },\r\n        });\r\n        setAvatarBase64(res);\r\n        console.log(res);\r\n      });\r\n    }\r\n  };\r\n\r\n  // 赋值头像\r\n  useEffect(() => {\r\n    if (avatar) {\r\n      const img = new Image();\r\n      img.src = avatar;\r\n      img.onload = (): void => {\r\n        setAvatarBase64(avatar);\r\n      };\r\n    }\r\n  }, [avatar]);\r\n  return (\r\n    <>\r\n      <PersonBg>\r\n        <PersonBgInner bg={avatarStr} />\r\n        <PersonInner>\r\n          <AvatarBox id=\"avatar_box\">\r\n            <Avatar src={avatarStr} />\r\n            <AvatarUpload\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={(e): void => getImg(e)}\r\n            />\r\n          </AvatarBox>\r\n          <NickBox>\r\n            <NickName>{nickName}</NickName>\r\n            <Sign>{signature}</Sign>\r\n          </NickBox>\r\n        </PersonInner>\r\n      </PersonBg>\r\n      <FucList>\r\n        <FucListItem onClick={(): void => history.push('/record')}>\r\n          <FucListItemTop />\r\n          <FucListItemBottom>练习记录</FucListItemBottom>\r\n        </FucListItem>\r\n      </FucList>\r\n      <MenuBox>\r\n        <MenuItem onClick={(): void => handleMenu('personal')}>\r\n          <MenuLabel>\r\n            <MenuIcon className=\"iconfont icon-personal\" />\r\n            个人信息\r\n          </MenuLabel>\r\n        </MenuItem>\r\n        <MenuItem onClick={(): void => handleMenu('msg')}>\r\n          <MenuLabel>\r\n            <MenuIcon className=\"iconfont icon-msg\" />\r\n            消息中心\r\n          </MenuLabel>\r\n          <MsgNum>{msgNum?.getUnreadMessageCount || 0}</MsgNum>\r\n        </MenuItem>\r\n        <MenuItem onClick={(): void => handleMenu('setting')}>\r\n          <MenuLabel>\r\n            <MenuIcon className=\"iconfont icon-setting\" />\r\n            通用设定\r\n          </MenuLabel>\r\n        </MenuItem>\r\n      </MenuBox>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserCenter;\r\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport TabBar from '@/components/TabBar';\nimport Library from '../Library';\nimport Find from '../Find';\nimport UserCenter from '../UserCenter';\n\nconst Home: React.FC = (props) => {\n  const [type, setType] = useState(''); // 设置标签页\n\n  const history = useHistory();\n  const location = useLocation();\n\n  // 初始化页面访问类型\n  useEffect(() => {\n    console.log(location);\n    const { pathname } = location;\n    switch (pathname) {\n      case '/library':\n        setType('library');\n        break;\n      case '/find':\n        setType('find');\n        break;\n      case '/user-center':\n        setType('user-center');\n        break;\n      default:\n    }\n  }, [location]);\n\n  // 点击footer\n  const handleClick = useCallback(\n    (clickType: string): void => {\n      history.push(`/${clickType}`);\n    },\n    [history]\n  );\n  return (\n    <div>\n      {type === 'library' && <Library />}\n      {type === 'find' && <Find />}\n      {type === 'user-center' && <UserCenter />}\n      <TabBar handelClick={handleClick} type={type} />\n    </div>\n  );\n};\n\nexport default Home;\n"],"sourceRoot":""}